---
title: 微信小程序基础知识
date: 2023-02-27 21:42:19
categories:
  - 前端基础
tags:
  - 小程序
---

小程序基础知识汇总。

<!-- more -->

## 微信小程序结构

小程序的运行环境分成渲染层和逻辑层，其中 WXML 模板和 WXSS 样式工作在渲染层，JS 脚本工作在逻辑层。视图层和逻辑层通过 Native 层进行进行通信，并且通过 Native 层获得原生能力。
逻辑层和视图层之间的工作方式为：数据变更通过 setData 驱动视图更新；视图层交互触发事件，然后触发逻辑层的事件响应函数，函数中修改数据再次触发视图更新。

## 小程序框架

常见框架：mpvue、taro、uni-app
实现流程：

- 编译阶段：将其他 DSL（domain-specific language） 转换为符合小程序语法的 WXML、WXSS、JS、JSON；
- 运行阶段：数据、事件、生命周期等部分的处理和对接；

### mpvue

特点：将 Vue 实例和小程序页面实例简单粗暴地做了关联，以达到使用 Vue 开发小程序的目的。

### taro

特点：

- 无 DSL 限制：无论是你们团队是 React 还是 Vue 技术栈，都能够使用 Taro 开发。
- 新特性无缝支持：由于 Taro Next 本质上是将 React/Vue 运行在小程序上，因此，各种新特性也就无缝支持了。

### uni-app

特点：

- 支持组件局部更新：mpvue 时小程序不支持自定义组件，所以组件编进 Page，更新也是 Page 级
- setData 优化：将数据进行 diff，然后通过 setData 进行路径级别的更新

## 微信小程序生命周期

全局文件 app.js 中定义了一些声明周期的方法

onLaunch() 监听小程序初始化 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）
onShow() 监听小程序显示 当小程序启动，或从后台进入前台显示，会触发 onShow
onHide() 监听小程序隐藏 当小程序从前台进入后台，会触发 onHide

这是每个 page 页面的周期函数

onLoad() 页面加载时触发，全局只会调用一次，在该周期内可获取当前页面路径的参数
onShow() 页面显示时触发或者切入前台时触发，也就是在该周期内可以获取请求数据
onReady() 页面初次渲染完成时触发，只会调用一次，代表页面已经可以和视图层进行交互
onHide() 页面隐藏或者切入后台时触发，如底部 tab 切换到其他页面或小程序切入后台时触发。
onUnload() 页面卸载时触发
