<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å°ç™½çš„æ–‡ä»¶æ•´ç†ç®±</title>
  
  
  <link href="https://unknown404.github.io/unkown404.github.io/atom.xml" rel="self"/>
  
  <link href="https://unknown404.github.io/unkown404.github.io/"/>
  <updated>2023-02-19T07:14:09.022Z</updated>
  <id>https://unknown404.github.io/unkown404.github.io/</id>
  
  <author>
    <name>å°ç™½çš„æ–‡ä»¶æ•´ç†ç®±</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>webpack</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2023/02/19/webpack/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2023/02/19/webpack/</id>
    <published>2023-02-19T06:44:52.000Z</published>
    <updated>2023-02-19T07:14:09.022Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ç«¯ webpack æ‰“åŒ…å·¥å…·æ–¹é¢çŸ¥è¯†æ•´ç†ã€‚</p><span id="more"></span><h2 id="webpack-åŸºæœ¬æ¦‚å¿µ"><a href="#webpack-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="webpack åŸºæœ¬æ¦‚å¿µ"></a>webpack åŸºæœ¬æ¦‚å¿µ</h2><h3 id="webpack-ä½œç”¨"><a href="#webpack-ä½œç”¨" class="headerlink" title="webpack ä½œç”¨"></a>webpack ä½œç”¨</h3><p>é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚ä¸»è¦ä½œç”¨ï¼š</p><ul><li>æ¨¡å—æ‰“åŒ…ã€‚å¯ä»¥å°†ä¸åŒæ¨¡å—çš„æ–‡ä»¶æ‰“åŒ…æ•´åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸”ä¿è¯å®ƒä»¬ä¹‹é—´çš„å¼•ç”¨æ­£ç¡®ï¼Œæ‰§è¡Œæœ‰åºã€‚</li><li>ç¼–è¯‘å…¼å®¹ã€‚é€šè¿‡ webpack çš„ Loader æœºåˆ¶ï¼Œç¼–è¯‘è½¬æ¢è¯¸å¦‚.lessï¼Œ.vueï¼Œ.jsx è¿™ç±»åœ¨æµè§ˆå™¨æ— æ³•è¯†åˆ«çš„æ ¼å¼æ–‡ä»¶</li><li>èƒ½åŠ›æ‰©å±•ã€‚é€šè¿‡ webpack çš„ Plugin æœºåˆ¶ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥å®ç°è¯¸å¦‚æŒ‰éœ€åŠ è½½ï¼Œä»£ç å‹ç¼©ç­‰ä¸€ç³»åˆ—åŠŸèƒ½</li></ul><h3 id="webpack-æ„å»ºæµç¨‹"><a href="#webpack-æ„å»ºæµç¨‹" class="headerlink" title="webpack æ„å»ºæµç¨‹"></a>webpack æ„å»ºæµç¨‹</h3><p>åˆå§‹åŒ–ï¼šå¯åŠ¨æ„å»ºï¼Œè¯»å–ä¸åˆå¹¶é…ç½®å‚æ•°ï¼ŒåŠ è½½ Pluginï¼Œå®ä¾‹åŒ– Compiler<br>ç¼–è¯‘ï¼šä» entry å‡ºå‘ï¼Œé’ˆå¯¹æ¯ä¸ª Module ä¸²è¡Œè°ƒç”¨å¯¹åº”çš„ loader å»ç¿»è¯‘æ–‡ä»¶çš„å†…å®¹ï¼Œå†æ‰¾åˆ°è¯¥ Module ä¾èµ–çš„ Moduleï¼Œé€’å½’åœ°è¿›è¡Œç¼–è¯‘å¤„ç†<br>è¾“å‡ºï¼šå°†ç¼–è¯‘åçš„ Module ç»„åˆæˆ Chunkï¼Œå°† Chunk è½¬æ¢æˆæ–‡ä»¶ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿä¸­</p><h3 id="loader-å’Œ-plugin-åŒºåˆ«"><a href="#loader-å’Œ-plugin-åŒºåˆ«" class="headerlink" title="loader å’Œ plugin åŒºåˆ«"></a>loader å’Œ plugin åŒºåˆ«</h3><ul><li>åŠŸèƒ½æ–¹é¢ï¼šloader æ˜¯æ–‡ä»¶åŠ è½½å™¨ï¼Œèƒ½å¤ŸåŠ è½½èµ„æºæ–‡ä»¶ï¼Œå¹¶å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œä¸€äº›å¤„ç†ï¼›plugin å¯ä»¥æ‰©å±• Webpack çš„åŠŸèƒ½ï¼Œç›‘å¬åœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºçš„è®¸å¤šäº‹ä»¶å¹¶åšå¤„ç†ï¼Œè§£å†³ loader æ— æ³•å®ç°çš„å…¶ä»–äº‹ã€‚</li><li>è¿è¡Œæ—¶æœºæ–¹é¢ï¼šloader è¿è¡Œåœ¨æ‰“åŒ…æ–‡ä»¶ä¹‹å‰ï¼›plugin åˆ™æ˜¯åœ¨æ•´ä¸ªç¼–è¯‘å‘¨æœŸéƒ½èµ·ä½œç”¨ã€‚</li><li>é…ç½®ä¹¦å†™æ–¹é¢ï¼šloader åœ¨ module.rules ä¸­é…ç½®ï¼Œä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™ï¼Œç±»å‹ä¸ºæ•°ç»„ï¼Œå†…éƒ¨åŒ…å«äº† test(ç±»å‹æ–‡ä»¶)ã€loaderã€options (å‚æ•°)ç­‰å±æ€§éœ€è¦é…ç½®ã€‚plugin åœ¨ plugins ä¸­å•ç‹¬é…ç½®ï¼Œç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª plugin çš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚</li></ul><h3 id="webpack-çƒ­æ›´æ–°åŸç†"><a href="#webpack-çƒ­æ›´æ–°åŸç†" class="headerlink" title="webpack çƒ­æ›´æ–°åŸç†"></a>webpack çƒ­æ›´æ–°åŸç†</h3><p>webpack-dev-server ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª websocketï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œwebpack-dev-server ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ hashï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ webpack-dev-server å‘èµ· Ajax è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹ã€‚åç»­çš„éƒ¨åˆ†(æ‹¿åˆ°å¢é‡æ›´æ–°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿå“ªäº›çŠ¶æ€è¯¥ä¿ç•™ï¼Ÿå“ªäº›åˆéœ€è¦æ›´æ–°ï¼Ÿ)ç”± HotModulePlugin æ¥å®Œæˆ</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://juejin.cn/post/7196630860811075642">2023 å‰ç«¯é¢è¯•ç³»åˆ—â€“ webpack &amp; Git ç¯‡</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰ç«¯ webpack æ‰“åŒ…å·¥å…·æ–¹é¢çŸ¥è¯†æ•´ç†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯åŸºç¡€" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="webpack" scheme="https://unknown404.github.io/unkown404.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>vscodeè°ƒè¯•Nodeä»£ç </title>
    <link href="https://unknown404.github.io/unkown404.github.io/2023/02/17/vscodeRunNode/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2023/02/17/vscodeRunNode/</id>
    <published>2023-02-17T01:46:55.000Z</published>
    <updated>2023-02-19T05:12:04.553Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®ç°æ“ä½œ"><a href="#å®ç°æ“ä½œ" class="headerlink" title="å®ç°æ“ä½œ"></a>å®ç°æ“ä½œ</h2><ol><li>ç‚¹å‡»vscodeå·¦ä¾§è¾¹æ çš„ä¸‰è§’å½¢çŠ¶åŠ ğŸ›çš„ç¬¦å·ï¼Œå¦‚æœç›´æ¥è°ƒè¯•å½“å‰æ–‡ä»¶å¯ä»¥å…ˆæ‰“å¥½æ–­ç‚¹ã€ç‚¹å‡»æŒ‰é’®Run and Debugï¼›å¦‚æœéœ€è¦è‡ªå®šä¹‰ç„¶åç‚¹å‡»create a launch.json file</li><li>ç¼–è¾‘launch.json<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk">&#123;<br>    <span class="hljs-regexp">//</span> ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ <br>    <span class="hljs-regexp">//</span> æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚<br>    <span class="hljs-regexp">//</span> æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https:<span class="hljs-regexp">//g</span>o.microsoft.com<span class="hljs-regexp">/fwlink/</span>?linkid=<span class="hljs-number">830387</span><br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;0.2.0&quot;</span>,<br>    <span class="hljs-string">&quot;configurations&quot;</span>: [<br>        &#123;<br>            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;node&quot;</span>,<br>            <span class="hljs-string">&quot;request&quot;</span>: <span class="hljs-string">&quot;launch&quot;</span>,<br>            <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¯åŠ¨ç¨‹åº&quot;</span>,<br>            <span class="hljs-string">&quot;skipFiles&quot;</span>: [<br>                <span class="hljs-string">&quot;&lt;node_internals&gt;/**&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;program&quot;</span>: <span class="hljs-string">&quot;$&#123;workspaceFolder&#125;&quot;</span><br>        &#125;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ul><li>æ‰§è¡Œå•ä¸€æ–‡ä»¶æ—¶ï¼šä¿®æ”¹programçš„å†…å®¹ï¼Œæ”¹ä¸ºè¦è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–æºä»£ç çš„è·¯å¾„</li><li>è°ƒè¯•æœåŠ¡å™¨æ—¶ï¼šå°†é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼š<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;attach&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Attach NestJS WS&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9229</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;restart&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;stopOnEntry&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;inspector&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure>requestç”±launchæ”¹ä¸ºäº†attachï¼Œç›®çš„æ˜¯ä¸ºäº†å°†Visual Studio Codeçš„è°ƒè¯•å™¨ç»‘å®šåˆ°ä¸€ä¸ªå·²ç»å¤„äºè¿è¡ŒçŠ¶æ€çš„åº”ç”¨ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶çš„å«ä¹‰æ˜¯å‘Šè¯‰Visual Studio Codeçš„è°ƒè¯•è¿›ç¨‹ï¼Œå»è¿æ¥127.0.0.1:9229ä¸Šçš„åº”ç”¨è°ƒè¯•è¿›ç¨‹å»è°ƒè¯•ã€‚</li></ul><ol start="3"><li>é…ç½®å®Œåç‚¹å‡»è°ƒè¯•æ çš„è¿è¡Œï¼Œå¦‚æœæ˜¯è°ƒè¯•æœåŠ¡å™¨æ¥å£éœ€è¦å…ˆæ‰§è¡ŒdebugæŒ‡ä»¤è¿è¡Œèµ·æœåŠ¡å™¨ï¼Œä»¥eggjsä¸ºä¾‹æ˜¯<code>egg-bin debug</code>ï¼›ä»¥nestä¸ºä¾‹æ˜¯<code>nest start --debug --watch</code>ã€‚æ­¤æ—¶ä¼šå¯åŠ¨127.0.0.1:9229çš„è°ƒè¯•è¿›ç¨‹ï¼Œå¦‚æœäº‹å…ˆæ‰“å¥½æ–­ç‚¹ï¼Œåœ¨postmanä¸Šè°ƒè¯•æœ¬åœ°æ¥å£æ—¶ä¼šåœ¨å¯¹åº”æ¥å£çš„é€»è¾‘æ–­ç‚¹å‰åœæ­¢è¿è¡Œã€‚<h2 id="å‚è€ƒå†…å®¹"><a href="#å‚è€ƒå†…å®¹" class="headerlink" title="å‚è€ƒå†…å®¹"></a>å‚è€ƒå†…å®¹</h2>ï¼ˆ1ï¼‰<a href="https://juejin.cn/post/6981820158046109703">è®©ä½  nodejs æ°´å¹³æš´å¢çš„ debugger æŠ€å·§</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/6844903838864900110">å¦‚ä½•ç”¨Visual Studio Codeè¿œç¨‹è°ƒè¯•è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„nodejsåº”ç”¨</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å®ç°æ“ä½œ&quot;&gt;&lt;a href=&quot;#å®ç°æ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å®ç°æ“ä½œ&quot;&gt;&lt;/a&gt;å®ç°æ“ä½œ&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ç‚¹å‡»vscodeå·¦ä¾§è¾¹æ çš„ä¸‰è§’å½¢çŠ¶åŠ ğŸ›çš„ç¬¦å·ï¼Œå¦‚æœç›´æ¥è°ƒè¯•å½“å‰æ–‡ä»¶å¯ä»¥å…ˆæ‰“å¥½æ–­ç‚¹ã€ç‚¹å‡»æŒ‰é’®Run and De</summary>
      
    
    
    
    <category term="å·¥ä½œæŠ€å·§" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="node.js" scheme="https://unknown404.github.io/unkown404.github.io/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•æŠ€å·§</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2023/02/15/interviewSkill/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2023/02/15/interviewSkill/</id>
    <published>2023-02-15T14:15:30.000Z</published>
    <updated>2023-02-19T03:40:53.749Z</updated>
    
    <content type="html"><![CDATA[<ol><li>é¡¹ç›®ä¸­ä½ é‡åˆ°çš„éš¾è§£å†³çš„é—®é¢˜æœ‰å“ªäº›ï¼Œæœ€åæ€ä¹ˆå¤„ç†çš„è¿™ç§é—®é¢˜<br>éš¾è§£å†³çš„é—®é¢˜åˆ†ä¸ºä¸¤ç§ï¼š1.ä¸šåŠ¡é—®é¢˜ï¼Œéœ€æ±‚ä¸æ¸…ã€‚è¿™æ—¶éœ€è¦æ‹‰ä¸Šæ‡‚ä¸šåŠ¡çš„åŒäº‹ç†æ¸…éœ€æ±‚ï¼Œå¿…è¦çš„æ—¶å€™éœ€è¦è°ƒæ•´è®¾è®¡ã€‚åŒæ—¶è‡ªä¸»å­¦ä¹ ï¼Œå¢å¼ºå¯¹ä¸šåŠ¡çš„äº†è§£ã€‚2.æŠ€æœ¯é—®é¢˜ï¼Œå¯èƒ½æ˜¯ç”±äºä¹‹å‰æŠ€æœ¯æ ˆé™åˆ¶å¯¼è‡´éœ€æ±‚éš¾ä»¥å®ç°ï¼Œæˆ–è€…è¯´ç°æœ‰æŠ€æœ¯å¯¼è‡´å®ç°éœ€æ±‚ä¼šæœ‰æ€§èƒ½ã€å¯ç»´æŠ¤æ€§é—®é¢˜ï¼Œæˆ–è€…æ˜¯è‡ªèº«å‚¨å¤‡æˆ–è€…å‘¨è¾¹èµ„æºä¸è¶³(æ¯”å¦‚è¯´æ²¡æœ‰ç°æˆçš„ç»„ä»¶åº“)å¯¼è‡´å·¥æœŸæ¯”é¢„æƒ³é•¿ã€‚å¯ä»¥é€šè¿‡æœ€å°é™åº¦å®ç°éœ€æ±‚ã€è¯·æ•™å…¬å¸æˆ–åŒé¡¹ç›®ç»„çš„åŒäº‹å¯»æ‰¾åˆé€‚çš„å·¥å…·ã€äº¤å‰é›†æˆå…¶ä»–æ¡†æ¶ç­‰æ–¹å¼è§£å†³ï¼Œä½†æœ€é‡è¦çš„æ˜¯åŠæ—©æ²Ÿé€šã€‚</li></ol>]]></content>
    
    
    <summary type="html">é¢è¯•ä¸­å¸¸è§é—®é¢˜è®°å½•</summary>
    
    
    
    <category term="å·¥ä½œæŠ€å·§" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="é¢è¯•" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯ä½¿ç”¨shellæŒ‡ä»¤</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2023/01/16/shelljs/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2023/01/16/shelljs/</id>
    <published>2023-01-16T02:10:25.000Z</published>
    <updated>2023-02-02T10:21:28.903Z</updated>
    
    <content type="html"><![CDATA[<h2 id="node-js-ä½¿ç”¨-shell-æŒ‡ä»¤"><a href="#node-js-ä½¿ç”¨-shell-æŒ‡ä»¤" class="headerlink" title="node.js ä½¿ç”¨ shell æŒ‡ä»¤"></a>node.js ä½¿ç”¨ shell æŒ‡ä»¤</h2><h3 id="child-process"><a href="#child-process" class="headerlink" title="child_process"></a>child_process</h3><p>node æä¾›çš„ä¸€ä¸ªå­è¿›ç¨‹ API</p><h4 id="å¸¸è§æŒ‡ä»¤"><a href="#å¸¸è§æŒ‡ä»¤" class="headerlink" title="å¸¸è§æŒ‡ä»¤"></a>å¸¸è§æŒ‡ä»¤</h4><h5 id="child-process-spawn-command-args-options"><a href="#child-process-spawn-command-args-options" class="headerlink" title="child_process.spawn(command[, args][, options])"></a>child_process.spawn(command[, args][, options])</h5><p>åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹æ¥æ‰§è¡ŒæŒ‡ä»¤ã€‚æŒ‡ä»¤æ‰§è¡Œçš„å‚æ•°ä¸ºè¯¥å‡½æ•°ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚child_process.spawn è¿”å› stdout å’Œ stderr æµå¯¹è±¡ã€‚ ç¨‹åºå¯ä»¥é€šè¿‡ stdout çš„ dataã€end æˆ–è€…å…¶ä»–äº‹ä»¶æ¥è·å–å­è¿›ç¨‹è¿”å›çš„æ•°æ®ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">const</span> &#123; spawn &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;child_process&#x27;</span>);<br><span class="hljs-keyword">const</span> ls = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">&#x27;ls&#x27;</span>, [<span class="hljs-string">&#x27;-lh&#x27;</span>, <span class="hljs-string">&#x27;/usr&#x27;</span>]);<br><br>ls.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`stdout: <span class="hljs-subst">$&#123;data&#125;</span>`</span>);<br>&#125;);<br><br>ls.<span class="hljs-property">stderr</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`stderr: <span class="hljs-subst">$&#123;data&#125;</span>`</span>);<br>&#125;);<br><br>ls.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;close&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`child process exited with code <span class="hljs-subst">$&#123;code&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h5 id="child-process-exec-command-options-callback"><a href="#child-process-exec-command-options-callback" class="headerlink" title="child_process.exec(command[, options][, callback])"></a>child_process.exec(command[, options][, callback])</h5><p>åˆ›å»ºä¸€ä¸ª shell æ‰§è¡ŒæŒ‡ä»¤ã€‚å­˜åœ¨æ•°æ®å¤§å°é™åˆ¶ã€‚ å½“å­è¿›ç¨‹è¿”å›çš„æ•°æ®è¶…è¿‡é»˜è®¤å¤§å°æ—¶ï¼Œç¨‹åºå°±ä¼šäº§ç”Ÿâ€Error: maxBuffer exceededâ€å¼‚å¸¸ã€‚</p><h5 id="child-process-execFile-file-args-options-callback"><a href="#child-process-execFile-file-args-options-callback" class="headerlink" title="child_process.execFile(file[, args][, options][, callback])"></a>child_process.execFile(file[, args][, options][, callback])</h5><p>åŒ exec ç±»ä¼¼ï¼Œä½†ä½¿ç”¨çš„æ˜¯åˆ¶å®šçš„æ–‡ä»¶åˆ›å»ºè¿›ç¨‹æ‰§è¡Œã€‚éœ€è¦å•ç‹¬å†™.sh æ–‡ä»¶ï¼Œå¯ç¼–å†™å¤æ‚é€»è¾‘ï¼Œä½†åœ¨ windows ä¸Šä½¿ç”¨æ—¶ä¼šæœ‰å…¼å®¹é—®é¢˜</p><h3 id="shelljs"><a href="#shelljs" class="headerlink" title="shelljs"></a>shelljs</h3><p>åŸºäº nodeAPI çš„ä¸€ä¸ªæ‰©å±•ï¼Œè¦å¼•å…¥æ’ä»¶ã€‚ç›¸æ¯”åŸç”Ÿçš„ child_process çš„å…¼å®¹æ€§æ›´å¥½ï¼Œä½¿ç”¨æ›´çµæ´»ã€‚<br><strong>å®‰è£…æŒ‡ä»¤</strong></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">npm <span class="hljs-keyword">install </span>--save-dev <span class="hljs-keyword">shelljs</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">or</span><br><span class="hljs-keyword"></span>yarn <span class="hljs-keyword">add </span><span class="hljs-keyword">shelljs </span>-D<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ–¹æ³•</strong></p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-comment">// å±€éƒ¨æ¨¡å¼</span><br><span class="hljs-variable">var</span> <span class="hljs-variable">shell</span> = <span class="hljs-function"><span class="hljs-title">require</span>(<span class="hljs-string">&#x27;shelljs&#x27;</span>);</span><br><span class="hljs-function"><span class="hljs-variable">shell.exec</span>(<span class="hljs-string">&#x27;git add .&#x27;</span>);</span><br><span class="hljs-function"><span class="hljs-variable">shell.exec</span>(<span class="hljs-string">&quot;git commit -m &#x27;auto-commit&#x27;&quot;</span>)</span><br><span class="hljs-variable">shell.exec</span>(<span class="hljs-string">&#x27;git push&#x27;</span>)<br><br><span class="hljs-comment">// å…¨å±€æ¨¡å¼ä¸‹ï¼Œå°±ä¸éœ€è¦ç”¨shellå¼€å¤´äº†ã€‚</span><br><span class="hljs-function"><span class="hljs-title">require</span>(<span class="hljs-string">&#x27;shelljs/global&#x27;</span>);</span><br><span class="hljs-function"><span class="hljs-title">exec</span>(<span class="hljs-string">&#x27;git add .&#x27;</span>);</span><br><span class="hljs-function"><span class="hljs-title">exec</span>(<span class="hljs-string">&quot;git commit -m &#x27;auto-commit&#x27;&quot;</span>)</span><br><span class="hljs-function"><span class="hljs-title">exec</span>(<span class="hljs-string">&#x27;git push&#x27;</span>)</span><br></code></pre></td></tr></table></figure><h2 id="shell-å¸¸ç”¨æŒ‡ä»¤"><a href="#shell-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="shell å¸¸ç”¨æŒ‡ä»¤"></a>shell å¸¸ç”¨æŒ‡ä»¤</h2><h3 id="pwd-æ˜¾ç¤ºå½“å‰ç›®å½•åç§°"><a href="#pwd-æ˜¾ç¤ºå½“å‰ç›®å½•åç§°" class="headerlink" title="pwd - æ˜¾ç¤ºå½“å‰ç›®å½•åç§°"></a>pwd - æ˜¾ç¤ºå½“å‰ç›®å½•åç§°</h3><h3 id="ls-æ˜¾ç¤ºç›®å½•ä¿¡æ¯"><a href="#ls-æ˜¾ç¤ºç›®å½•ä¿¡æ¯" class="headerlink" title="ls - æ˜¾ç¤ºç›®å½•ä¿¡æ¯"></a>ls - æ˜¾ç¤ºç›®å½•ä¿¡æ¯</h3><p><strong>ä½¿ç”¨å‚æ•°</strong></p><p>-a :æ˜¾ç¤ºåŒ…æ‹¬éšè—æ–‡ä»¶å’Œç›®å½•åœ¨å†…çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶</p><p>-l :æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</p><p>-h :é…åˆ-l ä»¥äººæ€§åŒ–çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°</p><p>-t :æŒ‰æ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´æ’åºæ–‡ä»¶</p><h3 id="cd-ç›®å½•åˆ‡æ¢"><a href="#cd-ç›®å½•åˆ‡æ¢" class="headerlink" title="cd - ç›®å½•åˆ‡æ¢"></a>cd - ç›®å½•åˆ‡æ¢</h3><p><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">//</span> è¿”å›æ ¹ç›®å½•<br><span class="hljs-keyword">cd</span><br><span class="hljs-string">//</span> è¿”å›ä¸Šä¸€çº§ç›®å½•<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br><span class="hljs-string">//</span> å‰å¾€å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æŸç›®å½•<br><span class="hljs-keyword">cd</span> &lt;directory&gt;<br></code></pre></td></tr></table></figure><h3 id="rm-åˆ é™¤æ–‡ä»¶"><a href="#rm-åˆ é™¤æ–‡ä»¶" class="headerlink" title="rm - åˆ é™¤æ–‡ä»¶"></a>rm - åˆ é™¤æ–‡ä»¶</h3><p><strong>ä½¿ç”¨å‚æ•°</strong></p><p>-f :å¼ºåˆ¶åˆ é™¤æ–‡ä»¶</p><p>-r :é€’å½’åˆ é™¤ç›®å½•åŠå†…å®¹</p><h3 id="cp-å¤åˆ¶æ–‡ä»¶"><a href="#cp-å¤åˆ¶æ–‡ä»¶" class="headerlink" title="cp - å¤åˆ¶æ–‡ä»¶"></a>cp - å¤åˆ¶æ–‡ä»¶</h3><p><strong>æŒ‡ä»¤æ ¼å¼</strong></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cp</span> [<span class="hljs-keyword">options</span>] <span class="hljs-symbol">&lt;source&gt;</span> <span class="hljs-symbol">&lt;dest&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å‚æ•°</strong><br>-a :å¤åˆ¶æ—¶ä¿ç•™é“¾æ¥ã€æ–‡ä»¶å±æ€§</p><p>-f :è¦†ç›–å·²ç»å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶è€Œä¸ç»™å‡ºæç¤º</p><p>-r :è‹¥ç»™å‡ºçš„æºæ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œæ­¤æ—¶å°†å¤åˆ¶è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶</p><h3 id="echo-æ˜¾ç¤ºæŒ‡å®šæ–‡æœ¬"><a href="#echo-æ˜¾ç¤ºæŒ‡å®šæ–‡æœ¬" class="headerlink" title="echo - æ˜¾ç¤ºæŒ‡å®šæ–‡æœ¬"></a>echo - æ˜¾ç¤ºæŒ‡å®šæ–‡æœ¬</h3><p><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ˜¾ç¤ºæ™®é€šå­—ç¬¦ä¸²</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello world&quot;</span><br><br><span class="hljs-comment"># æ˜¾ç¤ºè½¬ä¹‰å­—ç¬¦</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;\&quot;hello world\&quot;&quot;</span> <span class="hljs-comment"># æ­¤æ—¶ç»“æœæ˜¾ç¤ºä¸º&quot;hello world&quot;</span><br><br><span class="hljs-comment"># æ˜¾ç¤ºå˜é‡</span><br>content=<span class="hljs-string">&quot;hello world&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;He said <span class="hljs-variable">$&#123;content&#125;</span>&quot;</span><br><br><span class="hljs-comment"># æ˜¾ç¤ºæ¢è¡Œ</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;hello \n&quot;</span> <span class="hljs-comment"># -eå¼€å¯è½¬ä¹‰ï¼Œå³\nå¯ä»¥æ¢è¡Œ</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;world&quot;</span><br><br><span class="hljs-comment"># æ˜¾ç¤ºç»“æœå®šå‘è‡³æ–‡ä»¶</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello world &gt; test&quot;</span><br></code></pre></td></tr></table></figure><h3 id="chmod-æ§åˆ¶ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™"><a href="#chmod-æ§åˆ¶ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™" class="headerlink" title="chmod - æ§åˆ¶ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™"></a>chmod - æ§åˆ¶ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™</h3><p><strong>æŒ‡ä»¤æ ¼å¼</strong></p><ol><li>å‚æ•°æ³•</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">chmod <span class="hljs-selector-attr">[user]</span><span class="hljs-selector-attr">[operator]</span><span class="hljs-selector-attr">[permission]</span> &lt;filename&gt;<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å‚æ•°</strong><br><strong>user</strong>ï¼šé™å®šæƒé™è°ƒæ•´çš„ç”¨æˆ·èŒƒå›´</p><ul><li>uï¼šuser è¡¨ç¤ºè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…</li><li>gï¼šgroup è¡¨ç¤ºä¸è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…å±äºåŒä¸€ç»„( group )è€…ï¼Œå³ç”¨æˆ·ç»„</li><li>oï¼šother è¡¨ç¤ºå…¶å®ƒç”¨æˆ·ç»„</li><li>aï¼šall è¡¨ç¤ºè¿™ä¸‰è€…çš†æ˜¯</li></ul><p><strong>operator</strong>ï¼šæƒé™è°ƒæ•´å†…å®¹</p><ul><li>+ï¼šå¢åŠ æƒé™</li><li>-ï¼šæ’¤é”€æƒé™</li><li>&#x3D;ï¼šè®¾å®šæƒé™</li></ul><p><strong>permission</strong>ï¼šæƒé™å†…å®¹</p><ul><li>rï¼šreadï¼Œè¡¨ç¤ºå¯è¯»å–ï¼Œå¯¹äºä¸€ä¸ªç›®å½•ï¼Œå¦‚æœæ²¡æœ‰ r æƒé™ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ä¸èƒ½é€šè¿‡ ls æŸ¥çœ‹è¿™ä¸ªç›®å½•çš„å†…å®¹ã€‚</li><li>wï¼šwriteï¼Œè¡¨ç¤ºå¯å†™å…¥ï¼Œå¯¹äºä¸€ä¸ªç›®å½•ï¼Œå¦‚æœæ²¡æœ‰ w æƒé™ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ä¸èƒ½åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ–‡ä»¶ã€‚</li><li>xï¼šexcuteï¼Œè¡¨ç¤ºå¯æ‰§è¡Œï¼Œå¯¹äºä¸€ä¸ªç›®å½•ï¼Œå¦‚æœæ²¡æœ‰ x æƒé™ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ä¸èƒ½é€šè¿‡ cd è¿›å…¥è¿™ä¸ªç›®å½•ã€‚</li></ul><ol start="2"><li>æ•°å­—æ³•</li></ol><p>chmod å‘½ä»¤å¯ä»¥ä½¿ç”¨å…«è¿›åˆ¶æ•°æ¥æŒ‡å®šæƒé™ã€‚æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™ä½æ˜¯ç”± 9 ä¸ªæƒé™ä½æ¥æ§åˆ¶ï¼Œæ¯ä¸‰ä½ä¸ºä¸€ç»„ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯æ–‡ä»¶æ‰€æœ‰è€…ï¼ˆUserï¼‰çš„è¯»ã€å†™ã€æ‰§è¡Œï¼Œç”¨æˆ·ç»„ï¼ˆGroupï¼‰çš„è¯»ã€å†™ã€æ‰§è¡Œä»¥åŠå…¶å®ƒç”¨æˆ·ï¼ˆOtherï¼‰çš„è¯»ã€å†™ã€æ‰§è¡Œã€‚ä¸€ç»„æƒé™ä½ä¸­å·²è®¾ç½®æ—¶ç½®ä¸º 1ï¼Œä¸è®¾ç½®æ—¶ç½®ä¸º 0ã€‚<br>ä»¥æƒé™ rwx ä¸ºä¾‹ï¼Œå…¶å¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º 111ï¼Œå³ 4+2+1ï¼Œä¹Ÿå°±æ˜¯ 7.<br><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi"># è¡¨ç¤ºæ‰€æœ‰çš„ç”¨æˆ·éƒ½æœ‰è¯»å†™æ‰§è¡Œæ–‡ä»¶<span class="hljs-keyword">file</span>çš„æƒåˆ©ï¼Œç­‰åŒäºchmod a=wrx <span class="hljs-keyword">file</span><br>chmod <span class="hljs-number">777</span> <span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://nodejs.org/dist/latest-v12.x/docs/api/child_process.html">Nodejs æ–‡æ¡£</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/6921734567342637070">å¦‚ä½•åœ¨ nodejs æ‰§è¡Œ shell æŒ‡ä»¤</a><br>ï¼ˆ3ï¼‰<a href="https://juejin.cn/post/7161392772665540644">package.json é…ç½®å®Œå…¨è§£è¯»</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;node-js-ä½¿ç”¨-shell-æŒ‡ä»¤&quot;&gt;&lt;a href=&quot;#node-js-ä½¿ç”¨-shell-æŒ‡ä»¤&quot; class=&quot;headerlink&quot; title=&quot;node.js ä½¿ç”¨ shell æŒ‡ä»¤&quot;&gt;&lt;/a&gt;node.js ä½¿ç”¨ shell æŒ‡ä»¤&lt;/h2&gt;&lt;h3 i</summary>
      
    
    
    
    <category term="å·¥ä½œæŠ€å·§" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="Shell" scheme="https://unknown404.github.io/unkown404.github.io/tags/Shell/"/>
    
    <category term="node.js" scheme="https://unknown404.github.io/unkown404.github.io/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>hashè·¯ç”±ä½¿ç”¨é”šç‚¹è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/12/16/hashAnchor/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/12/16/hashAnchor/</id>
    <published>2022-12-16T02:57:34.000Z</published>
    <updated>2023-02-19T03:30:41.641Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>é¡µé¢çš„é”šç‚¹åŠŸèƒ½éœ€è¦ url çš„ hash å€¼ä¸é¡µé¢çš„ DOM id ç›¸ä¸€è‡´æ‰èƒ½è¿›è¡Œè·³è½¬ï¼›è€Œè·¯ç”±åœ¨ hash æ¨¡å¼ä¸‹å·²ç»å°†#å ç”¨, é¡µé¢çš„é”šç‚¹åŠŸèƒ½å¤±æ•ˆ</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><h3 id="åœºæ™¯-1-åŸç”Ÿé”šç‚¹"><a href="#åœºæ™¯-1-åŸç”Ÿé”šç‚¹" class="headerlink" title="åœºæ™¯ 1:åŸç”Ÿé”šç‚¹"></a>åœºæ™¯ 1:åŸç”Ÿé”šç‚¹</h3><p>éœ€è¦æ‰‹åŠ¨è·å–é”šç‚¹å…ƒç´ ï¼Œå†ä½¿ç”¨scrollIntoViewæ–¹æ³•</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs JSX"><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">CustomLink</span>=(<span class="hljs-params">props:&#123;id:string, children:any&#125;</span>)=&gt; &#123;<br>  <span class="hljs-keyword">const</span> &#123;id,children&#125;=props<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params">e:any</span>) =&gt; &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(id);<br>    <span class="hljs-comment">// scrollIntoView()å°†ç›®æ ‡å…ƒç´ ç§»åŠ¨åˆ°æµè§ˆå™¨é¡¶éƒ¨</span><br>    <span class="hljs-comment">// scrollIntoView(false)å°†ç›®æ ‡å…ƒç´ ç§»åŠ¨åˆ°æµè§ˆå™¨åº•éƒ¨</span><br>    element?.<span class="hljs-title function_">scrollIntoView</span>();<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClick&#125;</span>&gt;</span>&#123;children&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> &gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#x27;anchor&#x27;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">CustomLink</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;test1&#x27;</span>&gt;</span>test1<span class="hljs-tag">&lt;/<span class="hljs-name">CustomLink</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">CustomLink</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;test2&#x27;</span>&gt;</span>test2<span class="hljs-tag">&lt;/<span class="hljs-name">CustomLink</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">height:</span> &#x27;<span class="hljs-attr">600vh</span>&#x27;, <span class="hljs-attr">padding:</span> <span class="hljs-attr">8</span> &#125;&#125;&gt;</span>Scroll to bottom<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;test1&#x27;</span>&gt;</span>test1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Scroll to bottom<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">height:</span> &#x27;<span class="hljs-attr">600vh</span>&#x27;, <span class="hljs-attr">padding:</span> <span class="hljs-attr">8</span> &#125;&#125;&gt;</span>Scroll to bottom<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Scroll to bottom<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">height:</span> &#x27;<span class="hljs-attr">600vh</span>&#x27;, <span class="hljs-attr">padding:</span> <span class="hljs-attr">8</span> &#125;&#125; <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;test2&#x27;</span>&gt;</span>test2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Scroll to bottom<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="åœºæ™¯-2-antd-çš„-anchor-ç»„ä»¶"><a href="#åœºæ™¯-2-antd-çš„-anchor-ç»„ä»¶" class="headerlink" title="åœºæ™¯ 2:antd çš„ anchor ç»„ä»¶"></a>åœºæ™¯ 2:antd çš„ anchor ç»„ä»¶</h3><p>anchor ç»„ä»¶åœ¨ç‚¹å‡»é”šç‚¹åä¼šä¿®æ”¹ URLï¼Œè€Œå•é¡µåº”ç”¨ä¸­å¦‚æœä½¿ç”¨å“ˆå¸Œæ¨¡å¼çš„è·¯ç”±ï¼Œå½“ URL è¢«ä¿®æ”¹åï¼Œåˆ·æ–°é¡µé¢ä¼šå¯¼è‡´å½“å‰è·¯ç”±æ²¡æœ‰å®šä¹‰è€Œå‡ºç° 404 çš„æƒ…å†µã€‚<br>å¯¹äºè¿™ä¸€æƒ…å†µçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯åˆ©ç”¨ç»„ä»¶çš„ onClick äº‹ä»¶é˜»æ­¢é»˜è®¤çš„ url ä¿®æ”¹</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs JSX"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Anchor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; useHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;umi&#x27;</span>;<br><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">Link</span> &#125; = <span class="hljs-title class_">Anchor</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; &#123;<br>  <span class="hljs-keyword">const</span> history = <span class="hljs-title function_">useHistory</span>();<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Anchor</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;(event:</span> <span class="hljs-attr">Event</span>, <span class="hljs-attr">link:</span> &#123; <span class="hljs-attr">href:</span> <span class="hljs-attr">string</span>; <span class="hljs-attr">title</span>?<span class="hljs-attr">:</span> <span class="hljs-attr">string</span> &#125;) =&gt;</span> &#123;</span><br><span class="language-xml">        event.preventDefault();</span><br><span class="language-xml">        history.push(`$&#123;history.location.pathname&#125;$&#123;link.href&#125;`);</span><br><span class="language-xml">      &#125;&#125;</span><br><span class="language-xml">    &gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#ä½•æ—¶ä½¿ç”¨&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;ä½•æ—¶ä½¿ç”¨&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#ä»£ç æ¼”ç¤º&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;ä»£ç æ¼”ç¤º&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#api&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;API&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#anchor-props&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Anchor Props&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#link-props&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Link Props&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#faq&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;FAQ&quot;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Anchor</span>&gt;</span></span><br>  );<br>&#125;;<br><br></code></pre></td></tr></table></figure><p>ç»è¿‡å®é™…æµ‹è¯•å‘ç°ï¼Œè°ƒç”¨ event.preventDefault()ä¹‹åï¼Œåªä¼šé˜»æ­¢ URL è¢«ä¿®æ”¹ï¼Œå¹¶ä¸ä¼šé˜»æ­¢ç‚¹å‡»é”šç‚¹åçš„æ»šåŠ¨äº‹ä»¶ã€‚æ‰€ä»¥ä¸éœ€è¦åƒåŸç”Ÿåœºæ™¯ä¸€æ ·ä½¿ç”¨ scrollView å‡½æ•°ã€‚ä½†ä¸ºäº†urlå’Œé”šç‚¹ç›¸å¯¹åº”ï¼Œå¢åŠ äº†history.pushå‡½æ•°æ¥å®ç°ã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://blog.csdn.net/weixin_43487782/article/details/108873639">antdçš„anchorç»„ä»¶ç‚¹å‡»é”šç‚¹å¯¼è‡´è·¯ç”±å‘ç”Ÿå˜åŒ–</a><br>ï¼ˆ2ï¼‰<a href="https://blog.csdn.net/Whoopsina/article/details/123804087">é¡¹ç›®ä¸­ä½¿ç”¨äº†Hashè·¯ç”±æ—¶å¦‚ä½•åŒæ—¶ä½¿ç”¨é”šç‚¹ï¼Ÿ</a></p>]]></content>
    
    
    <summary type="html">è·¯ç”±åœ¨ hash æ¨¡å¼ä¸‹å·²ç»å°†#å ç”¨, é¡µé¢çš„é”šç‚¹åŠŸèƒ½å¤±æ•ˆ</summary>
    
    
    
    <category term="è¸©å‘ç»å†" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E8%B8%A9%E5%9D%91%E7%BB%8F%E5%8E%86/"/>
    
    
    <category term="å‰ç«¯è·¯ç”±" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1/"/>
    
  </entry>
  
  <entry>
    <title>ä»£ç æ ·å¼è°ƒæ•´</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/12/15/codeFormat/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/12/15/codeFormat/</id>
    <published>2022-12-15T14:25:36.000Z</published>
    <updated>2023-02-19T03:19:04.422Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†ä½¿ä»£ç é£æ ¼ç»Ÿä¸€ï¼Œæ›´æœ‰åˆ©äºé˜…è¯»ï¼Œå¯ä»¥å€ŸåŠ©ä¸€äº›å·¥å…·è¿›è¡Œä¼˜åŒ–ã€‚</p><span id="more"></span><h2 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h2><p>ä»£ç æ ¼å¼åŒ–å·¥å…·ã€‚</p><h3 id="å®‰è£…æŒ‡ä»¤"><a href="#å®‰è£…æŒ‡ä»¤" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">npm <span class="hljs-keyword">install </span>--save-dev prettier<br><span class="hljs-keyword">or</span><br><span class="hljs-keyword"></span>yarn <span class="hljs-keyword">add </span>prettier -D<br></code></pre></td></tr></table></figure><h3 id="é…ç½®æ–¹å¼"><a href="#é…ç½®æ–¹å¼" class="headerlink" title="é…ç½®æ–¹å¼"></a>é…ç½®æ–¹å¼</h3><p>åœ¨æ ¹ç›®å½•æ–°å»º .prettierrc.jsonï¼Œé…ç½®è‡ªå·±æ‰€éœ€è¦çš„å‚æ•°ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">&#123;<br>  <span class="hljs-string">&quot;singleQuote&quot;</span>: true,  <span class="hljs-regexp">//</span> ä½¿ç”¨å•å¼•å·<br>  <span class="hljs-string">&quot;semi&quot;</span>: false,  <span class="hljs-regexp">//</span> ä¸ä½¿ç”¨åˆ†å·<br>  <span class="hljs-string">&quot;bracketSpacing&quot;</span>: true,  <span class="hljs-regexp">//</span> åœ¨å¯¹è±¡,æ•°ç»„æ‹¬å·ä¸æ–‡å­—ä¹‹é—´åŠ ç©ºæ ¼<br>  <span class="hljs-string">&quot;htmlWhitespaceSensitivity&quot;</span>: <span class="hljs-string">&quot;ignore&quot;</span>,  <span class="hljs-regexp">//</span> å¯¹htmlçš„ç©ºæ ¼ä¸æ•æ„Ÿ<br>  <span class="hljs-string">&quot;endOfLine&quot;</span>: <span class="hljs-string">&quot;auto&quot;</span>,  <span class="hljs-regexp">//</span> è¡Œç»“å°¾ç»Ÿä¸€æ ·å¼ï¼Œä¿æŒç°æœ‰çš„è¡Œå°¾<br>  <span class="hljs-string">&quot;trailingComma&quot;</span>: <span class="hljs-string">&quot;none&quot;</span>, <span class="hljs-regexp">//</span> å¯¹è±¡ï¼Œæ•°ç»„ç­‰æœ«å°¾ä¸åŠ é€—å·<br>  <span class="hljs-string">&quot;tabWidth&quot;</span>: <span class="hljs-number">2</span> <span class="hljs-regexp">//</span>  æ°´å¹³ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸º<span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="lint-staged"><a href="#lint-staged" class="headerlink" title="lint-staged"></a>lint-staged</h2><p>æœ¬åœ°æš‚å­˜ä»£ç æ£€æŸ¥å·¥å…·ã€‚åªæ£€æµ‹ git add . ä¸­æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œå¯¹è¿‡æ»¤å‡ºçš„æ–‡ä»¶æ‰§è¡Œè„šæœ¬ã€‚</p><h3 id="å®‰è£…æŒ‡ä»¤-1"><a href="#å®‰è£…æŒ‡ä»¤-1" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">npm <span class="hljs-keyword">install </span>lint-staged --save-dev<br><span class="hljs-keyword">or</span><br><span class="hljs-keyword"></span>yarn <span class="hljs-keyword">add </span>lint-staged -D<br></code></pre></td></tr></table></figure><h3 id="é…ç½®æ–¹å¼-1"><a href="#é…ç½®æ–¹å¼-1" class="headerlink" title="é…ç½®æ–¹å¼"></a>é…ç½®æ–¹å¼</h3><p>lint-staged ä» v3.1 å¼€å§‹å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹å¼è¿›è¡Œé…ç½®ï¼š</p><ul><li>package.json<br>ç¤ºä¾‹ï¼š</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-string">&quot;lint-staged&quot;</span>: &#123;<br>    <span class="hljs-regexp">//</span> åŒ¹é…æš‚å­˜åŒºæ‰€æœ‰çš„jsï¼Œvueæ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œå‘½ä»¤<br>  <span class="hljs-string">&quot;*.&#123;js,vue,jsx,tsx&#125;&quot;</span>: [<br>    <span class="hljs-string">&quot;prettier --write&quot;</span>,<br>    <span class="hljs-string">&quot;eslint --cache --fix&quot;</span><br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®å¯¹è±¡çš„ key å€¼ä¸ºåŒ¹é…çš„æ–‡ä»¶ï¼Œå³ä¾§ value å¯¹åº”æ‰§è¡ŒæŒ‡ä»¤ã€‚lint-staged æŒ‡ä»¤è‡ªåŠ¨åœ¨æœ€ååŒ…å«äº† git add çš„æ“ä½œï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨ä¸“é—¨å»å†™</p><ul><li>.lintstagedrc JSON æˆ– YML æ ¼å¼çš„æ–‡ä»¶</li><li>lint-staged.config.js æ ¼å¼çš„æ–‡ä»¶</li></ul><h2 id="husky"><a href="#husky" class="headerlink" title="husky"></a>husky</h2><p>Git hooks å·¥å…·ï¼Œå¯¹ git æ‰§è¡Œçš„ä¸€äº›å‘½ä»¤ï¼Œé€šè¿‡å¯¹åº”çš„ hooks é’©å­è§¦å‘ï¼Œæ‰§è¡Œè‡ªå®šä¹‰çš„è„šæœ¬ç¨‹åºã€‚<br>å¸¸ç”¨çš„ gitHooks åŒ…æ‹¬ï¼š</p><ul><li>pre-commitï¼šæ¯æ¬¡ commit ä¹‹å‰ä¼šæ‰§è¡Œçš„æ“ä½œï¼Œå¸¸ç”¨äºè§¦å‘æ—¶è¿›è¡Œä»£ç æ ¼å¼éªŒè¯</li><li>commit-msgï¼šå¯åŠ¨æäº¤ä¿¡æ¯ç¼–è¾‘å™¨ï¼Œå¸¸ç”¨äºå¯¹ commit æ¶ˆæ¯å’Œç”¨æˆ·è¿›è¡Œæ ¡éªŒ</li><li>pre-pushï¼šè¿œç¨‹æ¨ä»£ç å‰æ‰§è¡Œï¼Œå¸¸ç”¨äºæ¨ä»£ç å‰åšå•å…ƒæµ‹è¯•å’Œ e2e</li></ul><h3 id="å®‰è£…æŒ‡ä»¤-2"><a href="#å®‰è£…æŒ‡ä»¤-2" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">npm</span> install husky@<span class="hljs-number">4</span>.<span class="hljs-number">3</span> --save-dev<br><span class="hljs-attribute">or</span><br><span class="hljs-attribute">yarn</span> add husky@<span class="hljs-number">4</span>.<span class="hljs-number">3</span> -D<br></code></pre></td></tr></table></figure><h3 id="é…ç½®æ–¹å¼-2"><a href="#é…ç½®æ–¹å¼-2" class="headerlink" title="é…ç½®æ–¹å¼"></a>é…ç½®æ–¹å¼</h3><p>husky ç‰ˆæœ¬åœ¨ 6 ä»¥ä¸‹æ—¶å¯ä»¥ç›´æ¥åœ¨ package.json é…ç½®ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;husky&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;hooks&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;pre-commit&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lint-staged&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>6 ç‰ˆæœ¬ä»¥ä¸Šçš„ husky æŠŠçš„é…ç½®æå–åˆ°äº†æ ¹ç›®å½•ï¼Œpackage.json ä¸­çš„é…ç½®åœ¨ husky å‡çº§åæ— æ•ˆäº†ã€‚éœ€è¦æ‰§è¡ŒæŒ‡ä»¤ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">npx husky <span class="hljs-keyword">add</span><span class="language-bash"> .husky/pre-commit <span class="hljs-string">&quot;npx lint-staged&quot;</span></span><br></code></pre></td></tr></table></figure><p>æŒ‡ä»¤æ‰§è¡Œåä¼šåœ¨æ ¹ç›®å½•åˆ›å»º .husky æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å†…éƒ¨æœ‰ä¸€ä¸ª pre-commit æ–‡ä»¶ï¼ŒåŒ…å«æŒ‡ä»¤ npx lint-staged</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://www.npmjs.com/package/lint-staged#Configuration">lint-staged å®˜æ–¹æ–‡æ¡£</a><br>ï¼ˆ2ï¼‰<a href="https://www.prettier.cn/docs/index.html">prettier å®˜æ–¹æ–‡æ¡£</a><br>ï¼ˆ3ï¼‰<a href="https://juejin.cn/post/6947200436101185566">GitHook å·¥å…· â€”â€” huskyï¼ˆæ ¼å¼åŒ–ä»£ç ï¼‰</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸ºäº†ä½¿ä»£ç é£æ ¼ç»Ÿä¸€ï¼Œæ›´æœ‰åˆ©äºé˜…è¯»ï¼Œå¯ä»¥å€ŸåŠ©ä¸€äº›å·¥å…·è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥ä½œæŠ€å·§" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="ä»£ç è§„èŒƒ" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>package.jsonåˆ†æ</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/12/15/packageJson/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/12/15/packageJson/</id>
    <published>2022-12-15T02:41:29.000Z</published>
    <updated>2023-02-19T03:19:04.429Z</updated>
    
    <content type="html"><![CDATA[<p>è™½ç„¶ç®¡ç†ç»´æŠ¤å‰ç«¯é¡¹ç›®æ—¶ç»å¸¸éœ€è¦è·Ÿè¯¥æ–‡ä»¶æ‰“äº¤é“ï¼Œä½†åœ¨å®‰è£…ä»£ç è§„èŒƒç›¸å…³å·¥å…·æ—¶ï¼Œå‘ç°è‡ªå·±å¯¹å…¶ä¸­çš„é…ç½®å¹¶ä¸ååˆ†äº†è§£ï¼Œæ‰€ä»¥æƒ³è®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h2 id="æ–‡ä»¶é…ç½®"><a href="#æ–‡ä»¶é…ç½®" class="headerlink" title="æ–‡ä»¶é…ç½®"></a>æ–‡ä»¶é…ç½®</h2><p>æè¿°é…ç½®åœ¨è¿™é‡Œç•¥è¿‡ä¸è®¡ï¼Œé™¤éè‡ªå·±è¦å†™åŒ…ï¼Œä¸ç„¶æ„Ÿè§‰è®°å¿†æ²¡ä»€ä¹ˆç”¨</p><h3 id="workspaces"><a href="#workspaces" class="headerlink" title="workspaces"></a>workspaces</h3><p>workspaces ä¸»è¦ç”¨äº monorepo ä»“åº“ç®¡ç†æ¨¡å¼ã€è§£å†³å¦‚ä½•åœ¨ä¸€ä¸ªé¡¶å±‚ root package ä¸‹ç®¡ç†å¤šä¸ªå­ packages çš„é—®é¢˜ï¼Œåœ¨ workspaces å£°æ˜ç›®å½•ä¸‹çš„ package ä¼šè½¯é“¾åˆ°æœ€ä¸Šå±‚ root package çš„ node_modules ä¸­ï¼Œä¸ç”¨æ‰‹åŠ¨æ‰§è¡Œ npm link æ“ä½œã€‚</p><p>é€šå¸¸å­é¡¹ç›®éƒ½ä¼šå¹³é“ºç®¡ç†åœ¨ packages ç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ ¹ç›®å½•ä¸‹ workspaces é€šå¸¸é…ç½®ä¸ºï¼š</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-string">&quot;workspaces&quot;</span>: [<br>  <span class="hljs-string">&quot;packages/*&quot;</span><br>]<br></code></pre></td></tr></table></figure><h2 id="è„šæœ¬é…ç½®"><a href="#è„šæœ¬é…ç½®" class="headerlink" title="è„šæœ¬é…ç½®"></a>è„šæœ¬é…ç½®</h2><h3 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h3><p>æŒ‡å®šé¡¹ç›®çš„ä¸€äº›å†…ç½®è„šæœ¬å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å¯ä»¥é€šè¿‡ npm run æ¥æ‰§è¡Œã€‚npm run çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª shell è„šæœ¬ï¼Œå°†æœ¬åœ°ç›®å½•çš„ node_modules&#x2F;.bin å­ç›®å½•åŠ å…¥ PATH å˜é‡ã€‚è¿™æ„å‘³ç€ï¼Œå½“å‰ç›®å½•çš„ node_modules&#x2F;.bin å­ç›®å½•é‡Œé¢çš„æ‰€æœ‰è„šæœ¬ï¼Œéƒ½å¯ä»¥ç›´æ¥ç”¨è„šæœ¬åè°ƒç”¨ï¼Œè€Œä¸å¿…åŠ ä¸Šè·¯å¾„ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>  <span class="hljs-string">&quot;build&quot;</span>: <span class="hljs-string">&quot;webpack&quot;</span>,<br>  <span class="hljs-string">&quot;prebuild&quot;</span>: <span class="hljs-string">&quot;xxx&quot;</span>, <span class="hljs-regexp">//</span> build æ‰§è¡Œä¹‹å‰çš„é’©å­<br>  <span class="hljs-string">&quot;postbuild&quot;</span>: <span class="hljs-string">&quot;xxx&quot;</span> <span class="hljs-regexp">//</span> build æ‰§è¡Œä¹‹åçš„é’©å­<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœå­˜åœ¨å‰ç¼€æŒ‡ä»¤<code>pre-*</code>ã€<code>post-*</code>çš„è¯ï¼Œæ‰§è¡ŒæŒ‡ä»¤ npm run build æ—¶ä¼šæŒ‰ç…§<code>prebuild - build - postbuild</code>æ‰§è¡Œé¡ºåºæ‰§è¡Œï¼Œè¿™ç§è¯­æ³•ç°åœ¨å¹¶ä¸æ¨å´‡ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</p><h3 id="config"><a href="#config" class="headerlink" title="config"></a>config</h3><p>ç”¨äºè®¾ç½® scripts é‡Œçš„è„šæœ¬åœ¨è¿è¡Œæ—¶çš„å‚æ•°ã€‚</p><h2 id="ä¾èµ–é…ç½®"><a href="#ä¾èµ–é…ç½®" class="headerlink" title="ä¾èµ–é…ç½®"></a>ä¾èµ–é…ç½®</h2><h3 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h3><p>è¿è¡Œä¾èµ–ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®ç”Ÿäº§ç¯å¢ƒä¸‹éœ€è¦ç”¨åˆ°çš„ä¾èµ–ã€‚æ¯”å¦‚ reactï¼Œvueï¼ŒçŠ¶æ€ç®¡ç†åº“ä»¥åŠç»„ä»¶åº“ç­‰ã€‚</p><p>ä½¿ç”¨ npm install xxx æˆ–åˆ™ npm install xxx â€“save æ—¶ï¼Œä¼šè¢«è‡ªåŠ¨æ’å…¥åˆ°è¯¥å­—æ®µä¸­ã€‚</p><h3 id="devDependencies"><a href="#devDependencies" class="headerlink" title="devDependencies"></a>devDependencies</h3><p>å¼€å‘ä¾èµ–ï¼Œé¡¹ç›®å¼€å‘ç¯å¢ƒéœ€è¦ç”¨åˆ°è€Œè¿è¡Œæ—¶ä¸éœ€è¦çš„ä¾èµ–ï¼Œç”¨äºè¾…åŠ©å¼€å‘ï¼Œé€šå¸¸åŒ…æ‹¬é¡¹ç›®å·¥ç¨‹åŒ–å·¥å…·æ¯”å¦‚ webpackï¼Œviteï¼Œeslint ç­‰ã€‚<br>ä½¿ç”¨ npm install xxx -D æˆ–è€… npm install xxx â€“save-dev æ—¶ï¼Œä¼šè¢«è‡ªåŠ¨æ’å…¥åˆ°è¯¥å­—æ®µä¸­ã€‚</p><h2 id="ä¸‰æ–¹é…ç½®"><a href="#ä¸‰æ–¹é…ç½®" class="headerlink" title="ä¸‰æ–¹é…ç½®"></a>ä¸‰æ–¹é…ç½®</h2><p>package.json ä¸­ä¹Ÿå­˜åœ¨å¾ˆå¤šä¸‰æ–¹å±æ€§ï¼Œæ¯”å¦‚ tsc ä¸­ä½¿ç”¨çš„ typesã€æ„å»ºå·¥å…·ä¸­ä½¿ç”¨çš„ sideEffects,git ä¸­ä½¿ç”¨çš„ huskyï¼Œeslint ä½¿ç”¨çš„ eslintIgnoreã€‚è¿™é‡Œåªåˆ—ä¸¾éƒ¨åˆ†å±æ€§ã€‚</p><h3 id="lint-staged"><a href="#lint-staged" class="headerlink" title="lint-staged"></a>lint-staged</h3><p>lint-staged æ˜¯ä¸€ä¸ªåœ¨ Git æš‚å­˜æ–‡ä»¶ä¸Šè¿è¡Œ linters çš„å·¥å…·ï¼Œé…ç½®åæ¯æ¬¡ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å³å¯ç»™æ‰€æœ‰æ–‡ä»¶æ‰§è¡Œä¸€æ¬¡ lint æ£€æŸ¥ï¼Œé€šå¸¸é…åˆ gitHooks ä¸€èµ·ä½¿ç”¨ã€‚</p><h3 id="browserslist"><a href="#browserslist" class="headerlink" title="browserslist"></a>browserslist</h3><p>browserslist å­—æ®µç”¨æ¥å‘ŠçŸ¥æ”¯æŒå“ªäº›æµè§ˆå™¨åŠç‰ˆæœ¬ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ .browserslistrc å•æ–‡ä»¶é…ç½®ã€‚</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-string">&quot;browserslist&quot;</span>: [<br>  <span class="hljs-string">&quot;&gt; 1%&quot;</span>,<br>  <span class="hljs-string">&quot;last 2 versions&quot;</span><br>]<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://juejin.cn/post/7099041402771734559">æ·±å…¥æµ…å‡º package.json</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/7023539063424548872">å…³äºå‰ç«¯å¤§ç®¡å®¶ package.jsonï¼Œä½ çŸ¥é“å¤šå°‘ï¼Ÿ</a><br>ï¼ˆ3ï¼‰<a href="https://juejin.cn/post/7161392772665540644">package.json é…ç½®å®Œå…¨è§£è¯»</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è™½ç„¶ç®¡ç†ç»´æŠ¤å‰ç«¯é¡¹ç›®æ—¶ç»å¸¸éœ€è¦è·Ÿè¯¥æ–‡ä»¶æ‰“äº¤é“ï¼Œä½†åœ¨å®‰è£…ä»£ç è§„èŒƒç›¸å…³å·¥å…·æ—¶ï¼Œå‘ç°è‡ªå·±å¯¹å…¶ä¸­çš„é…ç½®å¹¶ä¸ååˆ†äº†è§£ï¼Œæ‰€ä»¥æƒ³è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æŠ€æœ¯å­¦ä¹ " scheme="https://unknown404.github.io/unkown404.github.io/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="å‰ç«¯ä¾èµ–åŒ…ç®¡ç†" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E5%89%8D%E7%AB%AF%E4%BE%9D%E8%B5%96%E5%8C%85%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>reactä¸­è·å–refç›¸å…³çš„å‡½æ•°æ€»ç»“</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/12/09/reactRef/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/12/09/reactRef/</id>
    <published>2022-12-09T06:15:58.000Z</published>
    <updated>2023-02-19T03:19:04.431Z</updated>
    
    <content type="html"><![CDATA[<p>è™½ç„¶ react ä¸­å¾ˆå°‘ä½¿ç”¨æ“ä½œ DOM çš„é€»è¾‘ï¼Œä½†ä¸ºäº†èƒ½å¤Ÿç†è§£å¼€æºä»£ç ï¼Œè¿˜æ˜¯æ•´ç†è®°å½•äº†å¸¸ç”¨çš„å‡ ä¸ªç›¸å…³å‡½æ•°ã€‚</p><span id="more"></span><h2 id="è·å–-react-å…ƒç´ "><a href="#è·å–-react-å…ƒç´ " class="headerlink" title="è·å– react å…ƒç´ "></a>è·å– react å…ƒç´ </h2><h3 id="createRef"><a href="#createRef" class="headerlink" title="createRef"></a>createRef</h3><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ol><li>å¸¸ç”¨äº class ç»„ä»¶ï¼ˆå‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥ç”¨ï¼‰</li><li>å¯è·å–åŸç”Ÿ DOM å’Œè‡ªå®šä¹‰ class ç»„ä»¶çš„å¼•ç”¨</li></ol><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">//çˆ¶ç»„ä»¶</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutoFocusTextInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;<br>  constructor(props) &#123;<br>    <span class="hljs-keyword">super</span>(props);<br>    <span class="hljs-keyword">this</span>.textInput = <span class="hljs-type">React</span>.createRef();<br>  &#125;<br><br>  componentDidMount() &#123;<br>    <span class="hljs-keyword">this</span>.textInput.current.focusTextInput();<br>  &#125;<br><br>  render() &#123;<br>    <span class="hljs-keyword">return</span> (<br>      &lt;<span class="hljs-type">CustomTextInput</span> ref=&#123;<span class="hljs-keyword">this</span>.textInput&#125; /&gt;<br>    );<br>  &#125;<br>&#125;<br><span class="hljs-comment">//å­ç»„ä»¶</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomTextInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;<br>  constructor(props) &#123;<br>    <span class="hljs-keyword">super</span>(props);<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨ textInput çš„ DOM å…ƒç´ </span><br>    <span class="hljs-keyword">this</span>.textInput = <span class="hljs-type">React</span>.createRef();<br>    <span class="hljs-keyword">this</span>.focusTextInput = <span class="hljs-keyword">this</span>.focusTextInput.bind(<span class="hljs-keyword">this</span>);<br>  &#125;<br><br>  focusTextInput() &#123;<br>    <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨åŸç”Ÿ API ä½¿ text è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹</span><br>    <span class="hljs-comment">// æ³¨æ„ï¼šæˆ‘ä»¬é€šè¿‡ &quot;current&quot; æ¥è®¿é—® DOM èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">this</span>.textInput.current.focus();<br>  &#125;<br><br>  render() &#123;<br>    <span class="hljs-comment">// å‘Šè¯‰ React æˆ‘ä»¬æƒ³æŠŠ &lt;input&gt; ref å…³è”åˆ°</span><br>    <span class="hljs-comment">// æ„é€ å™¨é‡Œåˆ›å»ºçš„ `textInput` ä¸Š</span><br>    <span class="hljs-keyword">return</span> (<br>      &lt;div&gt;<br>        &lt;input<br>          <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">&quot;text&quot;</span><br>          ref=&#123;<span class="hljs-keyword">this</span>.textInput&#125; /&gt;<br>        &lt;input<br>          <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">&quot;button&quot;</span><br>          value=<span class="hljs-string">&quot;Focus the text input&quot;</span><br>          onClick=&#123;<span class="hljs-keyword">this</span>.focusTextInput&#125;<br>        /&gt;<br>      &lt;/div&gt;<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>createRef æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¼•ç”¨</li></ol><h4 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const createRef = <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> &#123; current: <span class="hljs-literal">null</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><h4 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ol><li>åªèƒ½ç”¨äºå‡½æ•°ç»„ä»¶</li><li>useRef çš„å¼•ç”¨å­˜åœ¨äºç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ</li></ol><h4 id="å®ç°ä»£ç -1"><a href="#å®ç°ä»£ç -1" class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">let obj = &#123; current: <span class="hljs-literal">null</span> &#125;<br><br>const useRef = <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> obj<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>createRef ä¸ useRef åŒºåˆ«</strong><br>è™½ç„¶éƒ½æ˜¯ç”¨äºåˆ›å»º ref å±æ€§ã€è®¿é—® DOM å®ä¾‹å¯¹è±¡ï¼Œä½†ä¸¤è€…é€‚ç”¨çš„ç»„ä»¶è¯­æ³•ç•¥æœ‰å·®å¼‚ï¼šcreateRef æ›´é€‚ç”¨äº class ç»„ä»¶ï¼Œç”±äºå…¶å¹¶æ²¡æœ‰ Hooks çš„æ•ˆæœï¼Œå…¶å†…éƒ¨çš„å€¼ä¼šéšç€å‡½æ•°ç»„ä»¶é‡å¤æ‰§è¡Œè€Œä¸æ–­è¢«åˆå§‹åŒ–ï¼Œè€Œåœ¨ class ç»„ä»¶ä¸­ç”±äºåˆ†ç¦»äº†ç”Ÿå‘½å‘¨æœŸï¼Œä½¿åˆå§‹åŒ–æ—¶æœºä»…æ‰§è¡Œä¸€æ¬¡ã€‚</p></blockquote><p>ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; createRoot &#125; = <span class="hljs-title class_">ReactDOM</span>;<br><span class="hljs-keyword">const</span> &#123; useRef, useState, createRef &#125; = <span class="hljs-title class_">React</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>)=&gt;&#123;<br>   <span class="hljs-keyword">const</span> [renderIndex,setRenderIndex] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">const</span> refFromUseRef = <span class="hljs-title function_">useRef</span>();<br>   <span class="hljs-keyword">const</span> refFromCreateRef = <span class="hljs-title function_">createRef</span>();<br><br><br>    <span class="hljs-keyword">if</span> (!refFromUseRef.<span class="hljs-property">current</span>)&#123;<br>       refFromUseRef.<span class="hljs-property">current</span>=renderIndex<br>   &#125;<br>    <span class="hljs-keyword">if</span> (!refFromCreateRef.<span class="hljs-property">current</span>) &#123;<br>        refFromCreateRef.<span class="hljs-property">current</span> = renderIndex<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>index &#123;renderIndex&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>refFromUseRef &#123;refFromUseRef.current&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>refFromCreateRef &#123;refFromCreateRef.current&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123; setRenderIndex(p=&gt;p+1)&#125;&#125;&gt;a<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">ComponentDemo</span> = <span class="hljs-title class_">App</span>;<br><span class="hljs-title function_">createRoot</span>(mountNode).<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ComponentDemo</span> /&gt;</span></span>);<br><br></code></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šå‘ç°å³ä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“, ç”±äº refFromUseRef çš„å€¼ä¸€ç›´å­˜åœ¨(ç±»ä¼¼äº this ) , æ— æ³•é‡æ–°èµ‹å€¼ï¼›è€Œ refFromCreateRef ä¼šéšç»„ä»¶æ¸²æŸ“ä¸æ–­æ”¹å˜å¼•ç”¨å€¼ã€‚</p><h2 id="çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨çš„ä¸€ä¸ªå…ƒç´ "><a href="#çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨çš„ä¸€ä¸ªå…ƒç´ " class="headerlink" title="çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨çš„ä¸€ä¸ªå…ƒç´ "></a>çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨çš„ä¸€ä¸ªå…ƒç´ </h2><h3 id="forwardRef"><a href="#forwardRef" class="headerlink" title="forwardRef"></a>forwardRef</h3><p>è·å–å‡½æ•°å­ç»„ä»¶å†…éƒ¨å…ƒç´ çš„ ref å¾—ç”¨ forwardRefï¼Œå› ä¸º ref ä¸åƒ props ä½œä¸ºå‚æ•°å¯ä»¥ä¼ é€’ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// çˆ¶å…ƒç´ ã€‚å¯ä»¥ç›´æ¥è·å– DOM button çš„ refï¼š</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span>=(<span class="hljs-params"></span>)=&gt;&#123;<br>    <span class="hljs-keyword">const</span> ref = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>();<br>    <span class="hljs-keyword">return</span> (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FancyButton</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;ref&#125;</span>&gt;</span>Click me!<span class="hljs-tag">&lt;/<span class="hljs-name">FancyButton</span>&gt;</span></span>)<br>&#125;<br><br><span class="hljs-comment">//å­å…ƒç´ </span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">FancyButton</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;ref&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;FancyButton&quot;</span>&gt;</span></span><br><span class="language-xml">    &#123;props.children&#125;</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>));<br></code></pre></td></tr></table></figure><h2 id="çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨å¤šä¸ªå…ƒç´ -x2F-æ–¹æ³•"><a href="#çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨å¤šä¸ªå…ƒç´ -x2F-æ–¹æ³•" class="headerlink" title="çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨å¤šä¸ªå…ƒç´ &#x2F;æ–¹æ³•"></a>çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…éƒ¨å¤šä¸ªå…ƒç´ &#x2F;æ–¹æ³•</h2><h3 id="useImperativeHandle"><a href="#useImperativeHandle" class="headerlink" title="useImperativeHandle"></a>useImperativeHandle</h3><p>useImperativeHandle éœ€è¦å’Œ forwardRef ç»“åˆä½¿ç”¨ã€‚å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const FancyInput= React.forwardRef(props, ref) =&gt; &#123;<br>  const inputRef = useRef();<br>  useImperativeHandle(ref, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (&#123;<br>    focus: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>      inputRef.current.focus();<br>    &#125;<br>  &#125;));<br>  <span class="hljs-keyword">return</span> &lt;input ref=&#123;inputRef&#125; ... /&gt;;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ¬ä¾‹ä¸­æ¸²æŸ“<code> &lt;FancyInput ref=&#123;inputRef&#125; /&gt;</code> çš„çˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨ inputRef.current.focus()ã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://blog.csdn.net/frontend_frank/article/details/104243286">ä»€ä¹ˆæ˜¯ useRef , useRef ä¸ createRef åŒºåˆ«, ä»¥åŠåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ useRef</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/6844904079164964878">ç²¾è¯»ã€ŠuseRef ä¸ createRef çš„åŒºåˆ«ã€‹</a><br>ï¼ˆ3ï¼‰<a href="https://juejin.cn/post/7146095092674068487">ä¸€æ–‡å­¦ä¼š useImperativeHandle</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è™½ç„¶ react ä¸­å¾ˆå°‘ä½¿ç”¨æ“ä½œ DOM çš„é€»è¾‘ï¼Œä½†ä¸ºäº†èƒ½å¤Ÿç†è§£å¼€æºä»£ç ï¼Œè¿˜æ˜¯æ•´ç†è®°å½•äº†å¸¸ç”¨çš„å‡ ä¸ªç›¸å…³å‡½æ•°ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯æŠ€æœ¯ä½“ç³»" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB/"/>
    
    
    <category term="React" scheme="https://unknown404.github.io/unkown404.github.io/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>é¡µé¢ç½®ç°çš„å®ç°æ–¹å¼</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/12/02/cssUsage/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/12/02/cssUsage/</id>
    <published>2022-12-02T01:46:33.000Z</published>
    <updated>2022-12-13T08:57:22.748Z</updated>
    
    <content type="html"><![CDATA[<p>è®°ä¸€æ¬¡ css è¸©å‘ç»å†</p><span id="more"></span><h2 id="ä¸šåŠ¡éœ€æ±‚æè¿°"><a href="#ä¸šåŠ¡éœ€æ±‚æè¿°" class="headerlink" title="ä¸šåŠ¡éœ€æ±‚æè¿°"></a>ä¸šåŠ¡éœ€æ±‚æè¿°</h2><p>æ¶‰åŠä¸€äº›é‡è¦çš„æ‚¼å¿µæ´»åŠ¨æ—¶ï¼Œéœ€è¦å°†ç½‘ç«™ä¸»é¡µé¢ç½®ä¸ºç°è‰²ï¼ŒåŒæ—¶å¸Œæœ›ä¸è¦å½±å“å…¶ä»–åŠŸèƒ½é¡µé¢çš„é¢œè‰²</p><h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><p>å¯å°†é¡µé¢çš„ CSS æ ·å¼è®¾ç½®ä¸ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css">.<span class="hljs-selector-attr">[classname]</span>  &#123;<br>    -webkit-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -moz-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -ms-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -o-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    <span class="hljs-attribute">filter</span>: gray;<br>&#125;<br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯å¦‚æœé¡µé¢ç»„ä»¶æœ‰ fixed å®šä½ï¼Œä¸Šè¿° css å†™æ³•å¯èƒ½ä¼šå¯¼è‡´ç»„ä»¶ä½ç½®å‡ºç°é—®é¢˜ï¼Œæ ¹æ® MDN çš„æ–‡æ¡£ï¼Œå¯¹ position å®šä½æœ‰ä¸‹é¢ä¸€æ®µæè¿°ï¼š</p><blockquote><p><strong>fixed</strong><br>å…ƒç´ ä¼šè¢«ç§»å‡ºæ­£å¸¸æ–‡æ¡£æµï¼Œå¹¶ä¸ä¸ºå…ƒç´ é¢„ç•™ç©ºé—´ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡å®šå…ƒç´ ç›¸å¯¹äºå±å¹•è§†å£ï¼ˆviewportï¼‰çš„ä½ç½®æ¥æŒ‡å®šå…ƒç´ ä½ç½®ã€‚å…ƒç´ çš„ä½ç½®åœ¨å±å¹•æ»šåŠ¨æ—¶ä¸ä¼šæ”¹å˜ã€‚æ‰“å°æ—¶ï¼Œå…ƒç´ ä¼šå‡ºç°åœ¨çš„æ¯é¡µçš„å›ºå®šä½ç½®ã€‚fixed å±æ€§ä¼šåˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡ã€‚å½“å…ƒç´ ç¥–å…ˆçš„ transform, perspective æˆ– filter å±æ€§é none æ—¶ï¼Œå®¹å™¨ç”±è§†å£æ”¹ä¸ºè¯¥ç¥–å…ˆã€‚</p></blockquote><p><strong>è§£å†³æ–¹æ³•ï¼š</strong><br>å°† filter çš„æ ·å¼å†™åœ¨ html ä¸Šã€‚<br><strong>æ³¨æ„ç‚¹ï¼š</strong></p><ol><li>é SPA é¡¹ç›®å¤„ç†æ—¶ä¹¦å†™æ–¹å¼æœ€å¥½æ˜¯ï¼š</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">html</span>  &#123;<br>    -webkit-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -moz-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -ms-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    -o-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">100%</span>);<br>    <span class="hljs-attribute">filter</span>: gray;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºå°½ç®¡ html5.0 è§„èŒƒå…è®¸åœ¨<code>&lt;html&gt;</code>æ ‡ç­¾ä¸Šæ·»åŠ  class å±æ€§ï¼Œä½†æ²¡æœ‰ä¿è¯è¯¥ class å±æ€§ä¸€å®šèƒ½ç”Ÿæ•ˆã€‚</p><ol start="2"><li>å¤„ç† SPA é¡µé¢æ—¶å¦‚æœä¹¦å†™ä¸Šè¿°æ ·å¼ï¼Œä¼šå¯¼è‡´æ‰€æœ‰é¡µé¢æ ·å¼éƒ½ä¼šå˜ç°ã€‚æ¯”è¾ƒå¥½çš„å®ç°æ–¹å¼æ˜¯åˆ©ç”¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸º html èŠ‚ç‚¹æ‰‹åŠ¨æ·»åŠ æ ·å¼ã€‚å¹¶åœ¨é¡µé¢è·³è½¬æ—¶å»é™¤å˜ç°æ ·å¼ã€‚è¿™é‡Œä»¥ react ä¸ºä¾‹ï¼š</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">componentDidMount</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-built_in">if</span>(global.document)&#123;<br>      const html=document<span class="hljs-selector-class">.getElementsByTagName</span>(<span class="hljs-string">&#x27;html&#x27;</span>)<br>      <span class="hljs-built_in">if</span>(<span class="hljs-selector-tag">html</span><span class="hljs-selector-attr">[0]</span>)&#123;<br>        <span class="hljs-selector-tag">html</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-class">.style</span><span class="hljs-selector-attr">[<span class="hljs-string">&#x27;filter&#x27;</span> as any]</span>=<span class="hljs-string">&#x27;grayscale(100%)&#x27;</span><br>      &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-title">componentWillUnmount</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">if</span>(global.document)&#123;<br>        const html=document<span class="hljs-selector-class">.getElementsByTagName</span>(<span class="hljs-string">&#x27;html&#x27;</span>)<br>        <span class="hljs-built_in">if</span>(<span class="hljs-selector-tag">html</span><span class="hljs-selector-attr">[0]</span>)&#123;<br>            <span class="hljs-selector-tag">html</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-class">.style</span><span class="hljs-selector-attr">[<span class="hljs-string">&#x27;filter&#x27;</span>  as any]</span>=<span class="hljs-string">&#x27;none&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨ js æ·»åŠ æ ·å¼æ—¶ï¼Œå¦‚æœä»£ç ä½¿ç”¨äº† ts è¯­æ³•ï¼Œå¯èƒ½ä¼šæŠ¥é”™ï¼š<code>Element implicitly has an &#39;any&#39; type because index expression is not of type &#39;number&#39;</code>ï¼Œè¿™æ˜¯å› ä¸º CSSStyleDeclaration å®ƒçš„ index å€¼è®¾ç½®ä¸ºäº† number è€Œä¸æ˜¯ stringï¼Œè¿™ä¸ªæŠ¥é”™çš„æ ¹æœ¬åŸå› ï¼Œå…¼å®¹æµè§ˆå™¨çš„ css å±æ€§<code>-webkit-*</code>ã€<code>-o-*</code>ç­‰å·²ç»ä¸åœ¨ CSSStyleDeclaration å†…éƒ¨äº†ã€‚è€ƒè™‘åˆ°ç°åœ¨å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒ css3 äº†ï¼Œå…¼å®¹æ€§å†™æ³•å¯ä»¥é€‚æ—¶å»æ‰</li></ol><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/position">MDN position</a><br>ï¼ˆ2ï¼‰<a href="https://stackoverflow.com/questions/53526178/element-implicitly-has-an-any-type-because-index-expression-is-not-of-type-nu">Element implicitly has an â€˜anyâ€™ type because index expression is not of type â€˜numberâ€™ [7015]</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®°ä¸€æ¬¡ css è¸©å‘ç»å†&lt;/p&gt;</summary>
    
    
    
    <category term="è¸©å‘ç»å†" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E8%B8%A9%E5%9D%91%E7%BB%8F%E5%8E%86/"/>
    
    
    <category term="CSS" scheme="https://unknown404.github.io/unkown404.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>jså®ç°ä»utf-8åˆ°base64ç¼–ç </title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/11/29/encodeBase64/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/11/29/encodeBase64/</id>
    <published>2022-11-29T13:42:55.000Z</published>
    <updated>2022-12-13T08:57:22.748Z</updated>
    
    <content type="html"><![CDATA[<p>ç¼–ç çŸ¥è¯†å°è®°</p><span id="more"></span><h2 id="ç¼–ç ç›¸å…³æ¦‚å¿µçš„è¾¨æ"><a href="#ç¼–ç ç›¸å…³æ¦‚å¿µçš„è¾¨æ" class="headerlink" title="ç¼–ç ç›¸å…³æ¦‚å¿µçš„è¾¨æ"></a>ç¼–ç ç›¸å…³æ¦‚å¿µçš„è¾¨æ</h2><h3 id="ç¼–ç å†å²"><a href="#ç¼–ç å†å²" class="headerlink" title="ç¼–ç å†å²"></a>ç¼–ç å†å²</h3><p>è®¡ç®—æœºèµ·æºä¹‹åˆï¼Œç§‘å­¦å®¶å¯¹è‹±è¯­å­—ç¬¦ä¸äºŒè¿›åˆ¶ä½ä¹‹é—´çš„å…³ç³»åšäº†ç»Ÿä¸€è§„å®šï¼Œå®šä¹‰äº† 128 ä¸ªå­—ç¬¦çš„ç¼–ç è§„åˆ™ï¼Œç”¨ä¸ƒä½äºŒè¿›åˆ¶è¡¨ç¤ºã€‚è¿™å¥—ç¼–ç è§„åˆ™è¢«ç§°ä¸º ASCII ç¼–ç ã€‚éšç€è®¡ç®—æœºçš„æ™®åŠï¼Œåœ¨ä¸åŒçš„åœ°åŒºå’Œå›½å®¶ï¼Œå½“åœ°ç¨‹åºå‘˜ä¸ºäº†é€‚åº”æœ¬åœ°çš„è¯­è¨€ä½¿ç”¨åˆ›å»ºäº†æ–°çš„å­—ç¬¦ç¼–ç ã€‚ä½†ä¸åŒå›½å®¶é—´è¯»å–å†…å®¹æ—¶ç”±äºç¼–ç æ–¹å¼çš„å·®å¼‚ä¼šå¯¼è‡´å†…å®¹ä¹±ç ï¼Œå¯¹å›½é™…æ²Ÿé€šäº¤æµé€ æˆäº†éšœç¢ã€‚</p><p>è¿™æ—¶å€™ Unicode å°±å‡ºç°äº†ã€‚ Unicode æ˜¯å›½é™…æ ‡å‡†å­—ç¬¦é›†ï¼Œå®ƒå°†ä¸–ç•Œå„ç§è¯­è¨€çš„æ¯ä¸ªå­—ç¬¦å®šä¹‰ä¸€ä¸ªå”¯ä¸€çš„ç¼–ç ï¼Œä»¥æ»¡è¶³è·¨è¯­è¨€ã€è·¨å¹³å°çš„æ–‡æœ¬ä¿¡æ¯è½¬æ¢ã€‚Unicode å­—ç¬¦é›†çš„ç¼–ç èŒƒå›´æ˜¯ 0x0000 - 0x10FFFF , å¯ä»¥å®¹çº³ä¸€ç™¾å¤šä¸‡ä¸ªå­—ç¬¦ï¼Œ æ¯ä¸ªå­—ç¬¦éƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–ç ï¼Œä¹Ÿå³æ¯ä¸ªå­—ç¬¦éƒ½æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶æ•°å€¼å’Œå®ƒå¯¹åº”ã€‚</p><h3 id="Unicodeã€utf-8ã€utf-16-è¾¨æ"><a href="#Unicodeã€utf-8ã€utf-16-è¾¨æ" class="headerlink" title="Unicodeã€utf-8ã€utf-16 è¾¨æ"></a>Unicodeã€utf-8ã€utf-16 è¾¨æ</h3><p>Unicode åªæ˜¯å­—ç¬¦é›†ï¼Œå³å¾ˆå¤šä¸ªå­—ç¬¦çš„é›†åˆï¼›è€Œ UTF-8ã€UTF-16ã€UTF-32 æ‰æ˜¯çœŸæ­£çš„å­—ç¬¦ç¼–ç è§„åˆ™ï¼šutf-8 æ˜¯ç”¨ä¸€ä¸ªå­—èŠ‚æ¥ç¼–ç æ‰€æœ‰çš„å­—ç¬¦ï¼Œutf-16 æ˜¯ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥ç¼–ç æ‰€æœ‰çš„å­—ç¬¦ï¼Œutf-32 åˆ™é€‰æ‹©ç”¨ 4 ä¸ªå­—èŠ‚æ¥ç¼–ç ã€‚<br>å…¶ä¸­æœ€å¸¸è§çš„ç¼–ç è§„åˆ™æ˜¯ utf-8ï¼Œå› ä¸ºäº’è”ç½‘çš„å¤§éƒ¨åˆ†èµ„æºéƒ½æ˜¯è‹±æ–‡çš„ï¼Œä½¿ç”¨ utf-8 ä¿å­˜æ›´èŠ‚çœç©ºé—´ã€‚Unicode è½¬ utf-8 ä¸»è¦æ˜¯å˜é•¿ç¼–ç ï¼Œæœ‰å…·ä½“è¡¨æ ¼å±•ç¤ºä¸åŒ unicode çš„ç¼–ç è§„åˆ™ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h3 id="Base64-ç¼–ç "><a href="#Base64-ç¼–ç " class="headerlink" title="Base64 ç¼–ç "></a>Base64 ç¼–ç </h3><p>Base64 çš„ç¼–ç æ–¹æ³•è¦æ±‚æŠŠæ¯ä¸‰ä¸ª 8bit çš„å­—èŠ‚è½¬æ¢æˆå››ä¸ª 6bit çš„å­—èŠ‚ï¼Œç„¶åæŠŠ 6Bit å†æ·»ä¸¤ä½é«˜ä½ 0ï¼Œç»„æˆå››ä¸ª 8Bit çš„å­—èŠ‚ã€‚ç»è¿‡ base64 ç¼–ç åçš„å­—ç¬¦ä¸²ä¼šæ¯”åŸæ¥é•¿ 1&#x2F;3ã€‚</p><h2 id="å‰ç«¯é¡µé¢è¡¨å•æ•°æ®è½¬-base64"><a href="#å‰ç«¯é¡µé¢è¡¨å•æ•°æ®è½¬-base64" class="headerlink" title="å‰ç«¯é¡µé¢è¡¨å•æ•°æ®è½¬ base64"></a>å‰ç«¯é¡µé¢è¡¨å•æ•°æ®è½¬ base64</h2><p>éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯è™½ç„¶ html å’Œ js çš„ç¼–ç æ˜¯ utf-8ï¼Œä½† js ä»é¡µé¢å¾—åˆ°çš„ä¸­æ–‡æ˜¯ utf-16 ç¼–ç ï¼Œç›´æ¥è½¬ base64 æ˜¯ä¼šå‡ºé”™çš„ã€‚<br>MDN ä¸Šç»™å‡ºäº†æœ€ç®€å•çš„è§£å†³æ–¹æ³•ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> utf8<span class="hljs-constructor">_to_b64(<span class="hljs-params">str</span>)</span> &#123;<br>  return window.btoa(unescape(encode<span class="hljs-constructor">URIComponent(<span class="hljs-params">str</span>)</span>));<br>&#125;<br><br><span class="hljs-keyword">function</span> b64<span class="hljs-constructor">_to_utf8(<span class="hljs-params">str</span>)</span> &#123;<br>  return decode<span class="hljs-constructor">URIComponent(<span class="hljs-params">escape</span>(<span class="hljs-params">window</span>.<span class="hljs-params">atob</span>(<span class="hljs-params">str</span>)</span>));<br>&#125;<br><br><span class="hljs-comment">// Usage:</span><br>utf8<span class="hljs-constructor">_to_b64(<span class="hljs-string">&quot;âœ“ Ã  la mode&quot;</span>)</span>; <span class="hljs-comment">// &quot;4pyTIMOgIGxhIG1vZGU=&quot;</span><br>b64<span class="hljs-constructor">_to_utf8(<span class="hljs-string">&quot;4pyTIMOgIGxhIG1vZGU=&quot;</span>)</span>; <span class="hljs-comment">// &quot;âœ“ Ã  la mode&quot;</span><br></code></pre></td></tr></table></figure><p>é‡Œé¢æ¶‰åŠçš„æµç¨‹æ˜¯ï¼š</p><ol><li>å…ˆç”¨ encodeURIComponent æŠŠ js çš„å­—ç¬¦ä¸²è½¬æˆ UTF-8 çš„ç™¾åˆ†å·ç¼–ç å½¢å¼ã€‚è¯¥æ–¹æ³•ä¸ä¼šå¯¹ ASCII å­—æ¯å’Œæ•°å­—åŠéƒ¨åˆ† ASCII æ ‡ç‚¹ç¬¦å·è¿›è¡Œç¼–ç ï¼Œéè‹±æ–‡å­—ç¬¦ä¼šå…ˆè½¬ä¸º UTF8 çš„å­—èŠ‚ç ï¼Œç„¶åå‰é¢åŠ ä¸ª%è¿›è¡Œæ‹¼æ¥ï¼›</li><li>å†ç”¨ unescape æŠŠç™¾åˆ†å·ç¼–ç æŒ‰å­—èŠ‚è½¬åŒ–æˆå¯¹åº”çš„å«æœ‰ Latin-1 å­—ç¬¦é›†å­—ç¬¦çš„ js å­—ç¬¦ä¸² ï¼ˆå³ä½¿å®ƒæ˜¯ä¹±ç ï¼‰ï¼›</li><li>æœ€åç”¨ btoa æŠŠåªå«æœ‰ Latin-1 çš„ js å­—ç¬¦ä¸²è½¬æ¢æˆ Base64 ç¼–ç ï¼›æ ¹æ® MDN æ–‡æ¡£ï¼Œbtoa å¯ä»¥å°†äºŒè¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¸º base64 ç¼–ç çš„ ASCII å­—ç¬¦ä¸²ï¼Œåœ¨å®é™…æ“ä½œä¸­å‘ç°å¦‚æœç›´æ¥å¯¹ä¸­æ–‡ç¼–ç ä¼šæŠ›å‡ºé”™è¯¯ï¼šâ€˜The string to be encoded contains characters outside of the Latin1 range.â€™ï¼Œå¯ä»¥æ¨æ–­ btoa æ˜¯å¯ä»¥å¤„ç† Latin-1 å­—ç¬¦é›†å­—ç¬¦çš„ã€‚</li></ol><p>å…³äºè¿™ç§ç¼–ç æ–¹å¼ï¼Œç½‘ä¸Šä¹Ÿçœ‹åˆ°æœ‰å»æ‰ escape&#x2F;unescape çš„ç‰ˆæœ¬ï¼Œä¼¼ä¹åŒæ ·èƒ½å¾—åˆ°é¢„æœŸç»“æœã€‚ä½†æ˜¯è¿™å¾—åˆ°çš„ç¼–ç å¹¶é utf-8 è½¬ base64 çš„ç»“æœï¼Œåœ¨åªæœ‰ ASCII ç æ—¶ unescape ä½¿ç”¨ä¸å¦éƒ½èƒ½å¾—åˆ°ä¸€æ ·çš„ç­”æ¡ˆï¼Œç„¶è€Œå‡ºç°å¸¦ç™¾åˆ†å·ç¼–ç çš„å­—ç¬¦ä¸²æ—¶çœå» unescape ä¼šä½¿ç¼–ç ç»“æœçš„é•¿åº¦å¢åŠ äº†ï¼Œå› ä¸º btoa ç¼–ç äº†ç™¾åˆ†å·ï¼›ä¸”å¦‚æœæ˜¯å°†ç¼–ç ç»“æœä¼ ç»™å…¶ä»– API æ—¶ä¼šå¾ˆéš¾ç†è§£å…¶å†…å®¹</p><h2 id="å‰ç«¯-node-js-è½¬-base64"><a href="#å‰ç«¯-node-js-è½¬-base64" class="headerlink" title="å‰ç«¯ node.js è½¬ base64"></a>å‰ç«¯ node.js è½¬ base64</h2><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-comment">//utf-8 è½¬ base64</span><br>const txt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Buffer</span>(<span class="hljs-string">&#x27;æ–‡å­—&#x27;</span>).toString(<span class="hljs-string">&#x27;base64&#x27;</span>);<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(txt)<br><br><span class="hljs-comment">//base64 è½¬ utf-8</span><br>const ztxt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Buffer</span>(txt, <span class="hljs-string">&#x27;base64&#x27;</span>).toString(<span class="hljs-string">&#x27;utf8&#x27;</span>);<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(ztxt)<br></code></pre></td></tr></table></figure><p>å¤„ç†èµ·æ¥ç›¸å¯¹ç®€å•ï¼Œå¯ä»¥ç›´æ¥ç”¨ buffer æ¨¡å—çš„ api</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://zhuanlan.zhihu.com/p/427488961">Unicodeã€UTF-8ã€UTF-16 ç»ˆäºæ‡‚äº†</a><br>ï¼ˆ2ï¼‰<a href="https://developer.mozilla.org/en-US/docs/Glossary/Base64#Solution_2_%E2%80%93_escaping_the_string_before_encoding_it">Base64</a><br>ï¼ˆ3ï¼‰<a href="https://best33.com/311.moe">ä¸ºä»€ä¹ˆ escape å¯ä»¥ä½¿ btoa æ­£ç¡®å¤„ç† UTF-8 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Ÿ</a><br>ï¼ˆ4ï¼‰<a href="https://stackoverflow.com/questions/30631927/converting-to-base64-in-javascript-without-deprecated-escape-call">Converting to Base64 in JavaScript without Deprecated â€˜Escapeâ€™ call</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç¼–ç çŸ¥è¯†å°è®°&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥ä½œæŠ€å·§" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="WEB API" scheme="https://unknown404.github.io/unkown404.github.io/tags/WEB-API/"/>
    
  </entry>
  
  <entry>
    <title>ä¾èµ–å¤±è¸ªä¹‹è°œ â€”â€” è®°ä¸€æ¬¡å¤±è´¥çš„é—®é¢˜æŸ¥æ‰¾</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/11/29/nvmProblemSearch/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/11/29/nvmProblemSearch/</id>
    <published>2022-11-29T10:08:22.000Z</published>
    <updated>2023-02-19T03:19:04.428Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>å…¨å±€å®‰è£…çš„ä¾èµ–åŒ…çªç„¶æ‰¾ä¸åˆ°äº†ï¼Œè°ƒç”¨æŒ‡ä»¤è¿”å› <code>zsh: command not found:xxx</code> çš„æŠ¥é”™ã€‚</p><h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p>å¯¹äºä¸Šè¿°æŠ¥é”™é—®é¢˜ï¼Œç½‘ä¸Šçš„å›å¤åŸºæœ¬ç»Ÿä¸€æ˜¯ç¼ºå°‘ç¯å¢ƒå˜é‡é…ç½®ã€‚MAC ç”µè„‘çš„ç¯å¢ƒå˜é‡æ–‡ä»¶åŠ è½½é¡ºåºä¸ºï¼š</p><ul><li>&#x2F;etc&#x2F;profileï¼Œç³»ç»Ÿçº§æ–‡ä»¶ï¼Œç³»ç»Ÿå¯åŠ¨å³åŠ è½½</li><li>&#x2F;etc&#x2F;pathï¼Œç³»ç»Ÿçº§æ–‡ä»¶ï¼Œç³»ç»Ÿå¯åŠ¨å³åŠ è½½</li><li>&#x2F;.bash_profileï¼Œç”¨æˆ·çº§çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œå½“è¯¥æ–‡ä»¶å­˜åœ¨æ—¶å¿½ç•¥<del>&#x2F;.bash_login ã€</del>&#x2F;.profile ã€~&#x2F;.bashrc æ–‡ä»¶çš„é…ç½®</li></ul><p>è§£å†³ç¯å¢ƒå˜é‡é—®é¢˜æ­¥éª¤ï¼š</p><ol><li>æ‰“å¼€ zsh æ§åˆ¶å°ï¼Œè¾“å…¥æŒ‡ä»¤ï¼š<code>open .zshrc</code></li><li>æŸ¥çœ‹ç¯å¢ƒå˜é‡ PATHã€‚PATH çš„é€šå¸¸å†™æ³•ä¸º</li></ol><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">export <span class="hljs-built_in">PATH</span> = &lt;<span class="hljs-built_in">path</span> <span class="hljs-number">1</span>&gt; : &lt;<span class="hljs-built_in">path</span> <span class="hljs-number">2</span>&gt; ... : &lt;<span class="hljs-built_in">path</span> n&gt; : $<span class="hljs-built_in">PATH</span><br></code></pre></td></tr></table></figure><p>æ¶‰åŠå¤šä¸ªç¯å¢ƒå˜é‡æ—¶ç”¨åˆ†å·éš”å¼€ã€‚</p><p>å½“å‰ç”µè„‘é…ç½®çš„ zshrc å†…å®¹ä¸ºï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">NVM_DIR</span>=<span class="hljs-string">&quot;/Users/danhuipeng/.nvm&quot;</span><br>[ -s <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span>  # This loads nvm<br><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.yarn/bin:<span class="hljs-variable">$HOME</span>/.config/yarn/global/node_modules/.bin:<span class="hljs-variable">$PATH</span>&quot;</span><br><br>source ~/.bash_profile<br></code></pre></td></tr></table></figure><p>è™½ç„¶æœ‰ yarn çš„è·¯å¾„åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä½†å› ä¸ºå…¨å±€ä¾èµ–åŒ…æ²¡æœ‰ä½¿ç”¨ yarnï¼Œæ‰€ä»¥ç°åœ¨çš„è®¾ç½®å¹¶ä¸èƒ½è§£å†³é—®é¢˜ã€‚æ¨æµ‹å¯èƒ½æ˜¯å› ä¸ºå½“å‰çš„ path å†…å®¹å¹¶æ²¡æœ‰æŒ‡å‘å…¨å±€ npm çš„ä¾èµ–åŒ…ç›®å½•ä¸‹ ã€‚</p><ol start="3"><li>æ·»åŠ ç¯å¢ƒå˜é‡ã€‚ä½¿ç”¨æŒ‡ä»¤<code>npm config get prefix</code>è·å–å…¨å±€å®‰è£…åŒ…æ—¶ä½¿ç”¨çš„ nodeï¼Œä½¿ç”¨æŒ‡ä»¤<code>npm root -g</code>æ¥å¯»æ‰¾å…¨å±€ä»“åº“è·¯å¾„ã€‚å¾—åˆ°çš„ç»“æœåˆ†åˆ«ä¸ºï¼š</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">ï½<span class="hljs-regexp">/.nvm/</span>versions<span class="hljs-regexp">/node/</span>v15.<span class="hljs-number">14.0</span><br>ï½<span class="hljs-regexp">/.nvm/</span>versions<span class="hljs-regexp">/node/</span>v15.<span class="hljs-number">14.0</span><span class="hljs-regexp">/lib/</span>node_modules<br></code></pre></td></tr></table></figure><p>æ ¹ç›®å½•å·²çœç•¥ã€‚å°è¯•å°†è¿™ä¸¤ä¸ªå˜é‡æ·»åŠ åˆ° path åï¼Œæ‰§è¡ŒæŒ‡ä»¤å‘<code>source .zshrc</code>ç°å¹¶æ²¡æœ‰è§£å†³é—®é¢˜ã€‚ä¸ºäº†æ˜ç¡®ä¸ºä»€ä¹ˆæ‰¾ä¸åˆ°ä¾èµ–åŒ…æ‰§è¡Œäº†æŒ‡ä»¤<code>cd ~/.nvm/versions/node/v15.14.0/lib/node_modules</code>åˆ°å…¨å±€ä¾èµ–ç›®å½•ä¸‹ï¼Œå°è¯•æŸ¥çœ‹å†…å®¹åˆ—è¡¨ï¼Œç„¶è€Œæ‰§è¡ŒæŒ‡ä»¤<code>ls</code>åä»€ä¹ˆä¹Ÿæ²¡å‘ç”Ÿï¼Œå³è¯¥ç›®å½•ä¸‹çš„å†…å®¹å·²ç©ºï¼ï¼ä¸ºä»€ä¹ˆä¼šç©ºäº†å‘¢ï¼Ÿå®Œå…¨ä¸çŸ¥é“åŸå› ï¼Œå’Œå…¶ä»–ç‰ˆæœ¬çš„ä¾èµ–ç›®å½•æ¯”è¾ƒå‘ç°è¿ npm éƒ½æ²¡æœ‰äº†ï¼Ÿï¼Ÿ<br><img src="/unkown404.github.io/img/log.png"></p><p>é—®é¢˜æ’æŸ¥åˆ°è¿™é‡Œå·²ç»è¿›è¡Œä¸ä¸‹å»äº†ï¼Œåªèƒ½è¿›è¡Œä¾èµ–é‡è£…ã€‚</p><p>è€ƒè™‘åˆ°æœ¬äººä½¿ç”¨ node 15 çš„æ—¶å€™æ¯”è¾ƒå°‘ï¼Œå¤§å¤šæ•°é¡¹ç›®ä½¿ç”¨çš„éƒ½æ˜¯ 14ï¼Œæ‰€ä»¥é‡‡ç”¨æŒ‡ä»¤<code>nvm alias default v14</code>è°ƒæ•´ node çš„é»˜è®¤ç‰ˆæœ¬ã€‚å› ä¸º node 15 ç°åœ¨è¿ npm éƒ½æ²¡æœ‰äº†ï¼Œæ‰€ä»¥ä½¿ç”¨<code>nvm uninstall v15</code>æŒ‡ä»¤å¸è½½ node15ã€‚ä½¿ç”¨æŒ‡ä»¤<code>nvm ls</code>æ£€æŸ¥å‘ç°ç°åœ¨å·²ç»å¼€å§‹ä½¿ç”¨ node v14 äº†</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xl">       v10.<span class="hljs-number">24.1</span><br>       v12.<span class="hljs-number">16.3</span><br>       v12.<span class="hljs-number">22.1</span><br>-&gt;     v14.<span class="hljs-number">19.3</span><br><span class="hljs-function"><span class="hljs-title">default</span> -&gt;</span> <span class="hljs-function"><span class="hljs-title">v14</span> (-&gt;</span> v14.<span class="hljs-number">19.3</span>)<br><span class="hljs-function"><span class="hljs-title">iojs</span> -&gt;</span> N/A (default)<br><span class="hljs-function"><span class="hljs-title">unstable</span> -&gt;</span> N/A (default)<br><span class="hljs-function"><span class="hljs-title">node</span> -&gt;</span> <span class="hljs-function"><span class="hljs-title">stable</span> (-&gt;</span> v14.<span class="hljs-number">19.3</span>) (default)<br><span class="hljs-function"><span class="hljs-title">stable</span> -&gt;</span> <span class="hljs-number">14.19</span> (-&gt; v14.<span class="hljs-number">19.3</span>) (default)<br><span class="hljs-function"><span class="hljs-title">lts</span>/* -&gt;</span> <span class="hljs-function"><span class="hljs-title">lts</span>/hydrogen (-&gt;</span> N/A)<br><span class="hljs-function"><span class="hljs-title">lts</span>/argon -&gt;</span> <span class="hljs-function"><span class="hljs-title">v4</span>.9.1 (-&gt;</span> N/A)<br><span class="hljs-function"><span class="hljs-title">lts</span>/boron -&gt;</span> <span class="hljs-function"><span class="hljs-title">v6</span>.17.1 (-&gt;</span> N/A)<br><span class="hljs-function"><span class="hljs-title">lts</span>/carbon -&gt;</span> <span class="hljs-function"><span class="hljs-title">v8</span>.17.0 (-&gt;</span> N/A)<br><span class="hljs-function"><span class="hljs-title">lts</span>/dubnium -&gt;</span> v10.<span class="hljs-number">24.1</span><br><span class="hljs-function"><span class="hljs-title">lts</span>/erbium -&gt;</span> <span class="hljs-function"><span class="hljs-title">v12</span>.22.12 (-&gt;</span> N/A)<br><span class="hljs-function"><span class="hljs-title">lts</span>/fermium -&gt;</span> <span class="hljs-function"><span class="hljs-title">v14</span>.21.1 (-&gt;</span> N/A)<br><span class="hljs-function"><span class="hljs-title">lts</span>/gallium -&gt;</span> <span class="hljs-function"><span class="hljs-title">v16</span>.18.1 (-&gt;</span> N/A)<br><span class="hljs-function"><span class="hljs-title">lts</span>/hydrogen -&gt;</span> <span class="hljs-function"><span class="hljs-title">v18</span>.12.1 (-&gt;</span> N/A)<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>(1)<a href="https://wenku.baidu.com/view/2cb4a1ffae51f01dc281e53a580216fc700a53a9.html?_wkts_=1669702352151&bdQuery=zsh%E6%80%8E%E4%B9%88%E9%85%8D%E5%A4%9A%E4%B8%AA%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">Mac åœ¨ bash å’Œ zsh é…ç½®ç¯å¢ƒå˜é‡ path çš„å‡ ç§æ–¹æ³•</a><br>(2)<a href="https://blog.csdn.net/Wildpiglolo/article/details/123828019">npm å…¨å±€å®‰è£…åï¼Œå¯¹åº”çš„ç¯å¢ƒå˜é‡ç›®å½•ä¸‹æ‰¾ä¸åˆ°æ–‡ä»¶</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤§æ— è¯­äº‹ä»¶ã€‚ã€‚ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="è¸©å‘ç»å†" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E8%B8%A9%E5%9D%91%E7%BB%8F%E5%8E%86/"/>
    
    
    <category term="ä¾èµ–å®‰è£…" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>å°ç¨‹åºè¸©å‘ç»å†--canvaså±‚çº§è¿‡é«˜</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/09/30/appletCanvas/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/09/30/appletCanvas/</id>
    <published>2022-09-30T08:54:38.000Z</published>
    <updated>2022-11-29T13:41:02.783Z</updated>
    
    <content type="html"><![CDATA[<p>å°ç¨‹åºå¼€å‘å¼¹çª—åŠŸèƒ½æ—¶é‡åˆ°çš„é—®é¢˜ã€‚</p><span id="more"></span><h2 id="éœ€æ±‚è¯´æ˜"><a href="#éœ€æ±‚è¯´æ˜" class="headerlink" title="éœ€æ±‚è¯´æ˜"></a>éœ€æ±‚è¯´æ˜</h2><p>éœ€è¦åœ¨æŸä¸€è®¡ç®—ç»“æœé¡µè®¾ç½®æ”¶é›†ä¿¡æ¯å¼¹çª—ï¼Œç‚¹å‡»æŒ‰é’®æ—¶å¼¹çª—æ‚¬æµ®äºé¡µé¢æ­£ä¸­ï¼›è®¡ç®—ç»“æœé¡µåŒ…å«ç»˜åˆ¶çš„é¥¼å›¾</p><h2 id="å­˜åœ¨é—®é¢˜"><a href="#å­˜åœ¨é—®é¢˜" class="headerlink" title="å­˜åœ¨é—®é¢˜"></a>å­˜åœ¨é—®é¢˜</h2><p>canvas å±äºåŸç”Ÿç»„ä»¶ï¼Œæ‹¥æœ‰æœ€é«˜å±‚çº§ï¼Œé¡µé¢ä¸­å…¶ä»–ç»„ä»¶æ— è®ºè®¾ç½® z-index å¤šå°‘éƒ½æ— æ³•è¦†ç›–åœ¨ canvas ä¸Šï¼›ä¸” canvas æ ‡ç­¾ä¸èƒ½ä½¿ç”¨<code>visibility:hidden</code>æˆ– <code>opacity: 0;</code>å»éšè—ï¼Œæ”¾åœ¨çˆ¶å…ƒç´ è®¾ç½®åŒæ ·ä¸å¯è¡Œ</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>å¯¹äºåªéœ€è¦å±•ç¤ºæ–‡å­—æˆ–å›¾ç‰‡çš„ç®€å•å¼¹çª—ï¼Œå¯ä»¥ä½¿ç”¨ cover-view ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æœ‰å°ç¨‹åºæœ€é«˜å±‚çº§ã€‚<br>å¯¹äºåŠŸèƒ½ç›¸å¯¹å¤æ‚çš„å¼¹çª—ï¼Œåˆ™éœ€è¦å°† canvas è½¬ä¸ºå›¾ç‰‡ã€‚<br>å…·ä½“æ“ä½œå†…å®¹ï¼š</p><ol><li>æ¨¡ç‰ˆéƒ¨åˆ†ï¼š<br>æ–°å¢æ›¿ä»£ canvas çš„å›¾ç‰‡æ¨¡å—ï¼Œä¸ canvas åŒçº§ã€‚è¿™é‡Œä¸ºæ–¹ä¾¿æ–°å¢çš„æ¨¡å—å’Œ canvas åŒç±»åä»¥ä¾¿è·å–åŒæ ·çš„æ ·å¼å¤§å°è®¾ç½®ã€‚<br>æ–°å¢å˜é‡ imgHide å’Œ chartImgï¼Œåˆ†åˆ«ç”¨äºæ§åˆ¶ canvas åˆ°å›¾ç‰‡åˆ‡æ¢çš„è¿‡ç¨‹å’Œè·å–å¯¼å‡ºå›¾ç‰‡çš„ä¸´æ—¶è·¯å¾„ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Vue">&lt;template&gt;<br>    ...<br>    &lt;canvas<br>        :hidden=&quot;!imgHide&quot;<br>        class=&quot;chart-canvas&quot;<br>        canvas-id=&quot;ringCanvas&quot;<br>    &gt;&lt;/canvas&gt;<br>    &lt;view class=&quot;chart-canvas&quot; :hidden=&quot;imgHide&quot;&gt;<br>        &lt;img :src=&quot;chartImg&quot;/&gt;<br>    &lt;/view&gt;<br>    ...<br>    &lt;view @click=&quot;modalShow&quot;&gt;tap&lt;/view&gt;<br>    &lt;view class=&quot;modal&quot;&gt;<br>        ...<br>    &lt;/view&gt;<br>&lt;/template&gt;<br><br></code></pre></td></tr></table></figure><ol start="2"><li>JS é€»è¾‘éƒ¨åˆ†ï¼š<br>1ï¼‰åˆå§‹åŒ– imgHide å’Œ chartImgï¼Œåˆ†åˆ«è®¾ä¸º false å’Œâ€™â€™<br>2ï¼‰å¢åŠ æ–°æ–¹æ³• canvasToImgï¼Œå¤„ç† canvas å¯¼å‡ºå›¾ç‰‡çš„ä»»åŠ¡ã€‚è¿™é‡Œ destWidthã€destHeight éƒ½è®¾ç½®ä¸ºåŸå®½é«˜çš„ 2 å€æ˜¯å› ä¸º canvas æ˜¯ä½å›¾ï¼Œå°†å®ƒæ¸²æŸ“åˆ°é«˜æ¸…å±æ—¶,ä¼šè¢«æ”¾å¤§,æ¯ä¸ªåƒç´ ç‚¹ä¼šç”¨ devicePixelRatio çš„å¹³æ–¹ä¸ªç‰©ç†åƒç´ ç‚¹æ¥æ¸²æŸ“,å› æ­¤å›¾ç‰‡ä¼šå˜å¾—æ¨¡ç³Šã€‚ä½¿ç”¨ 2 å€å›¾å¯ä»¥è§£å†³é—®é¢˜ã€‚ç»˜åˆ¶æˆåŠŸæ—¶å°†æ–‡ä»¶è·¯å¾„èµ‹å€¼ç»™ chartImg</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-title function_">canvasToImg</span>(<span class="hljs-params">width, height</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        wx.<span class="hljs-title function_">canvasToTempFilePath</span>(&#123;<br>            <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,<br>            width,<br>            height,<br>            <span class="hljs-attr">destWidth</span>: width * <span class="hljs-number">2</span>,<br>            <span class="hljs-attr">destHeight</span>: height * <span class="hljs-number">2</span>,<br>            <span class="hljs-attr">canvasId</span>: <span class="hljs-string">&#x27;ringCanvas&#x27;</span>,<br>            <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>                <span class="hljs-keyword">const</span> filePath = res.<span class="hljs-property">tempFilePath</span><br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;tempFilePath&#x27;</span>, filePath)<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">chartImg</span> = filePath<br>            &#125;,<br>            <span class="hljs-attr">fail</span>: <span class="hljs-function"><span class="hljs-params">rej</span> =&gt;</span> &#123;<br>                <span class="hljs-keyword">throw</span> rej<br>            &#125;<br>        &#125;)<br>    &#125;, <span class="hljs-number">1000</span>)<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>é€‰æ‹© canvas åˆ‡ img çš„æ—¶æœºã€‚<br>å¦‚æœåœ¨æ‹¿åˆ°å¯¼å‡ºå›¾ç‰‡è·¯å¾„æ—¶ç«‹å³åˆ‡å›¾ç‰‡ï¼Œä¼šå¯¼è‡´é¡µé¢çš„ chart æœ‰ä¸€æ®µä¸è‡ªç„¶çš„é—ªçƒçœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼›å¦‚æœä¸è€ƒè™‘åˆ‡æ¢æ“ä½œï¼Œç›´æ¥åœ¨å›¾ç‰‡ä½ç½®åŠ  loading å›¾ç›´åˆ°æ‹¿åˆ°å¯¼å‡ºå›¾ç‰‡è·¯å¾„ï¼Œåˆ™ä½“æ„ŸåŠ è½½æ—¶é—´ä¼šå¾ˆé•¿ï¼Œå› ä¸º loading æ—¶é—´åŒ…æ‹¬äº† canvas ç»˜åˆ¶å’Œå›¾ç‰‡å¯¼å‡ºï¼Œéƒ½æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œã€‚<br>æ—¢ç„¶ canvas æ¢å›¾ç‰‡çš„æ“ä½œæ˜¯ä¸ºäº†è§£å†³å¼¹çª—è¢«é®æŒ¡çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥å°†æ”¹å˜ imgHide æ—¶æœºæ”¾ç½®åœ¨ç‚¹å‡»æŒ‰é’®ã€å¼¹å‡ºå¼¹çª—çš„æ–¹æ³•ä¸­ã€‚<br>åŒæ—¶è€ƒè™‘åˆ° canvas å¯¼å‡ºå›¾ç‰‡çš„æ—¶é—´å¾ˆé•¿ï¼Œå¦‚æœåœ¨æœªå®Œæˆè¯¥æ“ä½œæ—¶å¼¹çª—å°±å…³é—­çš„è¯ç”¨æˆ·å°±ä¼šçœ‹åˆ°ç©ºç™½çš„å›¾ç‰‡ï¼Œæ‰€ä»¥éœ€è¦åœ¨å¼¹çª—å…³é—­çš„æ–¹æ³•ä¸­å¢åŠ æ˜¯å¦éœ€è¦åˆ‡å› canvas çš„åˆ¤æ–­ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-title function_">modalShow</span>(<span class="hljs-params"></span>) &#123;<br>    ...<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgHide</span> = <span class="hljs-literal">false</span><br>&#125;<br><span class="hljs-title function_">modalClose</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">chartImg</span> != <span class="hljs-string">&#x27;&#x27;</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgHide</span> = <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯å¦‚æœ canvas çš„é¢ç§¯å¤§äºå¼¹çª—çš„é¢ç§¯ï¼Œé‚£ä¹ˆå½“ç‚¹å‡»å¼¹çª—ã€canvas å°šæœªå¯¼å‡ºå›¾ç‰‡è·¯å¾„æ—¶ï¼Œä»å¯ä»¥é€è¿‡å¼¹çª—çš„ mask çœ‹åˆ°æ²¡å›¾çš„ img å…ƒç´ çš„è¾¹æ¡†ã€‚<del>ï¼ˆè¿™æ—¶æœ€å¥½ä¸è¦åšè¿™ä¸ªåŠŸèƒ½äº†ï¼‰</del></p><ol start="4"><li>å¦‚æœæ˜¯éœ€è¦åå¤ç»˜åˆ¶çš„åœºæ™¯ï¼Œéœ€è¦æ³¨æ„ç»˜åˆ¶å‰ canvas æ˜¯å¦ä»ç„¶å­˜åœ¨ï¼Œå¦åˆ™ canvas æ— æ³•é‡æ–°ç»˜åˆ¶ï¼Œè½¬æˆå›¾ç‰‡è‡ªç„¶ä¹Ÿä¸æ‰§è¡Œã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-title function_">onShow</span>(<span class="hljs-params"></span>) &#123;<br>    ...<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgHide</span> = <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://wenku.baidu.com/view/9d46b515ba0d6c85ec3a87c24028915f804d842d.html">å¾®ä¿¡å°ç¨‹åº canvas å±‚çº§è¿‡é«˜ï¼Œé®ä½å¼¹çª—è§£å†³æ–¹æ³•</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å°ç¨‹åºå¼€å‘å¼¹çª—åŠŸèƒ½æ—¶é‡åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="è¸©å‘ç»å†" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E8%B8%A9%E5%9D%91%E7%BB%8F%E5%8E%86/"/>
    
    
    <category term="å°ç¨‹åº" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>webpacké…ç½®è¸©å‘ç»å†</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/09/20/webpackConfig/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/09/20/webpackConfig/</id>
    <published>2022-09-20T14:15:46.000Z</published>
    <updated>2022-09-20T14:43:01.591Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜ï¼šwebpacké¡¹ç›®ä½¿ç”¨åŸŸåè®¿é—®å‡ºç°Invalid-Host-headerï¼Œä½¿ç”¨ipå¯è®¿é—®"><a href="#é—®é¢˜ï¼šwebpacké¡¹ç›®ä½¿ç”¨åŸŸåè®¿é—®å‡ºç°Invalid-Host-headerï¼Œä½¿ç”¨ipå¯è®¿é—®" class="headerlink" title="é—®é¢˜ï¼šwebpacké¡¹ç›®ä½¿ç”¨åŸŸåè®¿é—®å‡ºç°Invalid Host headerï¼Œä½¿ç”¨ipå¯è®¿é—®"></a>é—®é¢˜ï¼šwebpacké¡¹ç›®ä½¿ç”¨åŸŸåè®¿é—®å‡ºç°Invalid Host headerï¼Œä½¿ç”¨ipå¯è®¿é—®</h2><p><strong>åŸå› </strong>ï¼šæ–°ç‰ˆçš„webpack-dev-serverå‡ºäºå®‰å…¨è€ƒè™‘,é»˜è®¤æ£€æŸ¥hostname,å¦‚æœhostname ä¸æ˜¯é…ç½®å†…çš„,å°†ä¸­æ–­è®¿é—®ã€‚<br><strong>è§£å†³æ–¹æ³•</strong>ï¼šæ‰¾åˆ°serverçš„é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">devServer:</span> &#123;<br>  <span class="hljs-attr">disableHostCheck:</span> <span class="hljs-literal">true</span>,<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é—®é¢˜ï¼šwebpacké¡¹ç›®ä½¿ç”¨åŸŸåè®¿é—®å‡ºç°Invalid-Host-headerï¼Œä½¿ç”¨ipå¯è®¿é—®&quot;&gt;&lt;a href=&quot;#é—®é¢˜ï¼šwebpacké¡¹ç›®ä½¿ç”¨åŸŸåè®¿é—®å‡ºç°Invalid-Host-headerï¼Œä½¿ç”¨ipå¯è®¿é—®&quot; class=&quot;headerlink&quot; title</summary>
      
    
    
    
    <category term="è¸©å‘ç»å†" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E8%B8%A9%E5%9D%91%E7%BB%8F%E5%8E%86/"/>
    
    
    <category term="webpack" scheme="https://unknown404.github.io/unkown404.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>Vue</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/09/18/Vue/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/09/18/Vue/</id>
    <published>2022-09-18T09:02:00.000Z</published>
    <updated>2023-02-19T07:41:55.271Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ç«¯ vue æ¡†æ¶æ–¹é¢çŸ¥è¯†æ•´ç†ã€‚</p><span id="more"></span><h2 id="Vue-ç›¸å…³åŸºæœ¬æ¦‚å¿µ"><a href="#Vue-ç›¸å…³åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="Vue ç›¸å…³åŸºæœ¬æ¦‚å¿µ"></a>Vue ç›¸å…³åŸºæœ¬æ¦‚å¿µ</h2><h3 id="MVVM-å’Œ-MVC-çš„åŒºåˆ«"><a href="#MVVM-å’Œ-MVC-çš„åŒºåˆ«" class="headerlink" title="MVVM å’Œ MVC çš„åŒºåˆ«"></a>MVVM å’Œ MVC çš„åŒºåˆ«</h3><h4 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h4><ul><li>Model ä»£è¡¨æ•°æ®æ¨¡å‹ï¼Œæ•°æ®å’Œä¸šåŠ¡é€»è¾‘éƒ½åœ¨ Model å±‚ä¸­å®šä¹‰ï¼›</li><li>View ä»£è¡¨ UI è§†å›¾ï¼Œè´Ÿè´£æ•°æ®çš„å±•ç¤ºï¼›</li><li>ViewModel è´Ÿè´£ç›‘å¬ Model ä¸­æ•°æ®çš„æ”¹å˜å¹¶ä¸”æ§åˆ¶è§†å›¾çš„æ›´æ–°ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’æ“ä½œï¼›</li></ul><p>ViewModel é€šè¿‡åŒå‘æ•°æ®ç»‘å®šè¿æ¥ view å’Œ modelï¼Œview å’Œ model é—´çš„åŒæ­¥å·¥ä½œæ˜¯è‡ªåŠ¨çš„ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ DOM</p><h4 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h4><ul><li>Model ä»£è¡¨æ•°æ®æ¨¡å‹ï¼Œæ•°æ®å’Œä¸šåŠ¡é€»è¾‘éƒ½åœ¨ Model å±‚ä¸­å®šä¹‰ï¼ŒModel å‘ç”Ÿçš„å˜åŒ–ä¼šé€šçŸ¥åˆ° View å±‚ï¼›</li><li>View ä»£è¡¨ UI è§†å›¾ï¼Œè´Ÿè´£æ•°æ®çš„å±•ç¤ºï¼›</li><li>Controller ä¸»è¦è´Ÿè´£ç”¨æˆ·ä¸åº”ç”¨çš„å“åº”æ“ä½œï¼Œç”¨æˆ·ä¸é¡µé¢äº§ç”Ÿäº¤äº’çš„æ—¶å€™ï¼ŒController ä¸­çš„äº‹ä»¶è§¦å‘å™¨ä¼šè°ƒç”¨åˆé€‚çš„ model å¤„ç†é—®é¢˜ï¼›</li></ul><h3 id="åŒå‘ç»‘å®š-x2F-å“åº”å¼åŸç†"><a href="#åŒå‘ç»‘å®š-x2F-å“åº”å¼åŸç†" class="headerlink" title="åŒå‘ç»‘å®š&#x2F;å“åº”å¼åŸç†"></a>åŒå‘ç»‘å®š&#x2F;å“åº”å¼åŸç†</h3><p>Object.defineProperty åŠ«æŒæ•°æ®ï¼Œæ·»åŠ  setter&#x2F;getter å±æ€§ç›‘å¬æ•°æ®å˜åŒ–æƒ…å†µï¼Œå‘æ¶ˆæ¯ç»™è®¢é˜…è€…è§¦å‘ç›‘å¬å›è°ƒ</p><ol><li>å®ç°ä¸€ä¸ªç›‘å¬å™¨ observerï¼šéå†å¯¹è±¡å±æ€§ï¼Œæ·»åŠ  setter&#x2F;getterï¼Œæ•°æ®æ”¹å˜æ—¶å¯é€šè¿‡ setter å¬åˆ°å˜åŒ–</li><li>å®ç°ä¸€ä¸ªç¼–è¯‘å™¨ compilerï¼šç¼–è¯‘æ¨¡ç‰ˆï¼Œå°†æ¨¡ç‰ˆçš„å˜é‡æ›¿æ¢ä¸ºæ•°æ®ï¼ŒæŒ‡ä»¤èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°</li><li>å®ç°ä¸€ä¸ªè®¢é˜…è€… watcherï¼šè¿æ¥ observer å’Œ compiler æ¡¥æ¢ï¼Œè®¢é˜… observer å±æ€§å˜åŒ–æ¶ˆæ¯ï¼Œæ¥æ”¶å˜åŒ–æ—¶è§¦å‘ compiler æ›´æ–°å‡½æ•°</li><li>å®ç°ä¸€ä¸ªè®¢é˜…å™¨ depï¼šè®¢é˜…å‘å¸ƒç®¡ç†æ¨¡å¼ï¼Œç»Ÿä¸€ç®¡ç† watcher å’Œ observer</li></ol><h3 id="Vue-diff-ç®—æ³•"><a href="#Vue-diff-ç®—æ³•" class="headerlink" title="Vue diff ç®—æ³•"></a>Vue diff ç®—æ³•</h3><h4 id="vue-2-x-åŒç«¯-diff"><a href="#vue-2-x-åŒç«¯-diff" class="headerlink" title="vue 2.x - åŒç«¯ diff"></a>vue 2.x - åŒç«¯ diff</h4><p>åŒç«¯ diff ç®—æ³•æ˜¯å¤´å°¾æŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ï¼Œåˆ†åˆ«åˆ¤æ–­å¤´å°¾èŠ‚ç‚¹æ˜¯å¦å¯ä»¥å¤ç”¨ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹å†å»éå†æŸ¥æ‰¾å¯¹åº”èŠ‚ç‚¹çš„ä¸‹æ ‡ï¼Œç„¶åç§»åŠ¨ã€‚å…¨éƒ¨å¤„ç†å®Œä¹‹åä¹Ÿè¦å¯¹å‰©ä¸‹çš„èŠ‚ç‚¹è¿›è¡Œæ‰¹é‡çš„æ–°å¢å’Œåˆ é™¤ã€‚</p><h4 id="vue-3-æœ€é•¿é€’å¢å­åºåˆ—"><a href="#vue-3-æœ€é•¿é€’å¢å­åºåˆ—" class="headerlink" title="vue 3 - æœ€é•¿é€’å¢å­åºåˆ—"></a>vue 3 - æœ€é•¿é€’å¢å­åºåˆ—</h4><h3 id="Vue-å±æ€§"><a href="#Vue-å±æ€§" class="headerlink" title="Vue å±æ€§"></a>Vue å±æ€§</h3><h4 id="data-ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯å¯¹è±¡"><a href="#data-ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯å¯¹è±¡" class="headerlink" title="data ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯å¯¹è±¡"></a>data ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯å¯¹è±¡</h4><p>å¦‚æœ data æ˜¯å¯¹è±¡ï¼Œå½“ç»„ä»¶å¤ç”¨æ—¶ï¼Œç”±äºå¤šä¸ªå®ä¾‹å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦ä¸€ä¸ªå®ä¾‹å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå…¶ä»–å®ä¾‹ä¸­çš„æ•°æ®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><h4 id="computed-å’Œ-watch-åŒºåˆ«"><a href="#computed-å’Œ-watch-åŒºåˆ«" class="headerlink" title="computed å’Œ watch åŒºåˆ«"></a>computed å’Œ watch åŒºåˆ«</h4><p><strong>computed</strong></p><ol><li>æ”¯æŒç¼“å­˜</li><li>ä¸æ”¯æŒå¼‚æ­¥</li><li>å¦‚æœ computed å±æ€§çš„å±æ€§å€¼æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä½¿ç”¨ get æ–¹æ³•ï¼Œå‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å±æ€§çš„å±æ€§å€¼ï¼›åœ¨ computed ä¸­ï¼Œå±æ€§æœ‰ä¸€ä¸ª get æ–¹æ³•å’Œä¸€ä¸ª set æ–¹æ³•ï¼Œå½“æ•°æ®è¢«èµ‹å€¼æ—¶ï¼Œä¼šè°ƒç”¨ set æ–¹æ³•ã€‚</li><li>ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ä¼šç›‘å¬</li><li>computed å±æ€§å‡½æ•°éœ€è¦ return</li></ol><p><strong>watch</strong></p><ol><li>ä¸æ”¯æŒç¼“å­˜</li><li>æ”¯æŒå¼‚æ­¥</li><li>ç›‘å¬æ•°æ®å¿…é¡»æ˜¯ data ä¸­å£°æ˜çš„æˆ–è€…çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ props ä¸­çš„æ•°æ®</li><li>ç¬¬ä¸€æ¬¡åŠ è½½æ—¶é»˜è®¤ä¸ç›‘å¬ï¼Œé™¤é immediate ä¸º true</li><li>watch å±æ€§å‡½æ•°ä¸éœ€è¦ return</li></ol><h3 id="Vue-æ¨¡ç‰ˆæŒ‡ä»¤"><a href="#Vue-æ¨¡ç‰ˆæŒ‡ä»¤" class="headerlink" title="Vue æ¨¡ç‰ˆæŒ‡ä»¤"></a>Vue æ¨¡ç‰ˆæŒ‡ä»¤</h3><h4 id="v-show-å’Œ-v-if-åŒºåˆ«"><a href="#v-show-å’Œ-v-if-åŒºåˆ«" class="headerlink" title="v-show å’Œ v-if åŒºåˆ«"></a>v-show å’Œ v-if åŒºåˆ«</h4><p>v-show åªæ˜¯åœ¨ display: none å’Œ display: block ä¹‹é—´åˆ‡æ¢ã€‚DOM ä¸€ç›´å­˜åœ¨<br>v-if çš„è¯å°±å¾—è¯´åˆ° Vue åº•å±‚çš„ç¼–è¯‘äº†ã€‚å½“å±æ€§åˆå§‹ä¸º false æ—¶ï¼Œç»„ä»¶å°±ä¸ä¼šè¢«æ¸²æŸ“ï¼Œç›´åˆ°æ¡ä»¶ä¸º trueï¼Œå¹¶ä¸”åˆ‡æ¢æ¡ä»¶æ—¶ä¼šè§¦å‘é”€æ¯&#x2F;æŒ‚è½½ç»„ä»¶</p><h4 id="v-if-å’Œ-v-for-å…±ç”¨æ—¶æ§åˆ¶å°æŠ¥é”™"><a href="#v-if-å’Œ-v-for-å…±ç”¨æ—¶æ§åˆ¶å°æŠ¥é”™" class="headerlink" title="v-if å’Œ v-for å…±ç”¨æ—¶æ§åˆ¶å°æŠ¥é”™"></a>v-if å’Œ v-for å…±ç”¨æ—¶æ§åˆ¶å°æŠ¥é”™</h4><p>å½“å®ƒä»¬åŒæ—¶å­˜åœ¨äºä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ—¶ï¼Œv-if æ¯” v-for çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚è¿™æ„å‘³ç€ v-if çš„æ¡ä»¶å°†æ— æ³•è®¿é—®åˆ° v-for ä½œç”¨åŸŸå†…å®šä¹‰çš„å˜é‡åˆ«å<br>æ­£ç¡®å†™æ³•ï¼š</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;todo in todos&quot;</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;!todo.isComplete&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">todo.name</span> &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="Vue3-0-æ–°ç‰¹æ€§"><a href="#Vue3-0-æ–°ç‰¹æ€§" class="headerlink" title="Vue3.0 æ–°ç‰¹æ€§"></a>Vue3.0 æ–°ç‰¹æ€§</h3><h4 id="Proxy-æ›¿ä»£-Object-defineProperty"><a href="#Proxy-æ›¿ä»£-Object-defineProperty" class="headerlink" title="Proxy æ›¿ä»£ Object.defineProperty"></a>Proxy æ›¿ä»£ Object.defineProperty</h4><h5 id="Proxy-ç‰¹ç‚¹"><a href="#Proxy-ç‰¹ç‚¹" class="headerlink" title="Proxy ç‰¹ç‚¹"></a>Proxy ç‰¹ç‚¹</h5><ol><li>å¯ä»¥ç›´æ¥ç›‘å¬æ•´ä¸ªå¯¹è±¡è€Œéå±æ€§ï¼›</li><li>Proxy å¯ä»¥ç›´æ¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼›</li><li>Proxy ä¸ Object.defineProperty ç›¸æ¯”æœ‰æ›´å¤šæ‹¦æˆªæ–¹æ³•ï¼›</li><li>Proxy è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¯ä»¥åªæ“ä½œæ–°çš„å¯¹è±¡è¾¾åˆ°ç›®çš„ï¼Œè€Œ Object.defineProperty åªèƒ½éå†å¯¹è±¡å±æ€§ç›´æ¥ä¿®æ”¹;</li></ol><h5 id="Object-defineProperty-ç‰¹ç‚¹"><a href="#Object-defineProperty-ç‰¹ç‚¹" class="headerlink" title="Object.defineProperty ç‰¹ç‚¹"></a>Object.defineProperty ç‰¹ç‚¹</h5><ol><li>Object.defineProperty åªèƒ½åŠ«æŒå¯¹è±¡çš„å±æ€§,å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªå¯¹è±¡çš„æ¯ä¸ªå±æ€§è¿›è¡Œéå†</li><li>Object.defineProperty ä¹Ÿä¸èƒ½å¯¹ es6 æ–°äº§ç”Ÿçš„ Map,Set è¿™äº›æ•°æ®ç»“æ„åšå‡ºç›‘å¬ï¼Œä¸èƒ½ç›‘å¬æ•°ç»„å’Œå¯¹è±¡</li><li>Object.defineProperty ä¸èƒ½ç›‘å¬æ–°å¢å’Œåˆ é™¤æ“ä½œ</li></ol><h4 id="ç»„åˆå¼-API"><a href="#ç»„åˆå¼-API" class="headerlink" title="ç»„åˆå¼ API"></a>ç»„åˆå¼ API</h4><p>Vue ä¹‹å‰çš„é£æ ¼å¯ä»¥è¯´å±äºé€‰é¡¹å¼ APIï¼Œç”¨åŒ…å«å¤šä¸ªé€‰é¡¹çš„å¯¹è±¡æ¥æè¿°ç»„ä»¶çš„é€»è¾‘ï¼Œä¾‹å¦‚ dataã€methods å’Œ mountedã€‚ç»„åˆå¼ API æ˜¯å†™åœ¨æ ‡ç­¾<code>&lt;script setup&gt;</code>çš„å†…éƒ¨çš„ï¼Œé£æ ¼æ¥è¿‘ react é’©å­å‡½æ•°</p><h5 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h5><p>1ï¼‰ç”Ÿå‘½å‘¨æœŸé’©å­åªæœ‰ onBeforeMountã€onMountedã€onBeforeUpdateã€onUpdatedã€onBeforeUnmount å’Œ onUnmountedï¼Œä¸å­˜åœ¨è·Ÿ beforeCreate å’Œ created ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é’©å­<br>2ï¼‰çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®äº¤äº’ä¾èµ–äºå‡½æ•° defineProps å’Œ defineEmitsã€defineExpose<br>3ï¼‰ä¸ä¼šä½¿ç”¨ thisï¼ˆå› ä¸ºä¸å­˜åœ¨ç»„ä»¶å®ä¾‹äº†ï¼‰<br>4ï¼‰éœ€è¦ä½¿ç”¨ ref æˆ–è€… reactive åˆ›å»ºå“åº”å¼æ•°æ®</p><h5 id="ref-å’Œ-reactive-åŒºåˆ«"><a href="#ref-å’Œ-reactive-åŒºåˆ«" class="headerlink" title="ref å’Œ reactive åŒºåˆ«"></a>ref å’Œ reactive åŒºåˆ«</h5><p><strong>ref</strong>ï¼šé€šå¸¸ç”¨æ¥å®šä¹‰å¸¸ç”¨çš„åŸºç¡€ç±»å‹(String,Number,Boolean ç­‰ç­‰)ï¼Œref å‡½æ•°åŒ…è£¹çš„æ•°æ®éœ€è¦ç”¨.value æ¥æŸ¥è¯¢<br><strong>reactive</strong>ï¼šé€šå¸¸ç”¨æ¥å®šä¹‰å¯¹è±¡</p><h4 id="æ”¯æŒ-TypeScript"><a href="#æ”¯æŒ-TypeScript" class="headerlink" title="æ”¯æŒ TypeScript"></a>æ”¯æŒ TypeScript</h4><p>Vue 3.0 æ˜¯ç”¨ TypeScript ç¼–å†™çš„ï¼Œå› æ­¤æ”¯æŒ TypeScriptã€‚<br>åœ¨å•æ–‡ä»¶ç»„ä»¶ä¸­ä½¿ç”¨ TypeScriptï¼Œéœ€è¦åœ¨ <code>&lt;script&gt;</code> æ ‡ç­¾ä¸ŠåŠ ä¸Š lang&#x3D;â€tsâ€ çš„ attributeã€‚<br><strong>ç±»å‹æ¨æ–­å¯¹æ¯”</strong></p><table style="text-align:center;">    <tr>       <th></th>        <th>ç»„åˆå¼API</th>      <th>é€‰é¡¹å¼API</th>   </tr>   <tr>       <td>propsç±»å‹æ¨å¯¼</td>           <td>defineProps</td>           <td>defineComponent</td>   </tr>   <tr>       <td>emitsç±»å‹æ¨å¯¼</td>           <td>defineEmits</td>           <td>defineComponent</td>   </tr>   <tr>       <td>è®¡ç®—å±æ€§ç±»å‹æ¨å¯¼</td>           <td>æ³›å‹å‚æ•°æ˜¾å¼æŒ‡å®šcomputed()ç±»å‹</td>           <td>æ˜¾å¼åœ°æ ‡è®°å‡ºè®¡ç®—å±æ€§çš„ç±»å‹</td>   </tr>   <tr>       <td>äº‹ä»¶å¤„ç†å‡½æ•°ç±»å‹æ¨å¯¼</td>           <td colspan="2">æ˜¾å¼åœ°å¼ºåˆ¶è½¬æ¢ event ä¸Šçš„å±æ€§(ä¾‹ï¼ševent.target as HTMLInputElementï¼‰</td>   </tr>   <tr>       <td>refç±»å‹æ¨å¯¼</td>           <td>Refä¼ å…¥æ³›å‹å‚æ•°;refåˆå§‹åŒ–æ—¶ä¹Ÿä¼šæ¨å¯¼ç±»å‹</td>           <td rowspan="2">æ— </td>   </tr>    <tr>       <td>reactiveç±»å‹æ¨å¯¼</td>           <td>interfaceå®šä¹‰</td>   </tr></table><h3 id="æ–°å†…ç½®ç»„ä»¶-Suspenseã€Teleport"><a href="#æ–°å†…ç½®ç»„ä»¶-Suspenseã€Teleport" class="headerlink" title="æ–°å†…ç½®ç»„ä»¶ Suspenseã€Teleport"></a>æ–°å†…ç½®ç»„ä»¶ Suspenseã€Teleport</h3><ul><li><strong>Suspense</strong>ï¼šç»„ä»¶æœ‰ä¸¤ä¸ªæ’æ§½ï¼š#default å’Œ #fallbackã€‚ä¸¤ä¸ªæ’æ§½éƒ½åªå…è®¸ä¸€ä¸ªç›´æ¥å­èŠ‚ç‚¹ã€‚åˆå§‹æ¸²æŸ“æ—¶æ¸²æŸ“é»˜è®¤çš„æ’æ§½å†…å®¹ã€‚å¦‚æœé‡åˆ°å¼‚æ­¥ä¾èµ–ï¼Œåˆ™ä¼šè¿›å…¥æŒ‚èµ·çŠ¶æ€ã€‚åœ¨æŒ‚èµ·çŠ¶æ€æœŸé—´ï¼Œå±•ç¤ºçš„æ˜¯åå¤‡å†…å®¹ã€‚å½“æ‰€æœ‰é‡åˆ°çš„å¼‚æ­¥ä¾èµ–éƒ½å®Œæˆåï¼Œå°†å±•ç¤ºå‡ºé»˜è®¤æ’æ§½çš„å†…å®¹ã€‚</li><li><strong>Teleport</strong>ï¼šæ¥æ”¶ä¸€ä¸ª to çš„å±æ€§æ¥æŒ‡å®šä¼ é€çš„ç›®æ ‡ã€‚to çš„å€¼å¯ä»¥æ˜¯ CSS é€‰æ‹©å™¨å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª DOM å…ƒç´ å¯¹è±¡ã€‚è¢« Teleport æ ‡ç­¾åŒ…è£¹çš„æ¨¡å—å°†ç½®äº to æŒ‡å®šçš„ DOM ä¹‹ä¸‹ã€‚é€‚ç”¨äºå­ç»„ä»¶è°ƒç”¨å…¬å…±ç»„ä»¶å¦‚å…¨å±€æç¤ºæ¡†çš„åœºæ™¯</li></ul><h2 id="Vue-ç”Ÿå‘½å‘¨æœŸï¼ˆVue3-0-ç‰ˆæœ¬ï¼‰"><a href="#Vue-ç”Ÿå‘½å‘¨æœŸï¼ˆVue3-0-ç‰ˆæœ¬ï¼‰" class="headerlink" title="Vue ç”Ÿå‘½å‘¨æœŸï¼ˆVue3.0 ç‰ˆæœ¬ï¼‰"></a>Vue ç”Ÿå‘½å‘¨æœŸï¼ˆVue3.0 ç‰ˆæœ¬ï¼‰</h2><p><img src="/unkown404.github.io/img/life-cycle.png"></p><h3 id="beforeCreate"><a href="#beforeCreate" class="headerlink" title="beforeCreate"></a>beforeCreate</h3><p>å®ä¾‹åˆå§‹åŒ–å®Œæˆã€props è§£æä¹‹åã€data() å’Œ computed ç­‰é€‰é¡¹å¤„ç†ä¹‹å‰ç«‹å³è°ƒç”¨ã€‚</p><h3 id="created"><a href="#created" class="headerlink" title="created"></a>created</h3><p>dataã€computedã€methodã€watch å·²ç»è®¾ç½®å®Œæˆã€‚è·Ÿ DOM æ“ä½œç›¸å…³çš„å±æ€§æ–¹æ³•ä»ä¸å¯ä½¿ç”¨ã€‚</p><h3 id="beforeMount"><a href="#beforeMount" class="headerlink" title="beforeMount"></a>beforeMount</h3><p>å³å°†é¦–æ¬¡æ‰§è¡Œ DOM æ¸²æŸ“è¿‡ç¨‹ã€‚</p><p>æœåŠ¡å™¨æ¸²æŸ“æµç¨‹ä¸åŒ…æ‹¬è¯¥ç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="mounted"><a href="#mounted" class="headerlink" title="mounted"></a>mounted</h3><p>ç»„ä»¶æŒ‚è½½å®Œä¹‹åè°ƒç”¨ã€‚æŒ‚è½½å®Œæˆçš„å®šä¹‰ä¸ºï¼šæ‰€æœ‰åŒæ­¥å­ç»„ä»¶éƒ½å·²ç»è¢«æŒ‚è½½ä¸”å…¶è‡ªèº«çš„ DOM æ ‘å·²ç»åˆ›å»ºå®Œæˆå¹¶æ’å…¥äº†çˆ¶å®¹å™¨ä¸­ã€‚<br>è¯¥ç”Ÿå‘½å‘¨æœŸé€šå¸¸ç”¨äºæ‰§è¡Œéœ€è¦è®¿é—®ç»„ä»¶æ‰€æ¸²æŸ“çš„ DOM æ ‘ç›¸å…³çš„å‰¯ä½œç”¨ã€‚</p><p>æœåŠ¡å™¨æ¸²æŸ“æµç¨‹ä¸åŒ…æ‹¬è¯¥ç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="beforeUpdate"><a href="#beforeUpdate" class="headerlink" title="beforeUpdate"></a>beforeUpdate</h3><p>å“åº”å¼æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå¯ä»¥ç”¨æ¥åœ¨ Vue æ›´æ–° DOM ä¹‹å‰è®¿é—® DOM çŠ¶æ€ã€‚</p><p>æœåŠ¡å™¨æ¸²æŸ“æµç¨‹ä¸åŒ…æ‹¬è¯¥ç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="updated"><a href="#updated" class="headerlink" title="updated"></a>updated</h3><p>è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOM å·²ç»æ›´æ–°ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œä¾èµ–äº DOM çš„æ“ä½œã€‚</p><p>æœåŠ¡å™¨æ¸²æŸ“æµç¨‹ä¸åŒ…æ‹¬è¯¥ç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="beforeUnmount"><a href="#beforeUnmount" class="headerlink" title="beforeUnmount"></a>beforeUnmount</h3><p>ä¸€ä¸ªç»„ä»¶å®ä¾‹è¢«å¸è½½ä¹‹å‰è°ƒç”¨ã€‚å½“è¿™ä¸ªé’©å­è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶å®ä¾‹ä¾ç„¶è¿˜ä¿æœ‰å…¨éƒ¨çš„åŠŸèƒ½ã€‚</p><p>æœåŠ¡å™¨æ¸²æŸ“æµç¨‹ä¸åŒ…æ‹¬è¯¥ç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="unmounted"><a href="#unmounted" class="headerlink" title="unmounted"></a>unmounted</h3><p>ä¸€ä¸ªç»„ä»¶å®ä¾‹è¢«å¸è½½ä¹‹åè°ƒç”¨ã€‚å¯ä»¥åœ¨è¿™ä¸ªé’©å­ä¸­æ‰‹åŠ¨æ¸…ç†ä¸€äº›å‰¯ä½œç”¨ï¼Œä¾‹å¦‚è®¡æ—¶å™¨ã€DOM äº‹ä»¶ç›‘å¬å™¨æˆ–è€…ä¸æœåŠ¡å™¨çš„è¿æ¥ã€‚</p><p>æœåŠ¡å™¨æ¸²æŸ“æµç¨‹ä¸åŒ…æ‹¬è¯¥ç”Ÿå‘½å‘¨æœŸã€‚<br><strong>å¤‡æ³¨</strong>ï¼š<br>Vue2 çš„ç”Ÿå‘½å‘¨æœŸé’©å­é™¤äº†æœ€åä¸¤ä¸ªçš„åç§°æ˜¯ beforeDestroy å’Œ destroyedï¼Œå…¶ä»–éƒ½ä¸€æ ·</p><h3 id="KeepAlive-ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#KeepAlive-ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="KeepAlive ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>KeepAlive ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="KeepAlive-ç»„ä»¶ç®€ä»‹"><a href="#KeepAlive-ç»„ä»¶ç®€ä»‹" class="headerlink" title="KeepAlive ç»„ä»¶ç®€ä»‹"></a>KeepAlive ç»„ä»¶ç®€ä»‹</h4><p>vue çš„å†…ç½®ç»„ä»¶ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯åœ¨å¤šä¸ªç»„ä»¶é—´åŠ¨æ€åˆ‡æ¢æ—¶ç¼“å­˜è¢«ç§»é™¤çš„ç»„ä»¶å®ä¾‹ã€‚</p><h4 id="activated"><a href="#activated" class="headerlink" title="activated"></a>activated</h4><p>åœ¨é¦–æ¬¡æŒ‚è½½ã€ä»¥åŠæ¯æ¬¡ä»ç¼“å­˜ä¸­è¢«é‡æ–°æ’å…¥çš„æ—¶å€™è°ƒç”¨</p><h4 id="deactivated"><a href="#deactivated" class="headerlink" title="deactivated"></a>deactivated</h4><p>åœ¨ä» DOM ä¸Šç§»é™¤ã€è¿›å…¥ç¼“å­˜ä»¥åŠç»„ä»¶å¸è½½æ—¶è°ƒç”¨</p><h3 id="é€‚åˆåšå¼‚æ­¥è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#é€‚åˆåšå¼‚æ­¥è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="é€‚åˆåšå¼‚æ­¥è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ"></a>é€‚åˆåšå¼‚æ­¥è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>createdã€beforeMountã€mounted éƒ½å¯ä»¥åšå¼‚æ­¥è¯·æ±‚ï¼Œå› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­ï¼Œdata å·²ç»åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡ç«¯ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ã€‚<br>è€ƒè™‘åˆ°æœåŠ¡ç«¯æ¸²æŸ“ä¸åŒ…æ‹¬å‘¨æœŸ beforeMountã€mountedï¼Œå¼‚æ­¥è¯·æ±‚æ”¾åœ¨ created ä¸€è‡´æ€§æ›´å¥½ï¼›å¦ä¸€æ–¹é¢ created è°ƒç”¨å¼‚æ­¥æ•°æ®ç›¸æ¯”å…¶ä»–å‘¨æœŸè°ƒç”¨é¡µé¢åŠ è½½æ—¶é—´ä¼šç¼©çŸ­ã€‚</p><h3 id="çˆ¶å­ç»„ä»¶åµŒå¥—æ—¶ï¼Œçˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº"><a href="#çˆ¶å­ç»„ä»¶åµŒå¥—æ—¶ï¼Œçˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº" class="headerlink" title="çˆ¶å­ç»„ä»¶åµŒå¥—æ—¶ï¼Œçˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº"></a>çˆ¶å­ç»„ä»¶åµŒå¥—æ—¶ï¼Œçˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº</h3><ul><li><strong>åŠ è½½æ¸²æŸ“è¿‡ç¨‹</strong> çˆ¶ beforeCreate -&gt; çˆ¶ created -&gt; çˆ¶ beforeMount -&gt; å­ beforeCreate -&gt; å­ created -&gt; å­ beforeMount -&gt; å­ mounted -&gt; çˆ¶ mounted</li><li><strong>å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹</strong> çˆ¶ beforeUpdate -&gt; å­ beforeUpdate -&gt; å­ updated -&gt; çˆ¶ updated</li><li><strong>çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹</strong> çˆ¶ beforeUpdate -&gt; çˆ¶ updated</li><li><strong>é”€æ¯è¿‡ç¨‹</strong> çˆ¶ beforeDestroy -&gt; å­ beforeDestroy -&gt; å­ destroyed -&gt; çˆ¶ destroyed</li></ul><h2 id="ç»„ä»¶é—´é€šä¿¡"><a href="#ç»„ä»¶é—´é€šä¿¡" class="headerlink" title="ç»„ä»¶é—´é€šä¿¡"></a>ç»„ä»¶é—´é€šä¿¡</h2><h3 id="çˆ¶å­ç»„ä»¶é€šä¿¡"><a href="#çˆ¶å­ç»„ä»¶é€šä¿¡" class="headerlink" title="çˆ¶å­ç»„ä»¶é€šä¿¡"></a>çˆ¶å­ç»„ä»¶é€šä¿¡</h3><p><strong>1ï¼‰props</strong><br>é€šè¿‡ props ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶<br><strong>2ï¼‰emit</strong><br>çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ v-on æˆ– @ æ¥é€‰æ‹©æ€§åœ°ç›‘å¬å­ç»„ä»¶ä¸ŠæŠ›çš„äº‹ä»¶ï¼Œå¦‚ç¤ºä¾‹ä¸­è‡ªå®šä¹‰çš„äº‹ä»¶ increaseByï¼›è¯¥å±æ€§çš„å¤„ç†å‡½æ•°å¯ä»¥å†™åœ¨çˆ¶ç»„ä»¶çš„ method é‡Œ<br>å­ç»„ä»¶è°ƒç”¨å†…ç½®çš„ $emit æ–¹æ³•ï¼Œé€šè¿‡ä¼ å…¥äº‹ä»¶åç§°æ¥æŠ›å‡ºä¸€ä¸ªäº‹ä»¶ï¼›ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½® emits å±æ€§å®ç°</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// çˆ¶ç»„ä»¶</span><br>&lt;MyButton <span class="hljs-meta">@increase</span>-<span class="hljs-keyword">by</span>=<span class="hljs-string">&quot;(n) =&gt; count += n&quot;</span> /&gt;<br><br><span class="hljs-comment">// å­ç»„ä»¶</span><br>&lt;button <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$emit</span>(&#x27;increaseBy&#x27;, 1)&quot;</span>&gt;<br>  Increase <span class="hljs-keyword">by</span> <span class="hljs-number">1</span><br>&lt;/button&gt;<br></code></pre></td></tr></table></figure><p><strong>3ï¼‰v-model</strong><br>å½“ v-model æŒ‡ä»¤ç”¨äºè‡ªå®šä¹‰çš„ç»„ä»¶æ—¶ï¼Œç­‰æ•ˆäºå¦‚ä¸‹å†™æ³•ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">&lt;CustomInput<br>  <span class="hljs-symbol">:modelValue=<span class="hljs-string">&quot;searchText&quot;</span></span><br>  <span class="hljs-variable">@update</span><span class="hljs-symbol">:modelValue=<span class="hljs-string">&quot;newValue =&gt; searchText = newValue&quot;</span></span><br>/&gt;<br></code></pre></td></tr></table></figure><p>å¦‚æœè¦å®ç°å’ŒåŸç”Ÿå…ƒç´  input ä¸€æ ·çš„ç»‘å®šæ•ˆæœï¼Œè‡ªå®šä¹‰ç»„ä»¶ CustomInput å†…éƒ¨éœ€è¦åšå¦‚ä¸‹æ“ä½œï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- CustomInput.vue --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;modelValue&#x27;</span>],</span><br><span class="language-javascript">  <span class="hljs-attr">emits</span>: [<span class="hljs-string">&#x27;update:modelValue&#x27;</span>]</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;modelValue&quot;</span></span><br><span class="hljs-tag">    @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;$emit(&#x27;update:modelValue&#x27;, $event.target.value)&quot;</span></span><br><span class="hljs-tag">  /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>å­ç»„ä»¶ä¸­é€šè¿‡å°†å±æ€§ modelValue å’ŒåŸç”Ÿå…ƒç´  input çš„ value ç»‘å®šï¼Œå½“ input çš„å€¼å˜åŒ–æ—¶é€šè¿‡ emit å‘ä¸Šä¼ é€’å˜åŒ–çš„å€¼</p><p><strong>4ï¼‰ref</strong><br>ä½¿ç”¨é€‰é¡¹å¼ API æ—¶ï¼Œå¯ä»¥é€šè¿‡ this.$refs.name çš„æ–¹å¼è·å–æŒ‡å®šå…ƒç´ æˆ–è€…ç»„ä»¶</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs perl">// çˆ¶ç»„ä»¶<br><br>&lt;template&gt;<br>&lt;child <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;childNode&quot;</span>&gt;&lt;<span class="hljs-regexp">/child&gt;</span><br><span class="hljs-regexp">&lt;/</span>template&gt;<br>&lt;script&gt;<br>export default&#123;<br>  data()&#123;&#125;,<br>  methods:&#123;<br>    test()&#123;<br>      this.$refs.childNode.childMethod()<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;<span class="hljs-regexp">/script&gt;</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">/</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br><br>// å­ç»„ä»¶(child)<br><br>&lt;script&gt;<br>export default&#123;<br>  data()&#123;&#125;,<br>  methods:&#123;<br>    childMethod()&#123;<br>      console.log(<span class="hljs-string">&#x27;test&#x27;</span>)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><strong>5) $attrs</strong><br>å­ç»„ä»¶çš„$attrs å¯¹è±¡åŒ…å«äº†é™¤ç»„ä»¶æ‰€å£°æ˜çš„ props å’Œ emits ä¹‹å¤–çš„æ‰€æœ‰å…¶ä»– attributeï¼Œä¾‹å¦‚ classï¼Œstyleï¼Œv-on ç›‘å¬å™¨ç­‰ç­‰ã€‚å­ç»„ä»¶å¯ä»¥åˆ©ç”¨<code>v-bind=&quot;$attrs&quot;</code>å°†å±æ€§ä¼ åˆ°ç›®æ ‡å…ƒç´ ä¸Šã€‚<br>vue2 ä¸­$listenersåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„ (ä¸å« .native ä¿®é¥°å™¨çš„) v-on äº‹ä»¶ç›‘å¬å™¨ã€‚è€Œåœ¨vue3ï¼Œ$listeners è¢«ç§»é™¤äº†</p><h3 id="å…„å¼Ÿç»„ä»¶é€šä¿¡"><a href="#å…„å¼Ÿç»„ä»¶é€šä¿¡" class="headerlink" title="å…„å¼Ÿç»„ä»¶é€šä¿¡"></a>å…„å¼Ÿç»„ä»¶é€šä¿¡</h3><h4 id="parent"><a href="#parent" class="headerlink" title="$parent"></a>$parent</h4><p>$parent å¯ä»¥è®©ç»„ä»¶è®¿é—®çˆ¶ç»„ä»¶çš„å®ä¾‹ï¼ˆè®¿é—®çš„æ˜¯ä¸Šä¸€çº§çˆ¶ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•ï¼‰<br>å¯ä»¥é€šè¿‡å…±åŒçš„çˆ¶ç»„ä»¶æ¥ç®¡ç†çŠ¶æ€å’Œäº‹ä»¶å‡½æ•°ã€‚æ¯”å¦‚è¯´å…¶ä¸­ä¸€ä¸ªå…„å¼Ÿç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„äº‹ä»¶å‡½æ•°ä¿®æ”¹çˆ¶ç»„ä»¶ä¸­çš„çŠ¶æ€ï¼Œç„¶åçˆ¶ç»„ä»¶å°†çŠ¶æ€ä¼ é€’ç»™å¦ä¸€ä¸ªå…„å¼Ÿç»„ä»¶ã€‚</p><h4 id="eventBus"><a href="#eventBus" class="headerlink" title="eventBus"></a>eventBus</h4><p>Vue3 ä¸­ç§»é™¤äº†äº‹ä»¶æ€»çº¿ï¼Œä½†æ˜¯å¯ä»¥å€ŸåŠ©äºç¬¬ä¸‰æ–¹å·¥å…·æ¥å®Œæˆï¼ŒVue å®˜æ–¹æ¨è mitt æˆ– tiny-emitterï¼›<br>ä½†åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•ä¿æŒä¸å˜ï¼Œç»„ä»¶ 1 ä½¿ç”¨ emit å‡½æ•°å‘é€äº‹ä»¶åå’Œå‚æ•°ï¼Œç»„ä»¶ 2 ä½¿ç”¨ on å‡½æ•°ç›‘å¬å¯¹åº”çš„äº‹ä»¶åï¼Œæ‰§è¡Œå¤„ç†å‡½æ•°</p><h3 id="è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡"><a href="#è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡" class="headerlink" title="è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡"></a>è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡</h3><h4 id="provideã€inject"><a href="#provideã€inject" class="headerlink" title="provideã€inject"></a>provideã€inject</h4><p>ç¥–å…ˆç»„ä»¶ï¼šä½¿ç”¨ provide å±æ€§æˆ–æ–¹æ³•ï¼ŒæŒ‡å®šæƒ³è¦æä¾›ç»™åä»£ç»„ä»¶çš„æ•°æ®æˆ–æ–¹æ³•<br>åä»£ç»„ä»¶ï¼šä½¿ç”¨ inject è·å–ç¥–å…ˆç»„ä»¶çš„å€¼</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">// ç¥–å…ˆç»„ä»¶</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">&#123; ref, provide &#125;</span><span class="language-xml"><span class="language-javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">&#123; fooSymbol &#125;</span><span class="language-xml"><span class="language-javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./injectionSymbols&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// æä¾›é™æ€å€¼</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">provide</span>(<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// æä¾›å“åº”å¼çš„å€¼</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">provide</span>(<span class="hljs-string">&#x27;count&#x27;</span>, count)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// æä¾›æ—¶å°† Symbol ä½œä¸º key</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">provide</span>(fooSymbol, count)</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">/////////////////////////////////////////////////</span><br><span class="language-xml">// åä»£ç»„ä»¶</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">&#123; inject &#125;</span><span class="language-xml"><span class="language-javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">&#123; fooSymbol &#125;</span><span class="language-xml"><span class="language-javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./injectionSymbols&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// æ³¨å…¥å€¼çš„é»˜è®¤æ–¹å¼</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> foo = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;foo&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// æ³¨å…¥å“åº”å¼çš„å€¼</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;count&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// é€šè¿‡ Symbol ç±»å‹çš„ key æ³¨å…¥</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> foo2 = <span class="hljs-title function_">inject</span>(fooSymbol)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// æ³¨å…¥ä¸€ä¸ªå€¼ï¼Œè‹¥ä¸ºç©ºåˆ™ä½¿ç”¨æä¾›çš„é»˜è®¤å€¼</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> bar = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;default value&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">// æ³¨å…¥æ—¶ä¸ºäº†è¡¨æ˜æä¾›çš„é»˜è®¤å€¼æ˜¯ä¸ªå‡½æ•°ï¼Œéœ€è¦ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> fn = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;function&#x27;</span>, <span class="hljs-function">() =&gt;</span> </span></span><span class="hljs-template-variable">&#123;&#125;</span><span class="language-xml"><span class="language-javascript">, <span class="hljs-literal">false</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"></span><br></code></pre></td></tr></table></figure><h2 id="Vue-ç”Ÿæ€"><a href="#Vue-ç”Ÿæ€" class="headerlink" title="Vue ç”Ÿæ€"></a>Vue ç”Ÿæ€</h2><h3 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h3><h4 id="å‰ç«¯è·¯ç”±å’Œåç«¯è·¯ç”±åŒºåˆ«"><a href="#å‰ç«¯è·¯ç”±å’Œåç«¯è·¯ç”±åŒºåˆ«" class="headerlink" title="å‰ç«¯è·¯ç”±å’Œåç«¯è·¯ç”±åŒºåˆ«"></a>å‰ç«¯è·¯ç”±å’Œåç«¯è·¯ç”±åŒºåˆ«</h4><p>å‰ç«¯è·¯ç”±ï¼šé¡µé¢è·³è½¬çš„ URL è§„åˆ™åŒ¹é…ç”±å‰ç«¯æ¥æ§åˆ¶ï¼ŒæŠŠæ¸²æŸ“çš„ä»»åŠ¡äº¤ç»™äº†æµè§ˆå™¨ï¼Œé€šè¿‡å®¢æˆ·ç«¯çš„ç®—åŠ›æ¥è§£å†³é¡µé¢çš„æ„å»º<br>åç«¯è·¯ç”±ï¼šæµè§ˆå™¨åœ°å€è¾“å…¥æ è¾“å…¥ URL å›è½¦æ—¶åç«¯æ ¹æ®è·¯å¾„å°†å¯¹åº”çš„ html æ¨¡ç‰ˆæ¸²æŸ“å¥½è¿”å›ç»™å‰ç«¯</p><h4 id="ç›´æ¥ä½¿ç”¨-a-é“¾æ¥ä¸ä½¿ç”¨-router-link-çš„åŒºåˆ«"><a href="#ç›´æ¥ä½¿ç”¨-a-é“¾æ¥ä¸ä½¿ç”¨-router-link-çš„åŒºåˆ«" class="headerlink" title="ç›´æ¥ä½¿ç”¨ a é“¾æ¥ä¸ä½¿ç”¨ router-link çš„åŒºåˆ«"></a>ç›´æ¥ä½¿ç”¨ a é“¾æ¥ä¸ä½¿ç”¨ router-link çš„åŒºåˆ«</h4><p>æŠ¹å¹³äº†ä¸¤ç§æ¨¡å¼ä¸‹ href çš„ä¹¦å†™æ–¹å¼ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ href å€¼ï¼›history æ¨¡å¼ä¸‹è°ƒç”¨ pushState å¹¶é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚</p><h4 id="hash-æ¨¡å¼å’Œ-history-æ¨¡å¼åŒºåˆ«"><a href="#hash-æ¨¡å¼å’Œ-history-æ¨¡å¼åŒºåˆ«" class="headerlink" title="hash æ¨¡å¼å’Œ history æ¨¡å¼åŒºåˆ«"></a>hash æ¨¡å¼å’Œ history æ¨¡å¼åŒºåˆ«</h4><h5 id="hash-æ¨¡å¼"><a href="#hash-æ¨¡å¼" class="headerlink" title="hash æ¨¡å¼"></a>hash æ¨¡å¼</h5><p>å¼€å‘ä¸­é»˜è®¤çš„æ¨¡å¼ï¼Œå®ƒçš„ URL å¸¦ç€ä¸€ä¸ª#ã€‚<br>ç‰¹ç‚¹ï¼šhash å€¼ä¼šå‡ºç°åœ¨ URL é‡Œé¢ï¼Œä½†æ˜¯ä¸ä¼šå‡ºç°åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ã€‚æ‰€ä»¥æ”¹å˜ hash å€¼ï¼Œä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ã€‚<br>åŸç†ï¼š hash æ¨¡å¼çš„ä¸»è¦åŸç†å°±æ˜¯ç›‘å¬ onhashchange()äº‹ä»¶</p><h5 id="history-æ¨¡å¼"><a href="#history-æ¨¡å¼" class="headerlink" title="history æ¨¡å¼"></a>history æ¨¡å¼</h5><p>ä¼ ç»Ÿçš„è·¯ç”±åˆ†å‘æ¨¡å¼ï¼Œå³ç”¨æˆ·åœ¨è¾“å…¥ä¸€ä¸ª URL æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ¥æ”¶è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶è§£æè¿™ä¸ª URLï¼Œç„¶ååšå‡ºç›¸åº”çš„é€»è¾‘å¤„ç†ã€‚URL ä¸ä¼šå¸¦#ã€‚<br>ç‰¹ç‚¹ï¼šhistory æ¨¡å¼ä¸‹çš„æŸäº›è·¯å¾„å¦‚æœåå°æ²¡æœ‰é…ç½®ï¼ŒURL è¾“å…¥è®¿é—®æ—¶ä¼šè¿”å› 404ã€‚è§£å†³æ–¹æ³•ä¸ºéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šæ·»åŠ ä¸€ä¸ªç®€å•çš„å›é€€è·¯ç”±ã€‚<br>åŸç†ï¼šé€šè¿‡æŒ‰é’®è¿›è¡Œçš„è·¯ç”±è·³è½¬ç”¨ pushStateã€replaceState æ¥æ”¹å˜è·¯ç”±ä½†ä¸è§¦å‘åç«¯è¯·æ±‚ï¼Œå†ç”¨å›è°ƒå‡½æ•°è°ƒç”¨æ–°é¡µé¢ç»„ä»¶ï¼›ç‚¹å‡»æµè§ˆå™¨å‰è¿›åé€€æŒ‰é’®æ—¶ç›‘å¬ popstate äº‹ä»¶è¿›è¡Œé¡µé¢åˆ‡æ¢</p><h4 id="route-å’Œ-router-çš„åŒºåˆ«"><a href="#route-å’Œ-router-çš„åŒºåˆ«" class="headerlink" title="$route å’Œ$router çš„åŒºåˆ«"></a>$route å’Œ$router çš„åŒºåˆ«</h4><p>$route æ˜¯â€œè·¯ç”±ä¿¡æ¯å¯¹è±¡â€ï¼ŒåŒ…æ‹¬ pathï¼Œparamsï¼Œhashï¼Œqueryï¼ŒfullPathï¼Œmatchedï¼Œname ç­‰è·¯ç”±ä¿¡æ¯å‚æ•°<br>$router æ˜¯â€œè·¯ç”±å®ä¾‹â€å¯¹è±¡åŒ…æ‹¬äº†è·¯ç”±çš„è·³è½¬æ–¹æ³•ï¼Œé’©å­å‡½æ•°ç­‰ã€‚</p><h4 id="è·¯ç”±å®ˆå«"><a href="#è·¯ç”±å®ˆå«" class="headerlink" title="è·¯ç”±å®ˆå«"></a>è·¯ç”±å®ˆå«</h4><h5 id="å…¨å±€è·¯ç”±é’©å­"><a href="#å…¨å±€è·¯ç”±é’©å­" class="headerlink" title="å…¨å±€è·¯ç”±é’©å­"></a>å…¨å±€è·¯ç”±é’©å­</h5><p><strong>beforeEach</strong><br>è§¦å‘æ—¶æœºï¼šè¿›å…¥è·¯ç”±ä¹‹å‰<br>åº”ç”¨ï¼šç™»å½•æ€åˆ¤æ–­è·³è½¬<br><strong>beforeResolve</strong><br>è§¦å‘æ—¶æœºï¼šè¿›å…¥è·¯ç”±ä¹‹å‰ã€å¯ä»¥è®¿é—® route é…ç½®ä¸­è‡ªå®šä¹‰çš„ meta å˜é‡ã€‚åœ¨ beforeRouteEnter ä¹‹å<br>åº”ç”¨ï¼šé¡µé¢è®¿é—®æƒé™åˆ¤æ–­è·³è½¬<br><strong>afterEach</strong><br>è§¦å‘æ—¶æœºï¼šè¿›å…¥è·¯ç”±ä¹‹å<br>åº”ç”¨ï¼šè·³è½¬ä¹‹åæ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨</p><h5 id="å•ä¸ªè·¯ç”±é’©å­"><a href="#å•ä¸ªè·¯ç”±é’©å­" class="headerlink" title="å•ä¸ªè·¯ç”±é’©å­"></a>å•ä¸ªè·¯ç”±é’©å­</h5><p><strong>beforeEnter</strong><br>åœ¨è·¯ç”±é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ï¼ŒbeforeEnter å±æ€§å¯ä¼ å…¥å‡½æ•°æ•°ç»„<br>è§¦å‘æ—¶æœºï¼šåªåœ¨è¿›å…¥è·¯ç”±æ—¶è§¦å‘ï¼Œä¸ä¼šåœ¨ paramsã€query æˆ– hash æ”¹å˜æ—¶è§¦å‘ã€‚<br>åº”ç”¨ï¼šä¸ºä¸åŒçš„è·¯ç”±é…ç½®é‡å®šå‘é€»è¾‘</p><h5 id="è·¯ç”±ç»„ä»¶å†…é’©å­"><a href="#è·¯ç”±ç»„ä»¶å†…é’©å­" class="headerlink" title="è·¯ç”±ç»„ä»¶å†…é’©å­"></a>è·¯ç”±ç»„ä»¶å†…é’©å­</h5><p><strong>beforeRouteEnter</strong><br>è§¦å‘æ—¶æœº âˆ¶ è¿›å…¥ç»„ä»¶å‰è§¦å‘ï¼Œæ­¤æ—¶ç»„ä»¶æœªåˆ›å»ºï¼Œä¸èƒ½ç”¨ this<br><strong>beforeRouteUpdate</strong><br>è§¦å‘æ—¶æœº âˆ¶ å½“å‰åœ°å€æ”¹å˜å¹¶ä¸”æ”¹ç»„ä»¶è¢«å¤ç”¨æ—¶è§¦å‘ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ foo&#x2F;âˆ¶idï¼Œåœ¨ &#x2F;foo&#x2F;1 å’Œ &#x2F;foo&#x2F;2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ foo ç»„ä»¶ï¼Œè¿™ä¸ªé’©å­åœ¨è¿™ç§æƒ…å†µä¸‹å°±ä¼šè¢«è°ƒç”¨ã€‚å‘ç”Ÿåœ¨ beforeEnter å‰<br><strong>beforeRouteLeave</strong><br>è§¦å‘æ—¶æœº âˆ¶ ç¦»å¼€ç»„ä»¶è¢«è°ƒç”¨<br>åº”ç”¨ï¼šç¦»å¼€é¡µé¢å‰å¼¹å‡ºæç¤ºè¯­</p><h5 id="è·¯ç”±é’©å­æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„é¡ºåº"><a href="#è·¯ç”±é’©å­æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„é¡ºåº" class="headerlink" title="è·¯ç”±é’©å­æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„é¡ºåº"></a>è·¯ç”±é’©å­æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„é¡ºåº</h5><ol><li>å¯¼èˆªè¢«è§¦å‘ã€‚</li><li>åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteLeave å®ˆå«ã€‚</li><li>è°ƒç”¨å…¨å±€çš„ beforeEach å®ˆå«ã€‚</li><li>åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteUpdate å®ˆå«(2.2+)ã€‚</li><li>åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ beforeEnterã€‚</li><li>è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚</li><li>åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteEnterã€‚</li><li>è°ƒç”¨å…¨å±€çš„ beforeResolve å®ˆå«(2.5+)ã€‚</li><li>å¯¼èˆªè¢«ç¡®è®¤ã€‚</li><li>è°ƒç”¨å…¨å±€çš„ afterEach é’©å­ã€‚</li><li>è§¦å‘ DOM æ›´æ–°ã€‚</li><li>è°ƒç”¨ beforeRouteEnter å®ˆå«ä¸­ä¼ ç»™ next çš„å›è°ƒå‡½æ•°ï¼Œåˆ›å»ºå¥½çš„ç»„ä»¶å®ä¾‹ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚</li></ol><h3 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h3><p>ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚</p><h4 id="vuex-å±æ€§"><a href="#vuex-å±æ€§" class="headerlink" title="vuex å±æ€§"></a>vuex å±æ€§</h4><ul><li>stateï¼šæ•°æ®æºå­˜æ”¾åœ°</li><li>gettersï¼šä»åŸºæœ¬æ•°æ® state æ´¾ç”Ÿå‡ºæ¥çš„æ•°æ®ï¼Œstore çš„è®¡ç®—å±æ€§</li><li>mutationsï¼šåŒæ­¥æäº¤æ›´æ”¹æ•°æ®çš„æ–¹æ³•(ç›®çš„ï¼šæ–¹ä¾¿è°ƒè¯•)</li><li>actionsï¼šå¼‚æ­¥è°ƒç”¨ mutation æ–¹æ³•</li><li>moduleï¼šæ¨¡å—åŒ– vuex</li></ul><h4 id="vuex-vs-localStorage"><a href="#vuex-vs-localStorage" class="headerlink" title="vuex vs localStorage"></a>vuex vs localStorage</h4><ol><li>å­˜å‚¨ä½ç½®ï¼švuex å­˜å‚¨åœ¨å†…å­˜ï¼ŒlocalStorage åˆ™ä»¥æ–‡ä»¶çš„æ–¹å¼å­˜å‚¨åœ¨æœ¬åœ°</li><li>å­˜å‚¨å†…å®¹ï¼šlocalStorage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®</li><li>æŒä¹…æ€§ï¼šåˆ·æ–°é¡µé¢æ—¶ vuex å­˜å‚¨çš„å€¼ä¼šä¸¢å¤±ï¼Œlocalstorage ä¸ä¼š</li></ol><h3 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h3><p>å…¨æ–°çš„ Vue çŠ¶æ€ç®¡ç†åº“ï¼Œvuex çš„ä»£æ›¿è€…ã€‚</p><h4 id="pinia-ç‰¹ç‚¹"><a href="#pinia-ç‰¹ç‚¹" class="headerlink" title="pinia ç‰¹ç‚¹"></a>pinia ç‰¹ç‚¹</h4><ol><li>Vue2 å’Œ Vue3 éƒ½èƒ½æ”¯æŒ</li><li>æŠ›å¼ƒä¼ ç»Ÿçš„ mutation ï¼Œåªæœ‰ state, getter å’Œ action ï¼Œç®€åŒ–çŠ¶æ€ç®¡ç†åº“</li><li>ä¸éœ€è¦åµŒå¥—æ¨¡å—ï¼Œç¬¦åˆ Vue3 çš„ Composition apiï¼Œè®©ä»£ç æ‰å¹³åŒ–</li><li>TypeScript æ”¯æŒ</li></ol><h4 id="pinia-æ•°æ®ä¿®æ”¹"><a href="#pinia-æ•°æ®ä¿®æ”¹" class="headerlink" title="pinia æ•°æ®ä¿®æ”¹"></a>pinia æ•°æ®ä¿®æ”¹</h4><p><strong>ç®€å•æ•°æ®ä¿®æ”¹</strong>ï¼šç›´æ¥æ“ä½œ <code>store.å±æ€§å</code>è¿›è¡Œä¿®æ”¹<br><strong>å¤šæ¡æ•°æ®ä¿®æ”¹</strong>ï¼š</p><ol><li>ä½¿ç”¨$patch æ–¹æ³•ã€‚patch æ¥å—å¯¹è±¡å’Œå‡½æ•°ä½œä¸ºå…¥å‚ã€‚åœ¨æ¶‰åŠé›†åˆçš„ä¿®æ”¹(ä¾‹å¦‚ï¼Œä»æ•°ç»„ä¸­æ¨é€ã€ç§»é™¤ã€æ‹¼æ¥ä¸€ä¸ªå…ƒç´ )çš„æ“ä½œï¼Œä½¿ç”¨å¯¹è±¡çš„è¯­æ³•æ›´åŠ è€—æ—¶ï¼Œå®˜æ–¹æ–‡æ¡£æ¨èä½¿ç”¨å‡½æ•°ã€‚ä»£ç ç¤ºä¾‹ï¼š</li></ol><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">store</span>.$patch(&#123;<br>  var<span class="hljs-number">1</span>:<span class="hljs-keyword">store</span>.var<span class="hljs-number">1</span>++<span class="hljs-punctuation">,</span><br>  var<span class="hljs-number">2</span>:<span class="hljs-keyword">store</span>.var<span class="hljs-number">2</span>++<br>&#125;)<br><span class="hljs-keyword">store</span>.$patch((<span class="hljs-keyword">store</span>)<span class="hljs-operator">=</span>&gt;&#123;<br>  var<span class="hljs-number">1</span>:<span class="hljs-keyword">store</span>.var<span class="hljs-number">1</span>++<span class="hljs-punctuation">,</span><br>  var<span class="hljs-number">2</span>:<span class="hljs-keyword">store</span>.var<span class="hljs-number">2</span>++<br>&#125;)<br></code></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ store çš„ action æ–¹æ³•</li></ol><h2 id="Vue-é¡¹ç›®å¼€å‘æ³¨æ„äº‹é¡¹"><a href="#Vue-é¡¹ç›®å¼€å‘æ³¨æ„äº‹é¡¹" class="headerlink" title="Vue é¡¹ç›®å¼€å‘æ³¨æ„äº‹é¡¹"></a>Vue é¡¹ç›®å¼€å‘æ³¨æ„äº‹é¡¹</h2><h3 id="assets-å’Œ-static-çš„åŒºåˆ«"><a href="#assets-å’Œ-static-çš„åŒºåˆ«" class="headerlink" title="assets å’Œ static çš„åŒºåˆ«"></a>assets å’Œ static çš„åŒºåˆ«</h3><p>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯å­˜æ”¾é™æ€èµ„æºæ–‡ä»¶ã€‚<br>ä¸åŒç‚¹ï¼šassets ä¸­å­˜æ”¾çš„é™æ€èµ„æºæ–‡ä»¶åœ¨é¡¹ç›®æ‰“åŒ…æ—¶ä¼šè¿›è¡Œå‹ç¼©ä½“ç§¯ï¼Œä»£ç æ ¼å¼åŒ–æ“ä½œã€‚static æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åˆ™ä¸ä¼šã€‚</p><h3 id="Class-ä¸-Style-å¦‚ä½•åŠ¨æ€ç»‘å®š"><a href="#Class-ä¸-Style-å¦‚ä½•åŠ¨æ€ç»‘å®š" class="headerlink" title="Class ä¸ Style å¦‚ä½•åŠ¨æ€ç»‘å®š"></a>Class ä¸ Style å¦‚ä½•åŠ¨æ€ç»‘å®š</h3><p>ä½¿ç”¨å¯¹è±¡è¯­æ³•æˆ–æ•°ç»„è¯­æ³•è¿›è¡Œç»‘å®šã€‚è¿™é‡Œä»¥ class ä¸ºä¾‹ï¼Œstyle ç±»ä¼¼</p><ul><li>å¯¹è±¡è¯­æ³•</li></ul><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span>Â v-bind:<span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;&#123;Â active:Â isActive,Â &#x27;text-danger&#x27;:Â hasErrorÂ &#125;&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br><br>data:Â &#123;<br>Â Â isActive:Â <span class="hljs-literal">true</span>,<br>Â Â hasError:Â <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ•°ç»„è¯­æ³•</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;divÂ v-bind:<span class="hljs-keyword">class</span>=&quot;[<span class="hljs-symbol">isActive</span>Â ?Â <span class="hljs-symbol">activeClass</span>Â :Â &#x27;&#x27;,Â <span class="hljs-symbol">errorClass</span>]&quot;&gt;&lt;/<span class="hljs-symbol">div</span>&gt;<br><br><span class="hljs-symbol">data:Â </span>&#123;<br>Â Â activeClass:Â <span class="hljs-string">&#x27;active&#x27;</span>,<br>Â Â errorClass:Â <span class="hljs-string">&#x27;text-danger&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://juejin.cn/post/6964779204462247950/">ã€Œ2021ã€é«˜é¢‘å‰ç«¯é¢è¯•é¢˜æ±‡æ€»ä¹‹ Vue ç¯‡ï¼ˆä¸‹ï¼‰</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/7064368176846340132"> Vue è¿™ä¸€å—æ‹¿æäº†</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰ç«¯ vue æ¡†æ¶æ–¹é¢çŸ¥è¯†æ•´ç†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯åŸºç¡€" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="vue" scheme="https://unknown404.github.io/unkown404.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>ES7è£…é¥°å™¨è¯­æ³•</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/09/02/decorator/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/09/02/decorator/</id>
    <published>2022-09-02T07:50:56.000Z</published>
    <updated>2023-02-19T03:19:04.423Z</updated>
    
    <content type="html"><![CDATA[<p>è£…é¥°å™¨æ˜¯æ˜¯ä¸€ç§ä¸ç±»ï¼ˆclassï¼‰ç›¸å…³çš„è¯­æ³•ï¼Œç”¨æ¥æ³¨é‡Šæˆ–ä¿®æ”¹ç±»å’Œç±»æ–¹æ³•ã€‚è£…é¥°å™¨åœ¨ Python å’Œ Java ç­‰è¯­è¨€ä¸­ä¹Ÿè¢«å¤§é‡ä½¿ç”¨ã€‚ç›®å‰åœ¨å‰ç«¯æ¡†æ¶ Nestjs ä¹Ÿå·²ç»æœ‰åº”ç”¨ã€‚å› æ­¤æœ¬æ–‡ä¸»è¦è®°å½•è£…é¥°å™¨ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå¸®åŠ©ç†è§£ Nestjs ç¨‹åºã€‚</p><span id="more"></span><h2 id="è£…é¥°å™¨æ¨¡å¼"><a href="#è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼"></a>è£…é¥°å™¨æ¨¡å¼</h2><p>è£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œæ˜¯ä½œä¸ºå¯¹ç°æœ‰ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚<br>è£…é¥°å™¨æ˜¯é’ˆå¯¹è¿™ç§è®¾è®¡æ¨¡å¼çš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚å…¶ç”¨æ³•æ˜¯ï¼šä½¿ç”¨ @ ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œç´§è·Ÿè¿”å›è£…é¥°å™¨å‡½æ•°çš„è¡¨è¾¾å¼ï¼Œè¢«æ”¾ç½®åœ¨è¢«è£…é¥°ä»£ç å‰é¢ã€‚<br>ç”±äºè¯¥è¯­æ³•ç›®å‰è¿˜å¤„äºç¬¬ 2 é˜¶æ®µææ¡ˆä¸­ï¼Œä½¿ç”¨å®ƒä¹‹å‰éœ€è¦ä½¿ç”¨ Babel æ¨¡å—ç¼–è¯‘æˆ ES5 æˆ– ES6ã€‚</p><h2 id="è£…é¥°å™¨ç”¨æ³•"><a href="#è£…é¥°å™¨ç”¨æ³•" class="headerlink" title="è£…é¥°å™¨ç”¨æ³•"></a>è£…é¥°å™¨ç”¨æ³•</h2><p>è£…é¥°å™¨ä¸»è¦ç”¨äº:</p><ol><li>è£…é¥°ç±»</li><li>è£…é¥°æ–¹æ³•æˆ–å±æ€§</li></ol><h3 id="è£…é¥°ç±»"><a href="#è£…é¥°ç±»" class="headerlink" title="è£…é¥°ç±»"></a>è£…é¥°ç±»</h3><p>è£…é¥°ç±»çš„æ—¶å€™ï¼Œè£…é¥°å™¨æ–¹æ³•ä¸€èˆ¬ä¼šæ¥æ”¶ä¸€ä¸ªç›®æ ‡ç±»ä½œä¸ºå‚æ•°ã€‚</p><h4 id="babel-ç¼–è¯‘æƒ…å†µ"><a href="#babel-ç¼–è¯‘æƒ…å†µ" class="headerlink" title="babel ç¼–è¯‘æƒ…å†µ"></a>babel ç¼–è¯‘æƒ…å†µ</h4><p>ç¼–è¯‘å‰ï¼š</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@annotation</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> </span>&#123; &#125;<br><br><span class="hljs-function">function <span class="hljs-title">annotation</span><span class="hljs-params">(<span class="hljs-keyword">target</span>)</span> </span>&#123;<br>   <span class="hljs-keyword">target</span>.annotated = <span class="hljs-keyword">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘åï¼š</p><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ceylon">var <span class="hljs-number">_</span><span class="hljs-keyword">class</span>;<br><br><span class="hljs-keyword">let</span> MyClass = <span class="hljs-keyword">annotation</span>(<span class="hljs-number">_</span><span class="hljs-keyword">class</span> = <span class="hljs-keyword">class</span> MyClass &#123;&#125;) || <span class="hljs-number">_</span><span class="hljs-keyword">class</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-keyword">annotation</span>(target) &#123;<br>  target.annotated = true;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»ç¼–è¯‘çš„ç»“æœå¯ä»¥çœ‹å‡ºç±»è£…é¥°å™¨çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è¦è£…é¥°çš„ç±»ï¼Œå®ƒçš„åŠŸèƒ½å°±æ˜¯å¯¹ç±»è¿›è¡Œå¤„ç†ã€‚</p><h4 id="ç±»è£…é¥°å™¨çš„ä½œç”¨"><a href="#ç±»è£…é¥°å™¨çš„ä½œç”¨" class="headerlink" title="ç±»è£…é¥°å™¨çš„ä½œç”¨"></a>ç±»è£…é¥°å™¨çš„ä½œç”¨</h4><ol><li>ç»™ç›®æ ‡ç±»å¢åŠ é™æ€å±æ€§</li></ol><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> add<span class="hljs-constructor">Attribute(<span class="hljs-params">targetClass</span>)</span> &#123;<br>  targetClass.isUseDecorator = <span class="hljs-literal">true</span>;<br>&#125;<br><br>@addAttribute<br><span class="hljs-keyword">class</span> TargetClass &#123; &#125;<br><br>console.log(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">TargetClass</span>.</span></span>isUseDecorator); <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† addAttribute çš„è£…é¥°å™¨ï¼Œç”¨äºä¸º TargetClass æ·»åŠ é™æ€å±æ€§ isUseDecorator å¹¶è®¾ç½®ä¸º trueã€‚<br>å¦ä¸€æ–¹é¢ï¼Œç±»è£…é¥°å™¨å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ä¼ å…¥å‚æ•°ä¸ºé™æ€å±æ€§èµ‹å€¼ï¼Œåˆ©ç”¨è£…é¥°å™¨å·¥å‚æ¨¡å¼ã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-variable">function</span> <span class="hljs-title function_">addAttribute</span>(<span class="hljs-params">content</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable">function</span> <span class="hljs-title function_">decFn</span>(<span class="hljs-params">targetClass</span>) &#123;<br>    <span class="hljs-variable">targetClass</span>.<span class="hljs-property">content</span> <span class="hljs-operator">=</span> <span class="hljs-variable">content</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable">targetClass</span>;<br>  &#125;;<br>&#125;<br><br>@<span class="hljs-title function_">addAttribute</span>(&#x27;è¿™æ˜¯å†…å®¹ï½ï½ï½&#x27;)<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TargetClass</span> &#123; &#125;<br><br><span class="hljs-variable">console</span>.<span class="hljs-property">log</span>(<span class="hljs-title class_">TargetClass</span>.<span class="hljs-property">content</span>); <span class="hljs-comment">// è¿™æ˜¯å†…å®¹ï½ï½ï½</span><br></code></pre></td></tr></table></figure><p>è¯¥ç¤ºä¾‹å°±æ˜¯ä¸º TargetClass æ·»åŠ é™æ€å±æ€§ content å¹¶ç”¨ä¼ å…¥çš„å‚æ•°â€˜è¿™æ˜¯å†…å®¹ï½ï½ï½â€™ä¸º content èµ‹å€¼ã€‚è¿™ç§ä½¿ç”¨æ–¹æ³•æ›´åŠ çµæ´»ã€‚</p><ol start="2"><li>æ·»åŠ åŸå‹æ–¹æ³•<br>æ—¢ç„¶ç±»è£…é¥°å™¨æ¥æ”¶çš„å‚æ•°å°±æ˜¯ç±»å®šä¹‰æœ¬èº«ï¼Œé‚£ä¹ˆè¯¥è£…é¥°å™¨ä¹Ÿå¯ä»¥é€šè¿‡è®¿é—®ç±»çš„ prototype å±æ€§æ¥æ·»åŠ æˆ–ä¿®æ”¹åŸå‹æ–¹æ³•</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">targetClass</span>) &#123;<br>  targetClass.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">decFun</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;è¿™é‡Œæ˜¯è£…é¥°å™¨ decorator æ·»åŠ çš„åŸå‹æ–¹æ³• decFun~&#x27;</span>);<br>  &#125;;<br>&#125;<br><br>@decorator<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TargetClass</span> &#123; &#125;<br><br><span class="hljs-keyword">const</span> targetClass = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TargetClass</span>();<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(targetClass);<br>targetClass.<span class="hljs-title function_">decFun</span>();<br></code></pre></td></tr></table></figure><h3 id="è£…é¥°æ–¹æ³•å’Œå±æ€§"><a href="#è£…é¥°æ–¹æ³•å’Œå±æ€§" class="headerlink" title="è£…é¥°æ–¹æ³•å’Œå±æ€§"></a>è£…é¥°æ–¹æ³•å’Œå±æ€§</h3><h4 id="é¢„å¤‡çŸ¥è¯†ï¼šå±æ€§æè¿°ç¬¦"><a href="#é¢„å¤‡çŸ¥è¯†ï¼šå±æ€§æè¿°ç¬¦" class="headerlink" title="é¢„å¤‡çŸ¥è¯†ï¼šå±æ€§æè¿°ç¬¦"></a>é¢„å¤‡çŸ¥è¯†ï¼šå±æ€§æè¿°ç¬¦</h4><p>å±æ€§æè¿°ç¬¦è¡¨è¾¾äº†ä¸€ä¸ªå±æ€§çš„ç›¸å…³ä¿¡æ¯(å…ƒæ•°æ®ï¼‰,æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å±æ€§ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼šè®¿é—®å™¨å±æ€§å’Œæ•°æ®å±æ€§ã€‚</p><h5 id="è®¿é—®å™¨å±æ€§"><a href="#è®¿é—®å™¨å±æ€§" class="headerlink" title="è®¿é—®å™¨å±æ€§"></a>è®¿é—®å™¨å±æ€§</h5><p>ç‰¹ç‚¹ï¼šå½“ç»™å±æ€§èµ‹å€¼æˆ–è€…å–å€¼çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨çš„è¿è¡Œä¸€ä¸ªå‡½æ•°ã€‚<br>å…·æœ‰æè¿°ç¬¦å±æ€§ï¼šconfigurableã€enumerableã€getã€set</p><h5 id="æ•°æ®å±æ€§"><a href="#æ•°æ®å±æ€§" class="headerlink" title="æ•°æ®å±æ€§"></a>æ•°æ®å±æ€§</h5><p>ç‰¹ç‚¹ï¼šåœ¨æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå–å€¼å’Œèµ‹å€¼çš„æ—¶å€™ï¼Œè¯¥å±æ€§ç§°ä¹‹ä¸º æ•°æ®å±æ€§<br>å…·æœ‰æè¿°ç¬¦å±æ€§ï¼šconfigurableã€enumerableã€writableã€value<br>å¦‚ç¤ºä¾‹æ‰€ç¤ºï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> o = &#123;&#125;;<br>o.a = <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">// ç­‰åŒäº :</span><br><span class="hljs-built_in">Object</span>.defineProperty(o, <span class="hljs-string">&quot;a&quot;</span>, &#123;<br>  value : <span class="hljs-number">1</span>,<br>  writable : <span class="hljs-keyword">true</span>,<br>  configurable : <span class="hljs-keyword">true</span>,<br>  enumerable : <span class="hljs-keyword">true</span><br>&#125;);<br></code></pre></td></tr></table></figure><p>ä¸¤ç§å±æ€§å…±æœ‰çš„å±æ€§ä¸º configurable å’Œ enumerableã€‚<br>configurableï¼šæ˜¯å¦å¯é…ç½®ï¼Œé»˜è®¤ä¸º falseã€‚ä¸º true æ—¶ï¼Œè¡¨ç¤ºå½“å‰å±æ€§çš„â€˜å±æ€§è¡¨è¿°ç¬¦â€™å¯¹è±¡å¯ä»¥è¢«æ›´æ”¹ï¼Œè¯¥å±æ€§å¯ä»¥ä½¿ç”¨ delete åˆ é™¤<br>enumerableï¼šæ˜¯å¦å¯æšä¸¾ï¼Œé»˜è®¤ä¸º falseã€‚ä¸º true æ—¶ï¼Œè¡¨ç¤ºå½“å‰å±æ€§å¯ä»¥è¢«æšä¸¾ï¼Œä¹Ÿå°±æ˜¯å½“å‰å±æ€§æ˜¯å¦å¯ä»¥åœ¨ forâ€¦in å¾ªç¯å’Œ Object.keys() ä¸­è¢«éå†å‡ºæ¥</p><p>(value å’Œ writable)ä¸(get å’Œ set)æ˜¯ä¸å…±å­˜çš„ï¼Œåªè¦å®šä¹‰äº†å…¶ä¸­ä¸€ä¸ªï¼Œå°±å®šä¸‹æ¥äº†è¯¥æè¿°ç¬¦çš„æ€§è´¨æ˜¯æ•°æ®å±æ€§è¿˜æ˜¯è®¿é—®å™¨å±æ€§ã€‚</p><h4 id="babel-ç¼–è¯‘æƒ…å†µ-1"><a href="#babel-ç¼–è¯‘æƒ…å†µ-1" class="headerlink" title="babel ç¼–è¯‘æƒ…å†µ"></a>babel ç¼–è¯‘æƒ…å†µ</h4><p>æ ¹æ®<a href="https://github.com/mqyqingfeng/Blog/issues/109">ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨</a>,babel ç¼–è¯‘åçš„æ–¹æ³•è£…é¥°å™¨å¯ä»¥åˆ†ä¸º 3 ä¸ªå¤„ç†æ­¥éª¤ï¼š</p><ol><li>æ‹·è´éœ€è¦è£…é¥°çš„å±æ€§å…¶å¯¹åº”çš„å±æ€§æè¿°ç¬¦<br>ä½¿ç”¨ Object.getOwnPropertyDescriptor å¯ä»¥è·å¾—æŒ‡å®šå±æ€§çš„å±æ€§æè¿°ç¬¦ã€‚è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå±æ€§æ‰€åœ¨å¯¹è±¡å’Œè¦å–å¾—æè¿°çš„å±æ€§ã€‚<br>å…¶ä¸­ Babel çš„ Class ä¸ºäº†ä¸ decorator é…åˆè€Œäº§ç”Ÿäº†ä¸€ä¸ªå±æ€§ initializer</li><li>åº”ç”¨å¤šä¸ª decorators æ–¹æ³•ï¼šå½“åŒä¸€ä¸ªæ–¹æ³•ä½¿ç”¨å¤šä¸ªè£…é¥°å™¨æ¨¡å‹æ—¶ï¼Œéµä»æ´‹è‘±æ¨¡å‹ï¼Œä»å¤–åˆ°å†…è¿›å…¥ï¼Œç„¶åç”±å†…å‘å¤–æ‰§è¡Œ</li></ol><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">decorator1</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;decorator1&#x27;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">decFn1</span>(<span class="hljs-params">targetClass</span>) &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;decFn1&#x27;</span>);<br>    <span class="hljs-keyword">return</span> targetClass;<br>  &#125;;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">decorator2</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;decorator2&#x27;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">decFn2</span>(<span class="hljs-params">targetClass</span>) &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;decFn2&#x27;</span>);<br>    <span class="hljs-keyword">return</span> targetClass;<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡å¦‚å­˜åœ¨è£…é¥°å™¨ decorator1ã€decorator2ï¼Œä¿®é¥°åŒä¸€ä¸ªæ–¹æ³• targetFuncï¼Œå…¶è¾“å‡ºç»“æœä¸ºï¼š<code>decorator1-&gt;decorator2-&gt;decFn2-&gt;decFn1</code></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@decorator1</span>()<br><span class="hljs-variable">@decorator2</span>()<br>targetFunc()<br></code></pre></td></tr></table></figure><ol start="3"><li>å¤„ç†éœ€è¦è£…é¥°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå±æ€§æè¿°ç¬¦çš„è°ƒæ•´æœ€ç»ˆè¿˜æ˜¯ç”± Object.defineProperty æ¥å®ç°</li></ol><h4 id="æ–¹æ³•è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•"><a href="#æ–¹æ³•è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•" class="headerlink" title="æ–¹æ³•è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•"></a>æ–¹æ³•è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•</h4><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-function">function <span class="hljs-title">readonly</span><span class="hljs-params">(<span class="hljs-keyword">target</span>, name, descriptor)</span> </span>&#123;<br>  descriptor.writable = <span class="hljs-keyword">false</span>;<br>  <span class="hljs-keyword">return</span> descriptor;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-meta">@readonly</span><br>  name = <span class="hljs-string">&#x27;zhangsan&#x27;</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> Person();<br></code></pre></td></tr></table></figure><p>å¦‚ç¤ºä¾‹æ‰€ç¤ºï¼Œæ–¹æ³•è£…é¥°å™¨æ¥æ”¶çš„å…¥å‚åŒ Object.defineProperty ä¸€è‡´ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ï¼ˆobjï¼‰</li><li>è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§åæˆ– Symbolï¼ˆpropsï¼‰</li><li>è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ï¼ˆdescriptorï¼‰</li></ul><h2 id="è£…é¥°å™¨åº”ç”¨"><a href="#è£…é¥°å™¨åº”ç”¨" class="headerlink" title="è£…é¥°å™¨åº”ç”¨"></a>è£…é¥°å™¨åº”ç”¨</h2><h3 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h3><p>ä½¿ç”¨é«˜é˜¶å‡½æ•° connect æ—¶ï¼Œéœ€è¦å°†ä»£ç å†™æˆä»¥ä¸‹æ ¼å¼ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyReactComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(<span class="hljs-type">MyReactComponent</span>);<br></code></pre></td></tr></table></figure><p>è€Œä½¿ç”¨è£…é¥°å™¨åä»£ç å¯ç®€åŒ–ä¸ºï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@connect</span>(mapStateToProps, mapDispatchToProps)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyReactComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;&#125;;<br></code></pre></td></tr></table></figure><p>è¯­ä¹‰ä¹Ÿæ›´åŠ ç®€æ´æ˜äº†</p><h3 id="é˜²æŠ–å’ŒèŠ‚æµ"><a href="#é˜²æŠ–å’ŒèŠ‚æµ" class="headerlink" title="é˜²æŠ–å’ŒèŠ‚æµ"></a>é˜²æŠ–å’ŒèŠ‚æµ</h3><p>åœ¨é¢‘ç¹è§¦å‘äº‹ä»¶çš„åœºæ™¯ä¸‹ï¼Œä¸ºäº†æå‡æ€§èƒ½å¸¸ä¼šç”¨é˜²æŠ–å’ŒèŠ‚æµå‡½æ•°ï¼Œå…¶ç‰¹ç‚¹æ˜¯ä¼šè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ä¸ºäº†èƒ½åœ¨ç»„ä»¶é”€æ¯æ—¶èƒ½æœ‰æ•ˆè§£ç»‘äº‹ä»¶ï¼Œéœ€è¦ç”¨å˜é‡å°†åŒ¿åå‡½æ•°å­˜å‚¨èµ·æ¥ã€‚ä½†ä½¿ç”¨è£…é¥°å™¨è¯­æ³•åå°±ä¸éœ€è¦å†è®¾ç½®å¤šä½™çš„å˜é‡äº†ã€‚é˜²æŠ–è£…é¥°å™¨çš„å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//é˜²æŠ–å‡½æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">_debounce</span>(<span class="hljs-params">func, wait, immediate</span>) &#123;<br><br>    <span class="hljs-keyword">var</span> timeout;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> context = <span class="hljs-variable language_">this</span>;<br>        <span class="hljs-keyword">var</span> args = <span class="hljs-variable language_">arguments</span>;<br><br>        <span class="hljs-keyword">if</span> (timeout) <span class="hljs-built_in">clearTimeout</span>(timeout);<br>        <span class="hljs-keyword">if</span> (immediate) &#123;<br>            <span class="hljs-keyword">var</span> callNow = !timeout;<br>            timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>                timeout = <span class="hljs-literal">null</span>;<br>            &#125;, wait)<br>            <span class="hljs-keyword">if</span> (callNow) func.<span class="hljs-title function_">apply</span>(context, args)<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>                func.<span class="hljs-title function_">apply</span>(context, args)<br>            &#125;, wait);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//é˜²æŠ–è£…é¥°å™¨</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">wait, immediate</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDescriptor</span>(<span class="hljs-params">target, key, descriptor</span>) &#123;<br>    <span class="hljs-keyword">const</span> callback = descriptor.<span class="hljs-property">value</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyntaxError</span>(<span class="hljs-string">&#x27;Only functions can be debounced&#x27;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> fn = <span class="hljs-title function_">_debounce</span>(callback, wait, immediate)<br><br>    <span class="hljs-keyword">return</span> &#123;<br>      ...descriptor,<br>      <span class="hljs-title function_">value</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">fn</span>()<br>      &#125;<br>    &#125;;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨æ—¶åªéœ€è¦åœ¨ç›®æ ‡å‡½æ•°ä¸Šæ–¹æ·»åŠ @debounceï¼Œä¼ å…¥ç­‰å¾…æ—¶é—´å’Œæ˜¯å¦ç«‹å³å“åº”çš„å˜é‡å³å¯ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Toggle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;<br><br>  <span class="hljs-meta">@debounce</span>(<span class="hljs-number">500</span>, <span class="hljs-literal">true</span>)<br>  handleClick() &#123;<br>    console.log(&#x27;toggle&#x27;)<br>  &#125;<br><br>  render() &#123;<br>    <span class="hljs-keyword">return</span> (<br>      &lt;button onClick=&#123;<span class="hljs-keyword">this</span>.handleClick&#125;&gt;<br>        button<br>      &lt;/button&gt;<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>èŠ‚æµçš„å®ç°ä¹ŸåŸºæœ¬ç›¸ä¼¼ï¼Œè¿™é‡Œä¸å†åˆ—ä¸¾ã€‚</p><h2 id="TypeScript-è£…é¥°å™¨"><a href="#TypeScript-è£…é¥°å™¨" class="headerlink" title="TypeScript è£…é¥°å™¨"></a>TypeScript è£…é¥°å™¨</h2><p>åœ¨ TypeScript ä¸­ï¼Œå¯ä»¥å®ç°ä»¥ä¸‹äº”ç§è£…é¥°å™¨ï¼šç±»è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€è®¿é—®å™¨è£…é¥°å™¨ã€å‚æ•°è£…é¥°å™¨</p><h3 id="ç±»è£…é¥°å™¨"><a href="#ç±»è£…é¥°å™¨" class="headerlink" title="ç±»è£…é¥°å™¨"></a>ç±»è£…é¥°å™¨</h3><p>æ ¼å¼ï¼š</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs r"><span class="hljs-keyword">function</span> classDecorator<span class="hljs-operator">&lt;</span><span class="hljs-built_in">T</span> extends Constructor<span class="hljs-operator">&gt;</span><span class="hljs-punctuation">(</span>targetClass<span class="hljs-operator">:</span><span class="hljs-built_in">T</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">&#123;</span><br><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>å…¥å‚ï¼š<br>targetClass - ç±»æ„é€ å™¨</p><h3 id="æ–¹æ³•è£…é¥°å™¨"><a href="#æ–¹æ³•è£…é¥°å™¨" class="headerlink" title="æ–¹æ³•è£…é¥°å™¨"></a>æ–¹æ³•è£…é¥°å™¨</h3><p>æ ¼å¼ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> <span class="hljs-keyword">method</span><span class="hljs-constructor">Decorator(<span class="hljs-params">target</span>: Object, <span class="hljs-params">propertyName</span>: <span class="hljs-params">string</span>, <span class="hljs-params">propertyDescriptor</span>: PropertyDescriptor)</span> &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¥å‚ï¼š<br>target - å¦‚æœæ˜¯é™æ€æ–¹æ³•å°±æ˜¯ç±»çš„æ„é€ å™¨ï¼ˆTargetClassï¼‰ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•å°±æ˜¯ç±»çš„åŸå‹ï¼ˆTargetClass.prototypeï¼‰<br>propertyName - å‡½æ•°å<br>propertyDescriptor - å‡½æ•°çš„å±æ€§æè¿°ç¬¦</p><h3 id="å±æ€§è£…é¥°å™¨"><a href="#å±æ€§è£…é¥°å™¨" class="headerlink" title="å±æ€§è£…é¥°å™¨"></a>å±æ€§è£…é¥°å™¨</h3><p>æ ¼å¼ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> property<span class="hljs-constructor">Decorator(<span class="hljs-params">target</span>: Object, <span class="hljs-params">propertyName</span>: <span class="hljs-params">string</span>)</span> &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¥å‚ï¼š<br>target - å¦‚æœæ˜¯é™æ€æ–¹æ³•å°±æ˜¯ç±»çš„æ„é€ å™¨ï¼ˆTargetClassï¼‰ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•å°±æ˜¯ç±»çš„åŸå‹ï¼ˆTargetClass.prototypeï¼‰<br>propertyName - å±æ€§å</p><h3 id="å‚æ•°è£…é¥°å™¨"><a href="#å‚æ•°è£…é¥°å™¨" class="headerlink" title="å‚æ•°è£…é¥°å™¨"></a>å‚æ•°è£…é¥°å™¨</h3><p>æ ¼å¼ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> parameter<span class="hljs-constructor">Decorator(<span class="hljs-params">target</span>: Object, <span class="hljs-params">propertyName</span>: <span class="hljs-params">string</span>, <span class="hljs-params">index</span>: <span class="hljs-params">number</span>)</span> &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¥å‚ï¼š<br>target - å¦‚æœæ˜¯é™æ€æ–¹æ³•å°±æ˜¯ç±»çš„æ„é€ å™¨ï¼ˆTargetClassï¼‰ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•å°±æ˜¯ç±»çš„åŸå‹ï¼ˆTargetClass.prototypeï¼‰<br>propertyName - å‚æ•°å<br>index - å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„ä½ç½®</p><h3 id="è®¿é—®å™¨è£…é¥°å™¨"><a href="#è®¿é—®å™¨è£…é¥°å™¨" class="headerlink" title="è®¿é—®å™¨è£…é¥°å™¨"></a>è®¿é—®å™¨è£…é¥°å™¨</h3><p>æ ¼å¼ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> accessor<span class="hljs-constructor">Decorator(<span class="hljs-params">target</span>: Object, <span class="hljs-params">propertyName</span>: <span class="hljs-params">string</span>, <span class="hljs-params">propertyDescriptor</span>: PropertyDescriptor)</span> &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¥å‚ï¼š<br>target - å¦‚æœæ˜¯é™æ€æ–¹æ³•å°±æ˜¯ç±»çš„æ„é€ å™¨ï¼ˆTargetClassï¼‰ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•å°±æ˜¯ç±»çš„åŸå‹ï¼ˆTargetClass.prototypeï¼‰<br>propertyName - å±æ€§å<br>propertyDescriptor - å‡½æ•°çš„å±æ€§æè¿°ç¬¦</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://github.com/mqyqingfeng/Blog/issues/109">ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/7072883925764276254">Decorator è£…é¥°å™¨</a><br>ï¼ˆ3ï¼‰<a href="https://juejin.cn/post/6844904100144889864">éƒ½ 2020 å¹´äº†ï¼Œä½ è¿˜ä¸ä¼š JavaScript è£…é¥°å™¨</a><br>ï¼ˆ4ï¼‰<a href="https://juejin.cn/post/6996590290555371534">TypeScript è£…é¥°å™¨çš„åŸºæœ¬è¯­æ³•</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è£…é¥°å™¨æ˜¯æ˜¯ä¸€ç§ä¸ç±»ï¼ˆclassï¼‰ç›¸å…³çš„è¯­æ³•ï¼Œç”¨æ¥æ³¨é‡Šæˆ–ä¿®æ”¹ç±»å’Œç±»æ–¹æ³•ã€‚è£…é¥°å™¨åœ¨ Python å’Œ Java ç­‰è¯­è¨€ä¸­ä¹Ÿè¢«å¤§é‡ä½¿ç”¨ã€‚ç›®å‰åœ¨å‰ç«¯æ¡†æ¶ Nestjs ä¹Ÿå·²ç»æœ‰åº”ç”¨ã€‚å› æ­¤æœ¬æ–‡ä¸»è¦è®°å½•è£…é¥°å™¨ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå¸®åŠ©ç†è§£ Nestjs ç¨‹åºã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯æŠ€æœ¯ä½“ç³»" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB/"/>
    
    
    <category term="ES6" scheme="https://unknown404.github.io/unkown404.github.io/tags/ES6/"/>
    
    <category term="JavaScript" scheme="https://unknown404.github.io/unkown404.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ES6è¯­æ³•</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/08/29/es6/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/08/29/es6/</id>
    <published>2022-08-29T09:01:20.000Z</published>
    <updated>2023-02-19T03:19:04.423Z</updated>
    
    <content type="html"><![CDATA[<p>é¢è¯•æ—¶å¸¸é—®çš„ ES6 ç‰¹æ€§</p><span id="more"></span><h2 id="let-const"><a href="#let-const" class="headerlink" title="let,const"></a>let,const</h2><p>åˆ›å»ºå—çº§ä½œç”¨åŸŸï¼Œè‹¥è°ƒç”¨å‘ç”Ÿåœ¨å£°æ˜å‰ä¼šæš‚æ—¶æ€§æ­»åŒº<br>const æŒ‡å‘åœ°å€ä¸èƒ½æ”¹å˜ï¼Œä½†å¯ä»¥å¢åŠ å†…éƒ¨å±æ€§</p><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><p>ç‰¹ç‚¹ï¼šæ²¡æœ‰ this å’Œ argumentsï¼›ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼›æ²¡æœ‰å‡½æ•°æå‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123;<br> <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Tyler&#x27;</span>,<br> <span class="hljs-attr">a</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">let</span> name = <span class="hljs-string">&#x27;Anderson&#x27;</span><br>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">test</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>)<br>  &#125;<br>  <span class="hljs-title function_">test</span>()<br> &#125;,<br>&#125;<br>obj.<span class="hljs-title function_">a</span>()<br><br><span class="hljs-comment">// Tyler</span><br><span class="hljs-comment">// æ‰¾åˆ°æœ€è¿‘çš„éç®­å¤´å‡½æ•°aï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°çš„this å°±æ˜¯a çš„thisã€‚</span><br><span class="hljs-comment">// aç›®å‰æ˜¯ç”±objè°ƒç”¨çš„ï¼Œå› æ­¤æ­¤æ—¶ç®­å¤´å‡½æ•°çš„this ä¸ºobj</span><br></code></pre></td></tr></table></figure><h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p>ä½¿ç”¨æ–¹æ³•ï¼šconst proxy &#x3D; new Proxy(target, handler)<br>è¾“å…¥å‚æ•°ï¼š</p><ul><li>targetï¼šæ‹¦æˆªçš„ç›®æ ‡å¯¹è±¡</li><li>handlerï¼šå®šåˆ¶æ‹¦æˆªè¡Œä¸º</li></ul><h3 id="Proxy-ä¸-Object-defineProperty-å¯¹æ¯”"><a href="#Proxy-ä¸-Object-defineProperty-å¯¹æ¯”" class="headerlink" title="Proxy ä¸ Object.defineProperty å¯¹æ¯”"></a>Proxy ä¸ Object.defineProperty å¯¹æ¯”</h3><p>Proxy çš„ä¼˜ç‚¹ï¼š</p><ul><li>Proxy å¯ä»¥ç›´æ¥ç›‘å¬æ•´ä¸ªå¯¹è±¡è€Œéå±æ€§ã€‚</li><li>Proxy å¯ä»¥ç›´æ¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ã€‚</li><li>Proxy æœ‰ 13 ä¸­æ‹¦æˆªæ–¹æ³•ï¼Œå¦‚ ownKeysã€deletePropertyã€has ç­‰æ˜¯ Object.defineProperty ä¸å…·å¤‡çš„ã€‚</li><li>Proxy è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åªæ“ä½œæ–°çš„å¯¹è±¡è¾¾åˆ°ç›®çš„ï¼Œè€Œ Object.defineProperty åªèƒ½éå†å¯¹è±¡å±æ€§ç›´æ¥ä¿®æ”¹;</li><li>Proxy åšä¸ºæ–°æ ‡å‡†å°†å—åˆ°æµè§ˆå™¨äº§å•†é‡ç‚¹æŒç»­çš„æ€§èƒ½ä¼˜åŒ–,ä¹Ÿå°±æ˜¯ä¼ è¯´ä¸­çš„æ–°æ ‡å‡†çš„æ€§èƒ½çº¢åˆ©ã€‚</li></ul><p>Object.defineProperty çš„ä¼˜ç‚¹ï¼š</p><ul><li>å…¼å®¹æ€§å¥½ï¼Œæ”¯æŒ IE9ï¼Œè€Œ Proxy çš„å­˜åœ¨æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜,è€Œä¸”æ— æ³•ç”¨ polyfill ç£¨å¹³ã€‚</li></ul><p>Object.defineProperty çš„ç¼ºç‚¹ï¼š</p><ul><li>Object.defineProperty åªèƒ½åŠ«æŒå¯¹è±¡çš„å±æ€§,å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªå¯¹è±¡çš„æ¯ä¸ªå±æ€§è¿›è¡Œéå†ã€‚</li><li>Object.defineProperty ä¸èƒ½ç›‘å¬æ•°ç»„ã€‚æ˜¯é€šè¿‡é‡å†™æ•°æ®çš„é‚£ 7 ä¸ªå¯ä»¥æ”¹å˜æ•°æ®çš„æ–¹æ³•æ¥å¯¹æ•°ç»„è¿›è¡Œç›‘å¬çš„ã€‚</li><li>Object.defineProperty ä¹Ÿä¸èƒ½å¯¹ es6 æ–°äº§ç”Ÿçš„ Map,Set è¿™äº›æ•°æ®ç»“æ„åšå‡ºç›‘å¬ã€‚</li><li>Object.defineProperty ä¹Ÿä¸èƒ½ç›‘å¬æ–°å¢å’Œåˆ é™¤æ“ä½œï¼Œé€šè¿‡ Vue.set()å’Œ Vue.delete æ¥å®ç°å“åº”å¼çš„ã€‚</li></ul><h2 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h2><p>å¯¼å…¥å¯¼å‡ºæ–¹å¼ï¼šimportã€export</p><h3 id="commonJs-vs-ES6"><a href="#commonJs-vs-ES6" class="headerlink" title="commonJs vs ES6"></a>commonJs vs ES6</h3><ol><li>commonJs è¾“å‡ºæ˜¯å€¼çš„æ‹·è´ï¼Œes6 è¾“å‡ºå€¼çš„å¼•ç”¨</li><li>commonJs æ¨¡å—è¿è¡Œæ—¶åŠ è½½ï¼ˆå…ˆåŠ è½½å…¨éƒ¨æ¨¡å—å†å¯¼å…¥æ–¹æ³•ï¼‰ï¼Œes6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼ˆæŒ‡å®šåŠ è½½æŸè¾“å‡ºå€¼ï¼‰</li><li>commonJs åŒæ­¥å¯¼å…¥ï¼Œes6 æ¨¡å—å¼‚æ­¥å¯¼å…¥</li></ol><h3 id="å…¶ä»–æ¨¡å—åŒ–æ–¹æ³•ç‰¹ç‚¹"><a href="#å…¶ä»–æ¨¡å—åŒ–æ–¹æ³•ç‰¹ç‚¹" class="headerlink" title="å…¶ä»–æ¨¡å—åŒ–æ–¹æ³•ç‰¹ç‚¹"></a>å…¶ä»–æ¨¡å—åŒ–æ–¹æ³•ç‰¹ç‚¹</h3><p>amd å’Œ requireJsï¼šä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ<br>cmd å’Œ seaJsï¼šä¾èµ–åç½®ï¼Œå»¶è¿Ÿæ‰§è¡Œ<br>umdï¼šé€šç”¨æ¨¡å—å®šä¹‰è§„èŒƒ</p><h2 id="å¼‚æ­¥ç¼–ç¨‹"><a href="#å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹"></a>å¼‚æ­¥ç¼–ç¨‹</h2><h3 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h3><p>3 ç§çŠ¶æ€ï¼š1ï¼‰pendingï¼›2ï¼‰resolvedï¼›3ï¼‰rejected<br>ç‰¹ç‚¹ï¼š1ï¼‰ç«‹å³æ‰§è¡Œï¼›2ï¼‰then å¼‚æ­¥å›è°ƒï¼›3ï¼‰çŠ¶æ€ä¸å¯é€†ï¼›4ï¼‰é“¾å¼è°ƒç”¨</p><h4 id="promise-ç®€æ˜“å®ç°"><a href="#promise-ç®€æ˜“å®ç°" class="headerlink" title="promise ç®€æ˜“å®ç°"></a>promise ç®€æ˜“å®ç°</h4><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs pf">function myPromise(fn) &#123;<br>    <span class="hljs-keyword">const</span> that = this<br>    that.<span class="hljs-keyword">state</span> = &#x27;pending&#x27;<br>    that.value = null<br>    that.resolvedCallbacks = []<br>    that.rejectedCallbacks = []<br><br>    function resolve(value) &#123;<br>        if (that.<span class="hljs-keyword">state</span> === &#x27;pending&#x27;) &#123;<br>            that.<span class="hljs-keyword">state</span> = &#x27;resolved&#x27;<br>            that.value = value<br>            that.resolvedCallbacks.map(cb =&gt; cb(value))<br>        &#125;<br>    &#125;<br><br>    function reject(value) &#123;<br>        if (that.<span class="hljs-keyword">state</span> === &#x27;pending&#x27;) &#123;<br>            that.<span class="hljs-keyword">state</span> = &#x27;rejected&#x27;<br>            that.value = value<br>            that.rejectedCallbacks.map(cb =&gt; cb(value))<br>        &#125;<br>    &#125;<br>    try &#123;<br>        fn(resolve, reject)<br>    &#125; catch (e) &#123;<br>        reject(e)<br>    &#125;<br>&#125;<br>myPromise.prototype.then = function (<span class="hljs-keyword">on</span>Fulfilled, <span class="hljs-keyword">on</span>Rejected) &#123;<br>    <span class="hljs-keyword">const</span> that = this<br>    <span class="hljs-keyword">on</span>Fulfilled = typeof <span class="hljs-keyword">on</span>Fulfilled === &#x27;function&#x27; ? <span class="hljs-keyword">on</span>Fulfilled : v =&gt; v<br>    <span class="hljs-keyword">on</span>Rejected = typeof <span class="hljs-keyword">on</span>Rejected === &#x27;function&#x27; ? <span class="hljs-keyword">on</span>Rejected : e =&gt;<br>        throw e<br>    if (that.<span class="hljs-keyword">state</span> === &#x27;resolved&#x27;) <span class="hljs-keyword">on</span>Fulfilled(that.value)<br>    if (that.<span class="hljs-keyword">state</span> === &#x27;rejected&#x27;) <span class="hljs-keyword">on</span>Rejected(that.value)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="async-await"><a href="#async-await" class="headerlink" title="async await"></a>async await</h3><p>generator çš„è¯­æ³•ç³–ã€‚<br>async å£°æ˜ function æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚<br>await æ“ä½œç¬¦åªèƒ½åœ¨å¼‚æ­¥å‡½æ•° async function å†…éƒ¨ä½¿ç”¨ã€‚await ä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰å¾…æ¥åœ¨ await åé¢çš„è¡¨è¾¾å¼è¿”å› Promise å¯¹è±¡ç»“æœã€‚</p><h2 id="æ•°æ®ç±»å‹-Setã€Map"><a href="#æ•°æ®ç±»å‹-Setã€Map" class="headerlink" title="æ•°æ®ç±»å‹ Setã€Map"></a>æ•°æ®ç±»å‹ Setã€Map</h2><h3 id="Set-å’Œ-weakSetã€Map-å’Œ-WeakMap-åŒºåˆ«"><a href="#Set-å’Œ-weakSetã€Map-å’Œ-WeakMap-åŒºåˆ«" class="headerlink" title="Set å’Œ weakSetã€Map å’Œ WeakMap åŒºåˆ«"></a>Set å’Œ weakSetã€Map å’Œ WeakMap åŒºåˆ«</h3><p>weakSet ç»“æ„ä¸ Set ç±»ä¼¼ï¼Œæ˜¯ä¸é‡å¤å€¼é›†åˆï¼Œä½† weakSet åªèƒ½æ˜¯å¯¹è±¡ä¸”ä¸ºå¼±å¼•ç”¨ï¼Œä¸”ä¸å¯éå†<br>weakMap ç»“æ„ä¸ Map ç±»ä¼¼ï¼Œä½† weakMap åªæ¥å—å¯¹è±¡ä¸ºé”®åï¼Œé”®åæ˜¯å¯¹è±¡å¼±å¼•ç”¨ï¼Œä¸”ä¸å¯éå†</p><h3 id="Map-å’Œ-Object-çš„åŒºåˆ«"><a href="#Map-å’Œ-Object-çš„åŒºåˆ«" class="headerlink" title="Map å’Œ Object çš„åŒºåˆ«"></a>Map å’Œ Object çš„åŒºåˆ«</h3><p>1ï¼‰Key filedï¼šåœ¨ Object ä¸­ï¼Œ key å¿…é¡»æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼ˆæ•´æ•°ï¼Œå­—ç¬¦ä¸²æˆ–è€…æ˜¯ symbolï¼‰ï¼Œè€Œåœ¨ Map ä¸­åˆ™å¯ä»¥æ˜¯ JavaScript æ”¯æŒçš„æ‰€æœ‰æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç”¨ä¸€ä¸ª Object æ¥å½“åšä¸€ä¸ª Map å…ƒç´ çš„ keyã€‚<br>2ï¼‰å…ƒç´ é¡ºåºï¼šMap å…ƒç´ çš„é¡ºåºéµå¾ªæ’å…¥çš„é¡ºåºï¼Œè€Œ Object çš„åˆ™æ²¡æœ‰è¿™ä¸€ç‰¹æ€§ã€‚<br>3ï¼‰åˆå§‹åŒ–ã€å¢æŸ¥åˆ æ”¹æ–¹å¼</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;é¢è¯•æ—¶å¸¸é—®çš„ ES6 ç‰¹æ€§&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯åŸºç¡€" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="ES6" scheme="https://unknown404.github.io/unkown404.github.io/tags/ES6/"/>
    
    <category term="JavaScript" scheme="https://unknown404.github.io/unkown404.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ä¾èµ–åŒ…ç®¡ç†å·¥å…·æ¯”è¾ƒ</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/08/23/packageInfo/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/08/23/packageInfo/</id>
    <published>2022-08-23T14:06:42.000Z</published>
    <updated>2023-02-19T03:19:04.428Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ç«¯å¸¸ç”¨çš„åŒ…ä¾èµ–ç®¡ç†å·¥å…·æœ‰ npmã€yarn ä»¥åŠè¿‘æœŸéå¸¸å—æ¬¢è¿çš„ pnpmï¼Œæœ¬æ–‡ä¸»è¦ä¹Ÿæ˜¯å¯¹æ¯”è¿™å‡ ä¸ªå·¥å…·ä¹‹é—´çš„åŒºåˆ«ã€‚</p><span id="more"></span><h2 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h2><p>æœ€æ—©å‡ºç°çš„å®‰è£…åŒ…å·¥å…·ï¼Œ Node.js æ ‡å‡†çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚</p><h3 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h3><p>npm æ˜¯å›´ç»•ç€<a href="https://semver.org/">è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶ï¼ˆsemverï¼‰</a>çš„æ€æƒ³è€Œè®¾è®¡çš„ã€‚å¤§è‡´çš„å‡†åˆ™ä¸ºï¼š</p><ul><li>ç‰ˆæœ¬å·ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šmajor.minor.patchï¼Œå³ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è¡¥ç‰ˆæœ¬å·ã€‚<ul><li>ä¸»ç‰ˆæœ¬å·ï¼šæ›´æ”¹æ—¶ä»£è¡¨äº†ä¸€ä¸ªç ´åå…¼å®¹æ€§çš„å¤§å˜åŒ–ã€‚</li><li>æ¬¡ç‰ˆæœ¬å·ï¼šæ›´æ”¹æ—¶ä¸ä¼šç ´åä»»ä½•å†…å®¹ï¼Œå¢åŠ äº†æ–°åŠŸèƒ½ã€‚</li><li>ä¿®è¡¥ç‰ˆæœ¬å·ï¼šæ›´æ”¹æ—¶è¡¨ç¤ºåšäº†å‘åå…¼å®¹çš„ç¼ºé™·ä¿®å¤ã€‚</li></ul></li><li>ç‰ˆæœ¬æ˜¯ä¸¥æ ¼é€’å¢çš„ï¼Œå¦‚è¯¥ä¾‹æ‰€ç¤ºï¼š16.2.0 -&gt; 16.3.0 -&gt; 16.3.1</li><li>ä¿®è¡¥ç‰ˆæœ¬å·æœ‰æ—¶åé¢å¯èƒ½è¿˜ä¼šæœ‰å…ˆè¡Œç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ 1.0.0-alpha.1ã€‚å¸¸ç”¨çš„å…ˆè¡Œç‰ˆæœ¬ä¸€èˆ¬ä¸º alphaï¼ˆå†…éƒ¨å…ˆè¡Œç‰ˆï¼‰ï¼Œbetaï¼ˆå…¬å¼€æµ‹è¯•ç‰ˆï¼‰ï¼Œrcï¼ˆå€™é€‰ç‰ˆï¼‰ï¼Œstableï¼ˆç¨³å®šç‰ˆï¼‰</li></ul><h4 id="ç‰ˆæœ¬æ§åˆ¶ç¬¦"><a href="#ç‰ˆæœ¬æ§åˆ¶ç¬¦" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶ç¬¦"></a>ç‰ˆæœ¬æ§åˆ¶ç¬¦</h4><p>ä½¿ç”¨ npm install æ—¶ï¼Œä¼šå‘ç° package.json æ–‡ä»¶çš„ç‰ˆæœ¬å·å‰é¢é»˜è®¤å‡ºç°ç¬¦å·<code>^</code>ï¼Œè¯¥ç¬¦å·å³ä¸ºç‰ˆæœ¬æ§åˆ¶ç¬¦ã€‚å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶ç¬¦åŒ…æ‹¬ï¼š</p><ul><li><code>~</code> ä¼šåŒ¹é…æœ€è¿‘çš„å°ç‰ˆæœ¬ä¾èµ–åŒ…ï¼Œæ¯”å¦‚ ~1.2.3 ä¼šåŒ¹é…æ‰€æœ‰ 1.2.x ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬ 1.3.0</li><li><code>^ </code>ä¼šåŒ¹é…æœ€æ–°çš„å¤§ç‰ˆæœ¬ä¾èµ–åŒ…ï¼ˆnpm i é»˜è®¤çš„ç‰ˆæœ¬æ§åˆ¶ç¬¦ï¼‰ï¼Œæ¯”å¦‚ ^1.2.3 ä¼šåŒ¹é…æ‰€æœ‰ 1.x.x çš„åŒ…ï¼ŒåŒ…æ‹¬ 1.3.0ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬ 2.0.0</li><li><code>* </code>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ä¾èµ–åŒ…ï¼Œæ¯”å¦‚ *1.2.3 ä¼šåŒ¹é… x.x.x<br>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å…¶ä»–ç‰ˆæœ¬æ§åˆ¶æ–¹æ³•ï¼š</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs awk">&#123; <span class="hljs-string">&quot;dependencies&quot;</span> :<br>  &#123; <span class="hljs-string">&quot;foo&quot;</span> : <span class="hljs-string">&quot;1.0.0 - 2.9999.9999&quot;</span>,<span class="hljs-regexp">//</span> å¤§äºç­‰äº<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span> å°äº <span class="hljs-number">2.9999</span>.<span class="hljs-number">9999</span><br>  <span class="hljs-string">&quot;bar&quot;</span> : <span class="hljs-string">&quot;&gt;=1.0.2 &lt;2.1.2&quot;</span>, <span class="hljs-regexp">//</span> æ¯”è¾ƒæ¸…æ™°  å·¦é—­å³å¼€<br>  <span class="hljs-string">&quot;baz&quot;</span> : <span class="hljs-string">&quot;&gt;1.0.2 &lt;=2.3.4&quot;</span>, <span class="hljs-regexp">//</span> å·¦å¼€å³é—­<br>  <span class="hljs-string">&quot;boo&quot;</span> : <span class="hljs-string">&quot;2.0.1&quot;</span>, <span class="hljs-regexp">//</span> è§„å®šç‰ˆæœ¬<br>  <span class="hljs-string">&quot;qux&quot;</span> : <span class="hljs-string">&quot;&lt;1.0.0 || &gt;=2.3.1 &lt;2.4.5 || &gt;=2.5.2 &lt;3.0.0&quot;</span>, <span class="hljs-regexp">//</span> è¡¨è¾¾å¼ä¹Ÿç®—æ¸…æ™°<br>  <span class="hljs-string">&quot;asd&quot;</span> : <span class="hljs-string">&quot;http://asdf.com/asdf.tar.gz&quot;</span>, <span class="hljs-regexp">//</span> æŒ‡å®šä¸‹è½½åœ°å€ä»£æ›¿ç‰ˆæœ¬<br>  <span class="hljs-string">&quot;til&quot;</span> : <span class="hljs-string">&quot;^1.2.3&quot;</span>, <span class="hljs-regexp">//</span> åŒä¸€ä¸»ç‰ˆæœ¬å·ï¼Œä¸å°äº<span class="hljs-number">1.2</span>.<span class="hljs-number">3</span> å³ <span class="hljs-number">1</span>.x.y  x&gt;=<span class="hljs-number">2</span> y&gt;=<span class="hljs-number">3</span><br>  <span class="hljs-string">&quot;elf&quot;</span> : <span class="hljs-string">&quot;~1.2.3&quot;</span>,  <span class="hljs-regexp">//</span> åŒä¸€ä¸»ç‰ˆæœ¬å’Œæ¬¡ç‰ˆæœ¬å· å³<span class="hljs-number">1.2</span>.x x&gt;= <span class="hljs-number">2</span><br>  <span class="hljs-string">&quot;two&quot;</span> : <span class="hljs-string">&quot;2.x&quot;</span> , <span class="hljs-regexp">//</span> è¿™ä¸ªæ¯”è¾ƒå½¢è±¡ï¼Œx&gt;=<span class="hljs-number">0</span>  å³<span class="hljs-number">2.0</span>.<span class="hljs-number">0</span> ä»¥ä¸Šå‡å¯<br>  <span class="hljs-string">&quot;thr&quot;</span> : <span class="hljs-string">&quot;3.3.x&quot;</span> , <span class="hljs-regexp">//</span> åŒä¸Š x&gt;= <span class="hljs-number">0</span>  å³<span class="hljs-number">3.3</span>.<span class="hljs-number">0</span> ä»¥ä¸Š<br>  <span class="hljs-string">&quot;lat&quot;</span> : <span class="hljs-string">&quot;latest&quot;</span>,  <span class="hljs-regexp">//</span> æœ€æ–°ç‰ˆæœ¬<br>  <span class="hljs-string">&quot;dyl&quot;</span> : <span class="hljs-string">&quot;file:../dyl&quot;</span>,  <span class="hljs-regexp">//</span> ä»æœ¬åœ°ä¸‹è½½<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="package-lock-json"><a href="#package-lock-json" class="headerlink" title="package-lock.json"></a>package-lock.json</h4><p>æ—©æœŸçš„ npm æ²¡æœ‰é”å®šåŒ…ç‰ˆæœ¬çš„åŠŸèƒ½ï¼Œå¦‚æœæŸä¸ªä¾èµ–åŒ…å‘å¸ƒäº†ä¸å…¼å®¹æˆ–è€…æœ‰ bug ç‰ˆæœ¬ï¼Œéƒ¨ç½²ä¸Šçº¿æ—¶é¡¹ç›®å°±å¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜ã€‚é’ˆå¯¹è¿™ä¸€é—®é¢˜ yarn æå‡ºäº†å›ºåŒ–ç‰ˆæœ¬çš„æ–¹æ¡ˆï¼Œè€Œ npm åœ¨^5.x.x.x ä»¥åæ‰æœ‰çš„ package-lock.jsonã€‚<br>ä¸åŒç‰ˆæœ¬ npm å¯¹ package-lock.json çš„å®ç°æ˜¯ä¸åŒçš„ã€‚æ˜¯åœ¨ä¸€ç›´è¿­ä»£å’Œå‘å±•çš„ï¼š</p><ol><li>npm 5.0.x ç‰ˆæœ¬ï¼Œä¸ç®¡ package.json æ€ä¹ˆå˜ï¼Œnpm i æ—¶éƒ½ä¼šæ ¹æ® lock æ–‡ä»¶ä¸‹è½½ã€‚</li><li>5.1.0 ç‰ˆæœ¬å npm install ä¼šæ— è§† lock æ–‡ä»¶ å»ä¸‹è½½æœ€æ–°çš„ npm åŒ…</li><li>5.4.2 ç‰ˆæœ¬å¦‚æœæ”¹äº† package.jsonï¼Œä¸” package.json å’Œ lock æ–‡ä»¶ä¸åŒï¼Œé‚£ä¹ˆæ‰§è¡Œ npm i æ—¶ npm ä¼šæ ¹æ® package ä¸­çš„ç‰ˆæœ¬å·ä»¥åŠè¯­ä¹‰å«ä¹‰å»ä¸‹è½½æœ€æ–°çš„åŒ…ï¼Œå¹¶æ›´æ–°è‡³ lockã€‚<br>å¦‚æœä¸¤è€…æ˜¯åŒä¸€çŠ¶æ€ï¼Œé‚£ä¹ˆæ‰§è¡Œ npm i éƒ½ä¼šæ ¹æ® lock ä¸‹è½½ï¼Œä¸ä¼šç†ä¼š package å®é™…åŒ…çš„ç‰ˆæœ¬æ˜¯å¦æœ‰æ–°ã€‚</li></ol><p>package-lock.json çš„æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs perl">...<br><span class="hljs-string">&quot;@ant-design/colors&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;4.0.5&quot;</span>,<br>    <span class="hljs-string">&quot;resolved&quot;</span>: <span class="hljs-string">&quot;http://npm.internal.focus.cn:80/@ant-design%2fcolors/-/colors-4.0.5.tgz&quot;</span>,<br>    <span class="hljs-string">&quot;integrity&quot;</span>: <span class="hljs-string">&quot;sha1-19EA11Rcyo9iSVRgSmiS/Ei6Wq4=&quot;</span>,<br>    <span class="hljs-string">&quot;requires&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;tinycolor2&quot;</span>: <span class="hljs-string">&quot;^1.4.1&quot;</span><br>    &#125;<br>&#125;,<br><span class="hljs-string">&quot;@ant-design/icons&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;4.6.2&quot;</span>,<br>    <span class="hljs-string">&quot;resolved&quot;</span>: <span class="hljs-string">&quot;https://registry.npmjs.org/@ant-design/icons/-/icons-4.6.2.tgz&quot;</span>,<br>    <span class="hljs-string">&quot;integrity&quot;</span>: <span class="hljs-string">&quot;sha512-QsBG2BxBYU/rxr2eb8b2cZ4rPKAPBpzAR+0v6rrZLp/lnyvflLH3tw1vregK+M7aJauGWjIGNdFmUfpAOtw25A==&quot;</span>,<br>    <span class="hljs-string">&quot;requires&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;@ant-design/colors&quot;</span>: <span class="hljs-string">&quot;^6.0.0&quot;</span>,<br>    <span class="hljs-string">&quot;@ant-design/icons-svg&quot;</span>: <span class="hljs-string">&quot;^4.0.0&quot;</span>,<br>    <span class="hljs-string">&quot;@babel/runtime&quot;</span>: <span class="hljs-string">&quot;^7.11.2&quot;</span>,<br>    <span class="hljs-string">&quot;classnames&quot;</span>: <span class="hljs-string">&quot;^2.2.6&quot;</span>,<br>    <span class="hljs-string">&quot;rc-util&quot;</span>: <span class="hljs-string">&quot;^5.9.4&quot;</span><br>    &#125;,<br>    <span class="hljs-string">&quot;dependencies&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;@ant-design/colors&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;6.0.0&quot;</span>,<br>        <span class="hljs-string">&quot;resolved&quot;</span>: <span class="hljs-string">&quot;https://registry.npmjs.org/@ant-design/colors/-/colors-6.0.0.tgz&quot;</span>,<br>        <span class="hljs-string">&quot;integrity&quot;</span>: <span class="hljs-string">&quot;sha512-qAZRvPzfdWHtfameEGP2Qvuf838NhergR35o+EuVyB5XvSA98xod5r4utvi4TJ3ywmevm290g9nsCG5MryrdWQ==&quot;</span>,<br>        <span class="hljs-string">&quot;requires&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;@ctrl/tinycolor&quot;</span>: <span class="hljs-string">&quot;^3.4.0&quot;</span><br>        &#125;<br>    &#125;<br>    &#125;<br>&#125;,<br>...<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®‰è£…åŒ…éœ€è¦çš„ä¾èµ–åŒ…ï¼Œå¦‚æœé¡¶çº§ä¾èµ–æ»¡è¶³éœ€æ±‚çš„ï¼Œåˆ™ä¸å†å®‰è£…ï¼Œä»…æœ‰ requires å±æ€§ï¼›å¦‚æœä¸æ»¡è¶³ï¼Œåˆ™ä¼šåœ¨å¯¹åº”æ–‡ä»¶å¤¹ä¸‹é¢æ ¹æ®ä¾èµ–å®‰è£…ç¬¦åˆç‰ˆæœ¬ï¼Œå¦‚ä¸Šé¢çš„æ–‡ä»¶é‡Œçš„@ant-design&#x2F;iconsï¼Œå†…éƒ¨ä»æœ‰ dependencies å±æ€§ã€‚</p><h3 id="ä¾èµ–å…³ç³»"><a href="#ä¾èµ–å…³ç³»" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h3><h4 id="npm-2-x"><a href="#npm-2-x" class="headerlink" title="npm 2.x"></a>npm 2.x</h4><p>npm2.x ç‰ˆæœ¬å®‰è£…ä¾èµ–åŒ…æ—¶ä¼šå®‰è£…æ¯ä¸€ä¸ªåŒ…æ‰€ä¾èµ–çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä¾èµ–é¡¹çš„ä¾èµ–åŒ…ä¹Ÿä¼šå®‰è£…åœ¨å…¶ node_modules ç›®å½•ä¸‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå³ node_modules å­˜åœ¨åµŒå¥—ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">.</span><br><span class="hljs-bullet"></span>â””â”€â”€node<span class="hljs-emphasis">_modules</span><br><span class="hljs-emphasis">        â”œâ”€â”€test1</span><br><span class="hljs-emphasis">        â””â”€â”€test2</span><br><span class="hljs-emphasis">            â””â”€â”€node_</span>modules<br><span class="hljs-code">                    â””â”€â”€test3</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·çš„å¤„ç†æ–¹å¼é€ æˆäº†ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>å¤šä¸ªåŒ…ä¹‹é—´éš¾å…ä¼šæœ‰å…¬å…±çš„ä¾èµ–ï¼Œè¿™æ ·åµŒå¥—çš„è¯ï¼ŒåŒæ ·çš„ä¾èµ–ä¼šå¤åˆ¶å¾ˆå¤šæ¬¡ï¼Œä¼šå æ®æ¯”è¾ƒå¤§çš„ç£ç›˜ç©ºé—´ã€‚</li><li>windows çš„æ–‡ä»¶è·¯å¾„æœ€é•¿æ˜¯ 260 å¤šä¸ªå­—ç¬¦ï¼Œè¿™æ ·åµŒå¥—æ˜¯ä¼šè¶…è¿‡ windows è·¯å¾„çš„é•¿åº¦é™åˆ¶çš„ã€‚</li></ol><h4 id="npm-3"><a href="#npm-3" class="headerlink" title="npm 3+"></a>npm 3+</h4><p>åŒ yarn ä¸€æ ·é‡‡ç”¨äº†æ‰å¹³åŒ–ä¾èµ–çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚ä¸ä¹‹å‰çš„ç›®å½•ç›¸æ¯”ï¼Œç°åœ¨çš„æ–‡ä»¶å¤¹ç»“æ„æ›´æ¥è¿‘äº</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">.</span><br><span class="hljs-bullet"></span>â””â”€â”€node_modules<br><span class="hljs-code">        â”œâ”€â”€test1</span><br><span class="hljs-code">        â”œâ”€â”€test2</span><br><span class="hljs-code">        â””â”€â”€test3</span><br></code></pre></td></tr></table></figure><p>æ‰€æœ‰çš„ä¾èµ–éƒ½è¢«æ‹å¹³åˆ° node_modules ç›®å½•ä¸‹ï¼Œä¸å†æœ‰å¾ˆæ·±å±‚æ¬¡çš„åµŒå¥—å…³ç³»ã€‚è¿™æ ·åœ¨å®‰è£…æ–°çš„åŒ…æ—¶ï¼Œæ ¹æ® node require æœºåˆ¶ï¼Œä¼šä¸åœå¾€ä¸Šçº§çš„ node_modules å½“ä¸­å»æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ç›¸åŒç‰ˆæœ¬çš„åŒ…å°±ä¸ä¼šé‡æ–°å®‰è£…ï¼Œè§£å†³äº†å¤§é‡åŒ…é‡å¤å®‰è£…çš„é—®é¢˜ï¼Œè€Œä¸”ä¾èµ–å±‚çº§ä¹Ÿä¸ä¼šå¤ªæ·±ã€‚<br>ä½†æ‰å¹³åŒ–ä¾èµ–æ–¹æ³•å­˜åœ¨çš„é—®é¢˜åŒ…æ‹¬ï¼š</p><ul><li>ä¾èµ–ç»“æ„çš„ä¸ç¡®å®šæ€§ã€‚</li><li>æ‰å¹³åŒ–ç®—æ³•æœ¬èº«çš„å¤æ‚æ€§å¾ˆé«˜ï¼Œè€—æ—¶è¾ƒé•¿ã€‚</li><li>é¡¹ç›®ä¸­ä»ç„¶å¯ä»¥éæ³•è®¿é—®æ²¡æœ‰å£°æ˜è¿‡ä¾èµ–çš„åŒ…<br>ä¾èµ–ç»“æ„çš„ä¸ç¡®å®šæ€§æ˜¯å¦‚æœå£°æ˜çš„ä¾èµ–åŒ… test1ã€test2 åŒæ—¶ä¾èµ–å¦ä¸€ä¸ªåŒ… test3ï¼Œä½†æ˜¯æ˜¯ä¸åŒç‰ˆæœ¬çš„æ—¶å€™ï¼Œæ‰å¹³åŒ–çš„ç»“æœå¯èƒ½æœ‰ä¸¤ç§ã€‚</li></ul><p><em>npm2.x ä¸‹ test1ã€test2 ä¾èµ–åŒ…ç»“æ„</em></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs 1c">.<br>â””â”€â”€node_modules<br>        â”œâ”€â”€test1<br>        <span class="hljs-string">|   â””â”€â”€node_modules</span><br>        <span class="hljs-string">|           â””â”€â”€test3@1.0.1</span><br>        â””â”€â”€test2<br>            â””â”€â”€node_modules<br>                    â””â”€â”€test3@<span class="hljs-number">1.0</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p><em>npm3+ä¸‹ test1ã€test2 å®‰è£…ç»“æœ 1</em></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs 1c">.<br>â””â”€â”€node_modules<br>        â”œâ”€â”€test1<br>        â””â”€â”€test2<br>        <span class="hljs-string">|   â””â”€â”€node_modules</span><br>        <span class="hljs-string">|           â””â”€â”€test3@1.0.2</span><br>        â””â”€â”€test3@<span class="hljs-number">1.0</span>.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><em>npm3+ä¸‹ test1ã€test2 å®‰è£…ç»“æœ 2</em></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs 1c">.<br>â””â”€â”€node_modules<br>        â”œâ”€â”€test1<br>        <span class="hljs-string">|   â””â”€â”€node_modules</span><br>        <span class="hljs-string">|           â””â”€â”€test3@1.0.1</span><br>        â”œâ”€â”€test2<br>        â””â”€â”€test3@<span class="hljs-number">1.0</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>ä¸¤ç§ç»“æœéƒ½æœ‰å¯èƒ½å­˜åœ¨ï¼Œå®é™…å®‰è£…æ—¶å–å†³äº test1 å’Œ test2 åœ¨ package.json ä¸­çš„ä½ç½®ï¼Œå¦‚æœ test1 å£°æ˜åœ¨å‰é¢ï¼Œé‚£ä¹ˆå°±æ˜¯å‰é¢çš„ç»“æ„ï¼Œå¦åˆ™æ˜¯åé¢çš„ç»“æ„ã€‚<br>ä¸ºäº†è§£å†³ä¾èµ–ç»“æ„çš„ä¸ç¡®å®šæ€§çš„é—®é¢˜ï¼Œnpm 5.x æ¨å‡º package-lock.jsonï¼Œä¿è¯ç¬¬ä¸€æ¬¡å®‰è£…ä»¥å node_modules ä»¥ååœ¨æ·»åŠ ä¾èµ–æˆ–è€…é‡è£…æ—¶ä¹Ÿä¸ä¼šå˜ã€‚</p><h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h2><p>yarn æ˜¯åœ¨ npm2.x ç‰ˆæœ¬æ²¡æœ‰å¾ˆå¥½çš„ä¼˜åŒ–æ–¹æ¡ˆæ—¶æå‡ºçš„ï¼Œä¸»è¦ç”¨äºè§£å†³åµŒå¥—è¶…è¿‡ windows è·¯å¾„çš„é•¿åº¦é™åˆ¶çš„ node_modulesã€‚è™½ç„¶ç°åœ¨ npm ä¹Ÿæ—¥ç›Šè¶‹åŒ yarnï¼Œä½†åœ¨å®‰è£…é€Ÿåº¦ä¸Š yarn è¿˜æ˜¯ä¼˜äº npm</p><h3 id="ç‰ˆæœ¬æ§åˆ¶-1"><a href="#ç‰ˆæœ¬æ§åˆ¶-1" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h3><p>é»˜è®¤ä¾èµ–éƒ½ä¼šç”Ÿæˆ yarn.lock æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¼šé€šè¿‡åŒ…å+ç‰ˆæœ¬æ¥ç¡®å®šå…·ä½“ä¿¡æ¯ã€‚<br>yarn.lock æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼Œyarn ç”¨çš„æ˜¯è‡ªå·±è®¾è®¡çš„æ ¼å¼ï¼Œè¯­æ³•ä¸Šæœ‰ç‚¹åƒ YAMLï¼Œ# å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šã€‚ä¾èµ–çš„ä¾èµ–ä¸ä¼šè¢«è®°å½•åœ¨ dependenciesï¼Œä¾èµ–åŒ…çš„ä¾èµ–ç‰ˆæœ¬å¦‚æœä¸å­˜åœ¨è¯­ä¹‰å†²çªåˆ™ä¼šåˆå¹¶ä¿¡æ¯</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-string">&quot;@angular-devkit/core@12.2.10&quot;</span>:<br>  version <span class="hljs-string">&quot;12.2.10&quot;</span><br>  resolved <span class="hljs-string">&quot;http://npm.internal.focus.cn:80/@angular-devkit%2fcore/-/core-12.2.10.tgz#3da62eceef3904f92cd3f860618b4ae513029ce2&quot;</span><br>  integrity sha1-PaYuzu85BPks<span class="hljs-number">0</span>/hgYYtK5RMCnOI=<br>  dependencies:<br>    ajv <span class="hljs-string">&quot;8.6.2&quot;</span><br>    ajv-formats <span class="hljs-string">&quot;2.1.0&quot;</span><br>    fast-json-stable-stringify <span class="hljs-string">&quot;2.1.0&quot;</span><br>    magic-string <span class="hljs-string">&quot;0.25.7&quot;</span><br>    rxjs <span class="hljs-string">&quot;6.6.7&quot;</span><br>    source-<span class="hljs-keyword">map</span> <span class="hljs-string">&quot;0.7.3&quot;</span><br></code></pre></td></tr></table></figure><p>Yarn ä»…ä»¥ flatten æ ¼å¼ æè¿°å„ä¸ªåŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ä¾èµ–äºå…¶å½“å‰å®ç°æ¥åˆ›å»ºç›®å½•ç»“æ„ã€‚è¿™æ„å‘³ç€å¦‚æœå…¶å†…éƒ¨ç®—æ³•å‘ç”Ÿå˜åŒ–ï¼Œç»“æ„ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><h3 id="ä¾èµ–å…³ç³»-1"><a href="#ä¾èµ–å…³ç³»-1" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h3><p>åŒ npm åŸºæœ¬ä¸€æ ·ï¼Œå…¶å…±æœ‰çš„é—®é¢˜æ˜¯ï¼šå¦‚æœä½ æœ‰ 100 ä¸ªé¡¹ç›®ä½¿ç”¨äº†æŸä¸ªä¾èµ–ï¼ˆdependencyï¼‰ï¼Œå°±ä¼šæœ‰ 100 ä»½è¯¥ä¾èµ–çš„å‰¯æœ¬ä¿å­˜åœ¨ç¡¬ç›˜ä¸Š</p><h2 id="pnpm"><a href="#pnpm" class="headerlink" title="pnpm"></a>pnpm</h2><p>åŒ npm å’Œ Yarnï¼Œéƒ½å±äº Javascript åŒ…ç®¡ç†å®‰è£…å·¥å…·ï¼Œå®ƒè¾ƒ npm å’Œ Yarn åœ¨æ€§èƒ½ä¸Šå¾—åˆ°å¾ˆå¤§æå‡ï¼Œè¢«ç§°ä¸ºå¿«é€Ÿçš„ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´çš„åŒ…ç®¡ç†å·¥å…·ã€‚</p><h3 id="ä¾èµ–å…³ç³»-2"><a href="#ä¾èµ–å…³ç³»-2" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h3><p>ä¸ºäº†è§£å†³ npmã€yarn å®‰è£…æ—¶ä¾èµ–å¯èƒ½å¤åˆ¶å¤šæ¬¡ã€å ç”¨ç£ç›˜ç©ºé—´çš„é—®é¢˜ï¼Œpnpm é‡‡ç”¨äº†å…¨å±€ä»“åº“ä¿å­˜ä¾èµ–ã€é¡¹ç›®é€šè¿‡ link çš„æ–¹å¼è®¿é—®å†…å®¹ã€‚<br><img src="/unkown404.github.io/img/pnpm.png"></p><p>å½“æ‰§è¡Œ pnpm install æ—¶ï¼Œé¡¹ç›®çš„ node_modules æ–‡ä»¶å¤¹ä¸‹é™¤äº†å®‰è£…çš„åŒ…å barã€å…¶ä¾èµ–ä¿æŒåŸæœ‰çš„æ ‘çŠ¶ã€ä¸è¿›è¡Œæå‡ï¼Œè¿˜ä¼šæœ‰.pnpm ç›®å½•ï¼Œç›®å½•ä¸‹æ˜¯ä»¥å±•å¹³ç»“æ„ç®¡ç†æ¯ä¸ªç‰ˆæœ¬åŒ…çš„æºç å†…å®¹ï¼Œä»¥ç¡¬é“¾æ¥æ–¹å¼æŒ‡å‘ pnpm-store ä¸­çš„æ–‡ä»¶åœ°å€ã€‚pnpm-store æ˜¯å…¨å±€çš„ storeï¼Œå­˜å‚¨æ‰€æœ‰ npm åŒ…ï¼ŒåŒä¸€ç‰ˆæœ¬çš„åŒ…ä»…å­˜å‚¨ä¸€ä»½å†…å®¹ï¼Œç”šè‡³ä¸åŒç‰ˆæœ¬çš„åŒ…ä¹Ÿä»…å­˜å‚¨ diff å†…å®¹ã€‚<br>å¦‚ä¸Šå›¾æ‰€ç¤ºä¸€ä¸ªåŒ…çš„å¯»æ‰¾éœ€è¦ç»è¿‡ä¸‰å±‚ç»“æ„ï¼š<code>node_modules/bar</code> &gt; è½¯é“¾æ¥ <code>node_modules/.pnpm/bar@1.0.0/node_modules/bar</code> &gt; ç¡¬é“¾æ¥ <code>~/.pnpm-store/v3/files/00/xxxxxx</code>ã€‚</p><h4 id="å¤‡æ³¨ï¼šè½¯é“¾æ¥å’Œç¡¬é“¾æ¥"><a href="#å¤‡æ³¨ï¼šè½¯é“¾æ¥å’Œç¡¬é“¾æ¥" class="headerlink" title="å¤‡æ³¨ï¼šè½¯é“¾æ¥å’Œç¡¬é“¾æ¥"></a>å¤‡æ³¨ï¼šè½¯é“¾æ¥å’Œç¡¬é“¾æ¥</h4><p>åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œå†…æ ¸ä¸ºæ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶åˆ†é…ä¸€ä¸ª Inode(ç´¢å¼•ç»“ç‚¹)ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªæƒŸä¸€çš„ inode å·ã€‚æ–‡ä»¶å±æ€§ä¿å­˜åœ¨ç´¢å¼•ç»“ç‚¹é‡Œï¼Œåœ¨è®¿é—®æ–‡ä»¶æ—¶ï¼Œç´¢å¼•ç»“ç‚¹è¢«å¤åˆ¶åˆ°å†…å­˜åœ¨ï¼Œä»è€Œå®ç°æ–‡ä»¶çš„å¿«é€Ÿè®¿é—®ã€‚<br>Linux ä¸­åŒ…æ‹¬ä¸¤ç§é“¾æ¥ï¼šç¡¬é“¾æ¥(Hard Link)å’Œè½¯é“¾æ¥(Soft Link)ï¼Œè½¯é“¾æ¥åˆç§°ä¸ºç¬¦å·é“¾æ¥ï¼ˆSymbolic linkï¼‰ã€‚<br>ç¡¬é“¾æ¥è¯´ç™½äº†æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹ï¼Œç³»ç»Ÿå¹¶ä¸ä¸ºå®ƒé‡æ–°åˆ†é… inodeï¼Œä»–å°†ä¸æºæ–‡ä»¶å…±ç”¨ä¸€ä¸ª inodeã€‚<br>è½¯é“¾æ¥ç›¸å½“äº windows çš„å¿«æ·æ–¹å¼ï¼Œè½¯é“¾æ¥æ–‡ä»¶ä¼šå°† inode æŒ‡å‘æºæ–‡ä»¶çš„ blockï¼ŒåŸæ–‡ä»¶ï¼†é“¾æ¥æ–‡ä»¶æ‹¥æœ‰ä¸åŒçš„ inode å·</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://juejin.cn/post/6932046455733485575">å…³äºç°ä»£åŒ…ç®¡ç†å™¨çš„æ·±åº¦æ€è€ƒâ€”â€”ä¸ºä»€ä¹ˆç°åœ¨æˆ‘æ›´æ¨è pnpm è€Œä¸æ˜¯ npm&#x2F;yarn?</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/6844904022718038024">yarn or npm ç‰ˆæœ¬å›ºåŒ–å¦‚ä½•é€‰æ‹©</a><br>ï¼ˆ3ï¼‰<a href="https://juejin.cn/post/7127295203177676837">pnpm æ˜¯å‡­ä»€ä¹ˆå¯¹ npm å’Œ yarn é™ç»´æ‰“å‡»çš„</a><br>ï¼ˆ4ï¼‰<a href="https://mp.weixin.qq.com/s/bZ7AVSjBcZrZ3I387_esmg">è¯¥ç”¨ pnpm äº†ï¼Œâ€œå¿«ã€å‡†ã€ç‹ â€ã€‚</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰ç«¯å¸¸ç”¨çš„åŒ…ä¾èµ–ç®¡ç†å·¥å…·æœ‰ npmã€yarn ä»¥åŠè¿‘æœŸéå¸¸å—æ¬¢è¿çš„ pnpmï¼Œæœ¬æ–‡ä¸»è¦ä¹Ÿæ˜¯å¯¹æ¯”è¿™å‡ ä¸ªå·¥å…·ä¹‹é—´çš„åŒºåˆ«ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æŠ€æœ¯å­¦ä¹ " scheme="https://unknown404.github.io/unkown404.github.io/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="å‰ç«¯ä¾èµ–åŒ…ç®¡ç†" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E5%89%8D%E7%AB%AF%E4%BE%9D%E8%B5%96%E5%8C%85%E7%AE%A1%E7%90%86/"/>
    
    <category term="npm" scheme="https://unknown404.github.io/unkown404.github.io/tags/npm/"/>
    
    <category term="yarn" scheme="https://unknown404.github.io/unkown404.github.io/tags/yarn/"/>
    
    <category term="pnpm" scheme="https://unknown404.github.io/unkown404.github.io/tags/pnpm/"/>
    
  </entry>
  
  <entry>
    <title>koroFileHeaderä½¿ç”¨æŠ€å·§</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/08/18/koroHeader/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/08/18/koroHeader/</id>
    <published>2022-08-18T15:42:15.000Z</published>
    <updated>2022-08-28T09:04:16.402Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ¥å¹¶ä¸æƒ³è®°çš„ï¼Œå¥ˆä½•è®°å¿†åŠ›å¤ªå·®ï¼Œæœ‰äº›å¿«æ·é”®æ“ä½œè€è¦ç¿»æ–‡æ¡£ä¹Ÿå¾ˆè®¨åŒï¼Œæ‰€ä»¥åœ¨æ­¤ç®€å•è®°å½•ä¸‹ã€‚</p><span id="more"></span> <h2 id="é…ç½®-setting-json"><a href="#é…ç½®-setting-json" class="headerlink" title="é…ç½® setting.json"></a>é…ç½® setting.json</h2><p><strong>æ–¹æ³• 1</strong><br>ç‚¹å‡»é¡¶éƒ¨å·¥å…·æ çš„ code é€‰é¡¹ï¼ŒæŒ‰<code>é¦–é€‰é¡¹ &gt; è®¾ç½® &gt; æœç´¢fileheader &gt; åœ¨setting.jsonä¸­ç¼–è¾‘</code>çš„æ­¥éª¤è¿›å…¥ setting.json æ–‡ä»¶<br><strong>æ–¹æ³• 2</strong><br>mac: command + p window: ctrl + p çš„å¿«æ·é”®æŒ‡ä»¤æ‰“å¼€ vscode å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥<code>&gt; Open Settings</code></p><h2 id="é…ç½®æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š"><a href="#é…ç½®æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š" class="headerlink" title="é…ç½®æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š"></a>é…ç½®æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š</h2><p>å¤´éƒ¨æ³¨é‡Šå¿«æ·é”®ï¼šwindowï¼šctrl+win+i,macï¼šctrl+cmd+i</p><p>æ–‡ä»¶å¤´éƒ¨æ³¨é‡Šçš„é…ç½®ä¿®æ”¹ä¸»è¦åœ¨ fileheader.customMade å†…éƒ¨æ“ä½œï¼Œé€šè¿‡å¢åŠ æˆ–åˆ é™¤å†…éƒ¨çš„å±æ€§æ¥ DIY åˆé€‚çš„æ–‡ä»¶è¯´æ˜ã€‚</p><p>é»˜è®¤é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-string">&quot;fileheader.customMade&quot;</span>: &#123;<br>  <span class="hljs-string">&quot;Date&quot;</span>: <span class="hljs-string">&quot;Do not edit&quot;</span>, <span class="hljs-regexp">//</span> æ–‡ä»¶åˆ›å»ºæ—¶é—´(ä¸å˜)<br>  <span class="hljs-regexp">//</span> æ–‡ä»¶æœ€åç¼–è¾‘è€…<br>  <span class="hljs-string">&quot;LastEditors&quot;</span>: <span class="hljs-string">&quot;git config user.name &amp;&amp; git config user.email&quot;</span>,<br>  <span class="hljs-string">&quot;LastEditTime&quot;</span>: <span class="hljs-string">&quot;Do not edit&quot;</span>, <span class="hljs-regexp">//</span> æ–‡ä»¶æœ€åç¼–è¾‘æ—¶é—´<br>  <span class="hljs-string">&quot;FilePath&quot;</span>: <span class="hljs-string">&quot;Do not edit&quot;</span> <span class="hljs-regexp">//</span> æ–‡ä»¶åœ¨é¡¹ç›®ä¸­çš„ç›¸å¯¹è·¯å¾„ è‡ªåŠ¨æ›´æ–°<br>&#125;<br><span class="hljs-regexp">//</span> ä¸å¡«å†™å¯¹åº”å±æ€§å³å…³é—­å¯¹åº”åŠŸèƒ½<br></code></pre></td></tr></table></figure><h2 id="é…ç½®å‡½æ•°æ³¨é‡Š"><a href="#é…ç½®å‡½æ•°æ³¨é‡Š" class="headerlink" title="é…ç½®å‡½æ•°æ³¨é‡Š"></a>é…ç½®å‡½æ•°æ³¨é‡Š</h2><p>æ–‡ä»¶å¤´éƒ¨æ³¨é‡Šçš„é…ç½®ä¿®æ”¹ä¸»è¦åœ¨ fileheader.cursorMode å†…éƒ¨æ“ä½œï¼Œé€šè¿‡å¢åŠ æˆ–åˆ é™¤å†…éƒ¨çš„å±æ€§æ¥ DIY åˆé€‚çš„å‡½æ•°è¯´æ˜ã€‚</p><p>é»˜è®¤é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;fileheader.cursorMode&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;Description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;param&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;return&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="é…ç½®å‡½æ•°ä½¿ç”¨æ–¹æ³•"><a href="#é…ç½®å‡½æ•°ä½¿ç”¨æ–¹æ³•" class="headerlink" title="é…ç½®å‡½æ•°ä½¿ç”¨æ–¹æ³•"></a>é…ç½®å‡½æ•°ä½¿ç”¨æ–¹æ³•</h3><p>å‡½æ•°è¯†åˆ«å¿«æ·é”®ï¼šwindowï¼šctrl+win+t,macï¼šctrl+cmd+t<br><strong>å•è¡Œå‡½æ•°å£°æ˜å‚æ•°æå–</strong><br>å°†é¼ æ ‡å…‰æ ‡æ”¾ç½®äºå‡½æ•°å£°æ˜é‚£ä¸€è¡Œï¼Œç„¶åæŒ‰å‡½æ•°æ³¨é‡Šå¿«æ·é”®ç”Ÿæˆ<br><strong>å¤šè¡Œå‡½æ•°å£°æ˜å‚æ•°æå–</strong><br>å½“å‡½æ•°å†…å‚æ•°è¿‡å¤šæ—¶ç»è¿‡ prettier ä¼˜åŒ–çš„å‡½æ•°å£°æ˜ä¼šå˜æˆå¤šè¡Œï¼Œè¿™æ—¶éœ€è¦ç”¨é¼ æ ‡å·¦é”®é€‰æ‹©å¤šè¡Œå‡½æ•°å£°æ˜åŒºåŸŸï¼Œå‡½æ•°å£°æ˜åŒºåŸŸå°½é‡ç²¾å‡†ï¼ŒæŒ‰å¿«æ·é”®ç”Ÿæˆ</p><h3 id="æ’ä»¶é…ç½®é¡¹"><a href="#æ’ä»¶é…ç½®é¡¹" class="headerlink" title="æ’ä»¶é…ç½®é¡¹"></a>æ’ä»¶é…ç½®é¡¹</h3><p>å¯ä»¥ç”¨äºå†³å®šè‡ªåŠ¨ç”Ÿæˆæ³¨é‡Šçš„æ—¶æœºã€æ³¨é‡Šçš„æ ¼å¼ç­‰å†…å®¹</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://hub.fastgit.xyz/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE">koroFileHeaderé…ç½®</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ¥å¹¶ä¸æƒ³è®°çš„ï¼Œå¥ˆä½•è®°å¿†åŠ›å¤ªå·®ï¼Œæœ‰äº›å¿«æ·é”®æ“ä½œè€è¦ç¿»æ–‡æ¡£ä¹Ÿå¾ˆè®¨åŒï¼Œæ‰€ä»¥åœ¨æ­¤ç®€å•è®°å½•ä¸‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥ä½œæŠ€å·§" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="vscodeæ’ä»¶" scheme="https://unknown404.github.io/unkown404.github.io/tags/vscode%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>å·¥å…·å‡½æ•°</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/08/18/toolFunc/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/08/18/toolFunc/</id>
    <published>2022-08-18T12:31:52.000Z</published>
    <updated>2023-01-19T03:24:43.706Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸€äº›å¸¸ç”¨çš„å·¥å…·å‡½æ•°ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰ã€‚</p><span id="more"></span><ol><li>ä¸¤ä¸ªæ•°ç»„æ±‚äº¤é›†</li></ol><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">intersectArr</span>(<span class="hljs-params">arr1,arr2</span>)&#123;<br>    <span class="hljs-keyword">return</span> arr1.<span class="hljs-built_in">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>arr2.<span class="hljs-built_in">includes</span>(item))<br>&#125;<br></code></pre></td></tr></table></figure><p>å»¶ä¼¸ï¼šåˆ¤æ–­æŸæ•°ç»„æ˜¯å¦åŒ…å«å¦ä¸€æ•°ç»„çš„å‚æ•°ï¼ˆé€‚ç”¨äºæƒé™éªŒè¯ï¼Œç”¨æˆ·çš„æƒé™æ˜¯å¦ä¸è·¯ç”±è®¾ç½®çš„è§’è‰²æƒé™åŒ¹é…ï¼‰</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isIntersect</span>(<span class="hljs-params">arr1,arr2</span>)&#123;<br>    <span class="hljs-keyword">return</span> arr1.some(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>arr2.<span class="hljs-built_in">includes</span>(item))<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ é™¤å¯¹è±¡ä¸­çš„ null æˆ– undefined å€¼</li></ol><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const removeNullorUndefinedofObj = <span class="hljs-function"><span class="hljs-params">(obj)</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.entries(obj).reduce(<br>    <span class="hljs-function"><span class="hljs-params">(cur, [key, value])</span> =&gt;</span> (value === <span class="hljs-literal">null</span> || value === <span class="hljs-literal">undefined</span> ? cur : (cur[key] = value), cur),<br>    &#123;&#125;,<br>  );<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="3"><li>url ä¸­æœç´¢å‚æ•°æ ¼å¼åŒ–</li></ol><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> parseQuery = () =&gt; &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-keyword">search</span> = <span class="hljs-keyword">window</span>.location.<span class="hljs-keyword">search</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">search</span><br>    .slice(1)<br>    .<span class="hljs-keyword">split</span>(<span class="hljs-string">&quot;&amp;&quot;</span>)<br>    .reduce((<span class="hljs-keyword">query</span>, it) =&gt; &#123;<br>      <span class="hljs-keyword">const</span> [key, value] = it.<span class="hljs-keyword">split</span>(<span class="hljs-string">&quot;=&quot;</span>);<br>      <span class="hljs-keyword">query</span>[key] = decodeURIComponent(value);<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">query</span>;<br>    &#125;, &#123;&#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="4"><li>å¿«é€Ÿåˆ›å»º 0 - n-1 èŒƒå›´çš„æ•°ç»„</li></ol><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>(&#123;length: n&#125;, <span class="hljs-function"><span class="hljs-params">(_, i)</span> =&gt;</span> i)<br><br>[...<span class="hljs-built_in">Array</span>(n).keys()]<br><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(n).fill(<span class="hljs-number">1</span>).map(<span class="hljs-function"><span class="hljs-params">(_, i)</span> =&gt;</span> i)<br></code></pre></td></tr></table></figure><ol start="5"><li>å¤šä¸ªæ•°ç»„å…¨ç»„åˆçš„æƒ…å†µç»Ÿè®¡</li></ol><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">zuhe</span>(<span class="hljs-params">arr,n</span>)&#123;<br>    <span class="hljs-keyword">var</span> pass = <span class="hljs-keyword">new</span> Set();<br>    <span class="hljs-keyword">var</span> zh = []<br>    <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">0</span> || arr.<span class="hljs-built_in">length</span> &lt; n)&#123;throw <span class="hljs-string">&#x27;å‚æ•°é”™è¯¯&#x27;</span>&#125;<br>    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-keyword">for</span>(let _arr of arr)&#123;<br>            <span class="hljs-keyword">for</span>(let v of _arr)&#123;<br>                <span class="hljs-keyword">if</span>(!pass.has(v))&#123; <span class="hljs-comment">//å»é‡</span><br>                    pass.add(v);<br>                    zh.<span class="hljs-built_in">push</span>([v]);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> zh;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(let i=<span class="hljs-number">0</span>; i &lt;= arr.<span class="hljs-built_in">length</span>-n; i++ )&#123;<br>        <span class="hljs-keyword">for</span>(let v of arr[i])&#123;<br>            <span class="hljs-keyword">if</span>(!pass.has(v))&#123; <span class="hljs-comment">//å»é‡</span><br>                pass.add(v);<br>                let _zh = zuhe(arr.<span class="hljs-built_in">slice</span>(i+<span class="hljs-number">1</span>),n<span class="hljs-number">-1</span>).<span class="hljs-built_in">map</span>(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>&#123;<br>                    a.unshift(v)<br>                    <span class="hljs-keyword">return</span> a;<br>                &#125;)<br>                zh = zh.concat(_zh)<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> zh;<br>&#125;<br><span class="hljs-keyword">var</span> arr1 = [<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>];<br><span class="hljs-keyword">var</span> arr2 = [<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>];<br><span class="hljs-keyword">var</span> arr3 = [<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>];<br><br><span class="hljs-keyword">var</span> zh2 = zuhe([arr1,arr2,arr3],<span class="hljs-number">2</span>)<br><span class="hljs-keyword">var</span> zh3 = zuhe([arr1,arr2,arr3],<span class="hljs-number">3</span>)<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(zh2)<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(zh3)<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>ï¼ˆ1ï¼‰<a href="https://segmentfault.com/q/1010000018650936">jså¤šä¸ªæ•°ç»„å…ƒç´ ä¸¤ä¸¤ç»„åˆä¸‰ä¸‰ç»„åˆ</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®°å½•ä¸€äº›å¸¸ç”¨çš„å·¥å…·å‡½æ•°ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥ä½œæŠ€å·§" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%B7%A5%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="JavaScript" scheme="https://unknown404.github.io/unkown404.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>rollupæ‰“åŒ…å·¥å…·ä½¿ç”¨</title>
    <link href="https://unknown404.github.io/unkown404.github.io/2022/08/08/rollup/"/>
    <id>https://unknown404.github.io/unkown404.github.io/2022/08/08/rollup/</id>
    <published>2022-08-08T12:14:13.000Z</published>
    <updated>2023-02-19T03:19:04.432Z</updated>
    
    <content type="html"><![CDATA[<p>rollup ä½¿ç”¨æŒ‡å—å’Œç›¸å…³çŸ¥è¯†æ¢³ç†ã€‚</p><span id="more"></span><h2 id="rollup-æ¦‚è¿°"><a href="#rollup-æ¦‚è¿°" class="headerlink" title="rollup æ¦‚è¿°"></a>rollup æ¦‚è¿°</h2><p>rollup æ˜¯ä¸€ä¸ª js æ¨¡å—æ‰“åŒ…å™¨ã€‚ä¸ webpack ç›¸æ¯”ï¼Œrollup æ›´é€‚åˆæ‰“åŒ…åº“ï¼Œè€Œ webpack é€‚åˆæ‰“åŒ…é¡¹ç›®ï¼›åŒä½“ç§¯çš„ä»£ç æ¡ä»¶ä¸‹ rollup æ‰“åŒ…çš„ä»£ç ä½“æ£€è¦å°äº webpackã€‚rollup å¯¹äºä»£ç çš„ Tree-shaking å’Œ ES6 æ¨¡å—æœ‰ç€å…ˆå¤©çš„ç®—æ³•ä¼˜åŠ¿ä¸Šçš„æ”¯æŒï¼Œè€Œ webpack åœ¨ä»£ç åˆ†å‰²ã€é™æ€èµ„æºå¯¼å…¥åŠçƒ­æ¨¡å—æ›¿æ¢(HMR)æœ‰ç€æ›´å¤šä¼˜åŠ¿ã€‚</p><h2 id="rollup-ä½¿ç”¨"><a href="#rollup-ä½¿ç”¨" class="headerlink" title="rollup ä½¿ç”¨"></a>rollup ä½¿ç”¨</h2><h3 id="å®‰è£…-rollup-å·¥å…·"><a href="#å®‰è£…-rollup-å·¥å…·" class="headerlink" title="å®‰è£… rollup å·¥å…·"></a>å®‰è£… rollup å·¥å…·</h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå·¥ç¨‹ï¼Œæ‰“å¼€å‘½ä»¤è¡Œæ‰§è¡Œ<code>npm install --global rollup </code>æŒ‡ä»¤ã€‚æŒ‡ä»¤æ‰§è¡Œå®Œæˆåé¡¹ç›®çš„ç»“æ„å˜ä¸ºï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">â”œâ”€â”€ node_modules<br>â””â”€â”€ <span class="hljs-keyword">package</span>.json<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å·¥ç¨‹é‡Œå·²ç»é¢„è£…äº†ä¸€äº›æ’ä»¶ï¼Œå…è®¸æˆ‘ä»¬ç”¨ cli å‘½ä»¤æ¥æ‰“åŒ…ã€‚ä½†å¤æ‚çš„å·¥ç¨‹ä¸­è¿™ç§æ–¹å¼å°±æ¯”è¾ƒéº»çƒ¦ã€‚æ‰€ä»¥éœ€è¦é…ç½®æ–‡ä»¶ã€‚</p><h3 id="é…ç½®æ‰“åŒ…æ–‡ä»¶"><a href="#é…ç½®æ‰“åŒ…æ–‡ä»¶" class="headerlink" title="é…ç½®æ‰“åŒ…æ–‡ä»¶"></a>é…ç½®æ‰“åŒ…æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs es6">import babel from &quot;@rollup/plugin-babel&quot;;<br>import commonjs from &quot;rollup-plugin-commonjs&quot;;<br>import resolve from &quot;@rollup/plugin-node-resolve&quot;;<br>import size from &quot;rollup-plugin-sizes&quot;;<br>import &#123; terser &#125; from &quot;rollup-plugin-terser&quot;;<br>import cleanup from &quot;rollup-plugin-cleanup&quot;;<br><br>export default &#123;<br>  input: &quot;./index.js&quot;,<br>  output: [<br>    &#123;<br>      file: &quot;./dist/dofin.js&quot;,<br>      format: &quot;umd&quot;,<br>      name: &quot;DOFIN&quot;,<br>    &#125;,<br>    &#123;<br>      file: &quot;./dist/dofin.min.js&quot;,<br>      format: &quot;iife&quot;,<br>      name: &quot;DOFIN&quot;,<br>      plugins: [terser()],<br>    &#125;,<br>  ],<br>  plugins: [<br>    resolve(),<br>    size(),<br>    cleanup(&#123;<br>      comments: &quot;none&quot;,<br>    &#125;),<br>    babel(&#123;<br>      babelHelpers: &quot;runtime&quot;,<br>      exclude: &quot;node_modules/**&quot;,<br>    &#125;),<br>    commonjs(),<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šè¿°æŸä¸€é…ç½®æ–‡ä»¶ rollup.config.js ä¸ºä¾‹ï¼Œè¯¥æ–‡ä»¶é€šå¸¸éœ€è¦éœ€è¦çš„æ ¸å¿ƒå‚æ•°åŒ…æ‹¬ï¼š</p><h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><p>æ‰“åŒ…æ–‡ä»¶å…¥å£</p><h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p>æ–‡ä»¶è¾“å‡ºé…ç½®</p><ul><li><strong>file</strong> è¡¨ç¤ºè¾“å‡ºæ–‡ä»¶çš„è·¯å¾„</li><li><strong>format</strong> è¡¨ç¤ºè¾“å‡ºçš„æ ¼å¼</li><li><strong>name</strong> å½“ format ä¸º iife å’Œ umd æ—¶å¿…é¡»æä¾›ï¼Œå°†ä½œä¸ºå…¨å±€å˜é‡æŒ‚åœ¨ window(æµè§ˆå™¨ç¯å¢ƒ)ä¸‹ï¼šwindow.A&#x3D;â€¦</li></ul><h4 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h4><p>ä½¿ç”¨çš„æ’ä»¶</p><h4 id="external"><a href="#external" class="headerlink" title="external"></a>external</h4><p>ä½¿ç”¨çš„å¤–éƒ¨ä¾èµ–ï¼Œä¸ä¼šè¢«æ‰“åŒ…è¿›è¾“å‡ºæ–‡ä»¶</p><h4 id="global"><a href="#global" class="headerlink" title="global"></a>global</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">global:&#123;<br>    <span class="hljs-string">&#x27;jquery&#x27;</span>:<span class="hljs-string">&#x27;$&#x27;</span> <span class="hljs-regexp">//</span>å‘Šè¯‰rollup å…¨å±€å˜é‡$å³æ˜¯jquery<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‰§è¡Œæ‰“åŒ…æŒ‡ä»¤"><a href="#æ‰§è¡Œæ‰“åŒ…æŒ‡ä»¤" class="headerlink" title="æ‰§è¡Œæ‰“åŒ…æŒ‡ä»¤"></a>æ‰§è¡Œæ‰“åŒ…æŒ‡ä»¤</h3><p>å¯ä»¥ç›´æ¥åœ¨æ‰§è¡Œç»ˆç«¯è¾“å…¥<code>rollup -c</code>é»˜è®¤æ‰§è¡Œ rollup.config.js æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨ package.json æ–‡ä»¶é‡Œçš„ scripts å±æ€§é…ç½®æŒ‡ä»¤ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;<br><br>  <span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;build-browser&quot;</span>: <span class="hljs-string">&quot;rollup --config browser.rollup.config.js &quot;</span>,<br>ã€  &#125;,<br>  <span class="hljs-string">&quot;dependencies&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;@babel/runtime&quot;</span>: <span class="hljs-string">&quot;^7.14.6&quot;</span>,<br>    <span class="hljs-string">&quot;@rollup/plugin-json&quot;</span>: <span class="hljs-string">&quot;^4.1.0&quot;</span>,<br>    <span class="hljs-string">&quot;rollup-plugin-cleanup&quot;</span>: <span class="hljs-string">&quot;^3.2.1&quot;</span>,<br>    <span class="hljs-string">&quot;rollup-plugin-sizes&quot;</span>: <span class="hljs-string">&quot;^1.0.4&quot;</span>,<br>    <span class="hljs-string">&quot;tti-polyfill&quot;</span>: <span class="hljs-string">&quot;^0.2.2&quot;</span><br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>rollup æŒ‡ä»¤å‘½ä»¤è¡Œå¸¸ç”¨çš„å‚æ•°åŒ…æ‹¬ï¼š</p><ul><li><code>-c</code>ã€‚æŒ‡å®š rollup çš„é…ç½®æ–‡ä»¶ã€‚</li><li><code>-w</code>ã€‚ç›‘å¬æºæ–‡ä»¶æ˜¯å¦æœ‰æ”¹åŠ¨ï¼Œå¦‚æœæœ‰æ”¹åŠ¨ï¼Œé‡æ–°æ‰“åŒ…ã€‚</li><li><code>-f</code>ã€‚-f å‚æ•°æ˜¯â€“format çš„ç¼©å†™ï¼Œå®ƒè¡¨ç¤ºç”Ÿæˆä»£ç çš„æ ¼å¼ã€‚</li><li><code>-o</code>ã€‚-o æŒ‡å®šäº†è¾“å‡ºçš„è·¯å¾„<br>æ‰§è¡Œ<code>npm run build-browser</code>å³å¯æ‰“åŒ…å®Œæˆï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºè¾“å‡ºç»“æœ</li></ul><h2 id="è¾“å‡ºä»£ç æ ¼å¼è¯´æ˜"><a href="#è¾“å‡ºä»£ç æ ¼å¼è¯´æ˜" class="headerlink" title="è¾“å‡ºä»£ç æ ¼å¼è¯´æ˜"></a>è¾“å‡ºä»£ç æ ¼å¼è¯´æ˜</h2><p>é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šå…¶è¾“å‡º amd , cjs , esm , iife , umd , system å…­ç§æ ¼å¼çš„æ–‡ä»¶ã€‚</p><h3 id="amd"><a href="#amd" class="headerlink" title="amd"></a>amd</h3><p>â€œAsynchronous Module Definitionâ€çš„ç¼©å†™ï¼Œæ„æ€å°±æ˜¯â€å¼‚æ­¥æ¨¡å—å®šä¹‰â€ã€‚<br>æ‰“åŒ…åçš„ä»£ç å…¶æ ¸å¿ƒå†…å®¹æ˜¯ä¸€ä¸ªå…¨å±€æ–¹æ³• defineã€‚</p><p>define æ–¹æ³•å¯ä»¥æœ‰ä¸‰ä¸ªå…¥å‚ï¼Œä»¥æ–‡ç« <a href="https://juejin.cn/post/7051236803344334862">è¯´ä¸æ¸… rollup èƒ½è¾“å‡ºå“ª 6 ç§æ ¼å¼ ğŸ˜¥ å·®ç‚¹è¢«é„™è§†</a>ä¸­çš„ä»£ç ä¸ºä¾‹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>æ¨¡å—åç§° Testï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šä¸ä¼šå‡ºç°</li><li>[exports, lodash] åˆ†åˆ«è¡¨ç¤ºæ¨¡å—çš„è¾“å‡ºå’Œå¤–éƒ¨ä¾èµ–</li><li>ä»£è¡¨æ¨¡å—çš„å®é™…å†…å®¹çš„ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä¸€ä¸ªä»¥ exports å’Œ lodash ä½œä¸ºå…¥å‚çš„æ–¹æ³•ã€‚</li></ul><h4 id="è¿è¡Œæ–¹æ³•"><a href="#è¿è¡Œæ–¹æ³•" class="headerlink" title="è¿è¡Œæ–¹æ³•"></a>è¿è¡Œæ–¹æ³•</h4><p>è°ƒç”¨æ‰“åŒ…åçš„æ¨¡å—å†…å®¹æ—¶ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li>åœ¨æµè§ˆå™¨å†…å¼•å…¥ require.js</li><li>é€šè¿‡ requirejs.config æ–¹æ³•å®šä¹‰å…¨å±€çš„ä¾èµ–</li><li>é€šè¿‡ requirejs.define æ³¨å†Œæ¨¡å—</li><li>é€šè¿‡ requirejs() å®Œæˆæ¨¡å—å¼•å…¥</li></ol><h4 id="é€‚åˆåœºæ™¯"><a href="#é€‚åˆåœºæ™¯" class="headerlink" title="é€‚åˆåœºæ™¯"></a>é€‚åˆåœºæ™¯</h4><p>åªéœ€è¦åœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨çš„åœºæ™¯ã€‚</p><h3 id="cjs"><a href="#cjs" class="headerlink" title="cjs"></a>cjs</h3><p>CommonJS æ ‡å‡†ã€‚æ˜¯ä¸ºäº†è§£å†³ node.js åœ¨æ¨¡å—åŒ–ä¸Šçš„ç¼ºå¤±ï¼Œ äº 2009 å¹´ 10 æœˆæå‡ºã€‚æ‰€ä»¥å¹¶ä¸èƒ½ç”¨äºæµè§ˆå™¨ä¸Šã€‚</p><h4 id="è¿è¡Œæ–¹æ³•-1"><a href="#è¿è¡Œæ–¹æ³•-1" class="headerlink" title="è¿è¡Œæ–¹æ³•"></a>è¿è¡Œæ–¹æ³•</h4><p>js æ–‡ä»¶é‡Œä½¿ç”¨ require æ–¹æ³•å¼•å…¥æ‰“åŒ…æ–‡ä»¶</p><h4 id="é€‚åˆåœºæ™¯-1"><a href="#é€‚åˆåœºæ™¯-1" class="headerlink" title="é€‚åˆåœºæ™¯"></a>é€‚åˆåœºæ™¯</h4><p>åªéœ€è¦åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨çš„åœºæ™¯ã€‚</p><h3 id="esm"><a href="#esm" class="headerlink" title="esm"></a>esm</h3><p>éµå¾ª es6 æ¨¡å—åŒ–è¯­æ³•ï¼Œé€šè¿‡ export å‘½ä»¤æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œå†é€šè¿‡ import å‘½ä»¤è¾“å…¥ã€‚</p><h4 id="è¿è¡Œæ–¹æ³•-2"><a href="#è¿è¡Œæ–¹æ³•-2" class="headerlink" title="è¿è¡Œæ–¹æ³•"></a>è¿è¡Œæ–¹æ³•</h4><p>å¦‚æœéœ€è¦åœ¨æµè§ˆå™¨ä¸Šä½¿ç”¨ï¼Œéœ€è¦ç”¨<code>&lt;script type=&quot;module&quot;&gt;</code>æ ‡ç­¾æ‰èƒ½æ”¯æŒæ¨¡å—å¼•å…¥è¯­æ³•ï¼Œç”¨<code>import ... from ...</code>å¯¼å…¥ä»£ç ã€‚</p><h4 id="é€‚åˆåœºæ™¯-2"><a href="#é€‚åˆåœºæ™¯-2" class="headerlink" title="é€‚åˆåœºæ™¯"></a>é€‚åˆåœºæ™¯</h4><ol><li>è¿˜ä¼šè¢«å¼•ç”¨ã€äºŒæ¬¡ç¼–è¯‘çš„åœºæ™¯ï¼ˆå¦‚ç»„ä»¶åº“ç­‰ï¼‰</li><li>æµè§ˆå™¨è°ƒè¯•åœºæ™¯å¦‚ vite.js çš„å¼€å‘æ—¶</li><li>å¯¹æµè§ˆå™¨å…¼å®¹æ€§éå¸¸å®½æ¾çš„åœºæ™¯ã€‚</li></ol><h3 id="iife"><a href="#iife" class="headerlink" title="iife"></a>iife</h3><p>IIFE çš„å…¨ç§°æ˜¯ â€œimmediately invoked function expressionâ€ï¼Œå³è‡ªæ‰§è¡Œå‡½æ•°ã€‚æ‰“åŒ…å‡ºæ¥æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¯¹å¤–éƒ¨çš„ä¾èµ–é€šè¿‡å…¥å‚çš„å½¢å¼ä¼ å…¥è¯¥å‡½æ•°</p><h4 id="è¿è¡Œæ–¹æ³•-3"><a href="#è¿è¡Œæ–¹æ³•-3" class="headerlink" title="è¿è¡Œæ–¹æ³•"></a>è¿è¡Œæ–¹æ³•</h4><p>å¦‚æœå®ƒæ²¡æœ‰å…¶ä»–ä¾èµ–ï¼Œåªéœ€è¦å»å¼•å…¥æ–‡ä»¶ï¼Œç„¶ååœ¨ window ä¸Šå–æ‰“åŒ…æ—¶å‘½åçš„æ¨¡å—åå³å¯ã€‚</p><p>jquery å°±æ˜¯å…¸å‹çš„è‡ªæ‰§è¡Œå‡½æ•°æ¨¡å¼ï¼Œå½“ä½ å¼•å…¥<code>http://cdn.bootcss.com/jquery/3.3.1/jquery.min.js</code>æ–‡ä»¶åï¼Œå®ƒå°±ä¼šæŒ‚åœ¨åˆ° window.$ ä¸Šï¼Œå¯ä»¥ç›´æ¥åœ¨ js æ–‡ä»¶ä½¿ç”¨ jquery è¯­æ³•å¦‚<code>$(&#39;.input&#39;).addClass(&#39;test&#39;)</code></p><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>é€šè¿‡é—­åŒ…è¥é€ äº†ä¸€ä¸ªâ€œç§æœ‰â€å‘½åç©ºé—´ï¼Œé˜²æ­¢å½±å“å…¨å±€ï¼Œå¹¶é˜²æ­¢è¢«ä»å¤–éƒ¨ä¿®æ”¹ç§æœ‰å˜é‡ã€‚</li><li>ç®€å•æ˜“æ‡‚</li><li>å¯¹ä»£ç ä½“ç§¯çš„å½±å“ä¸å¤§<br><strong>ç¼ºç‚¹ï¼š</strong></li><li>è¾“å‡ºçš„å˜é‡å¯èƒ½å½±å“å…¨å±€å˜é‡ï¼›å¼•å…¥ä¾èµ–åŒ…æ—¶ä¾èµ–å…¨å±€å˜é‡ã€‚</li><li>éœ€è¦ä½¿ç”¨è€…è‡ªè¡Œç»´æŠ¤ script æ ‡ç­¾çš„åŠ è½½é¡ºåºã€‚</li></ul><h4 id="é€‚åˆåœºæ™¯-3"><a href="#é€‚åˆåœºæ™¯-3" class="headerlink" title="é€‚åˆåœºæ™¯"></a>é€‚åˆåœºæ™¯</h4><p>é€‚åˆéƒ¨åˆ†åœºæ™¯ä½œä¸º SDK è¿›è¡Œä½¿ç”¨ï¼Œå°¤å…¶æ˜¯éœ€è¦æŠŠè‡ªå·±æŒ‚åˆ° window ä¸Šçš„åœºæ™¯ã€‚</p><h3 id="umd"><a href="#umd" class="headerlink" title="umd"></a>umd</h3><p>umd ä¸»è¦æ˜¯å¤„ç†å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥è®©æ¨¡å—åŒæ—¶å…¼å®¹è®©æ¨¡å—åŒæ—¶å…¼å®¹ AMDã€CommonJs å’Œæµè§ˆå™¨å˜é‡æŒ‚è½½çš„è§„èŒƒã€‚</p><h4 id="è¿è¡Œæ–¹æ³•-4"><a href="#è¿è¡Œæ–¹æ³•-4" class="headerlink" title="è¿è¡Œæ–¹æ³•"></a>è¿è¡Œæ–¹æ³•</h4><ul><li>åœ¨æµè§ˆå™¨ç«¯ï¼Œå®ƒçš„è¿è¡Œæ–¹å¼å¯ä»¥å’Œ amd å®Œå…¨ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ iife çš„è°ƒç”¨æ–¹å¼</li><li>åœ¨ node.js ç«¯ï¼Œå®ƒåˆ™å’Œ CommonJS çš„è¿è¡Œæ–¹å¼å®Œå…¨ä¸€è‡´</li></ul><h4 id="é€‚åˆåœºæ™¯-4"><a href="#é€‚åˆåœºæ™¯-4" class="headerlink" title="é€‚åˆåœºæ™¯"></a>é€‚åˆåœºæ™¯</h4><p>æ—¢å¯èƒ½åœ¨æµè§ˆå™¨ç«¯ä¹Ÿå¯èƒ½åœ¨ node.js é‡Œä½¿ç”¨çš„åœºæ™¯</p><h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><p>é‡‡ç”¨äº† SystemJS ä»£ç è¯­æ³•ã€‚ç”±äºå¾ˆå°‘ä½¿ç”¨è¯¥è¯­æ³•ï¼Œè¿™é‡Œæš‚æ—¶ä¸å±•å¼€ã€‚</p><h2 id="å¸¸ç”¨æ’ä»¶"><a href="#å¸¸ç”¨æ’ä»¶" class="headerlink" title="å¸¸ç”¨æ’ä»¶"></a>å¸¸ç”¨æ’ä»¶</h2><h3 id="resolve-æ’ä»¶"><a href="#resolve-æ’ä»¶" class="headerlink" title="resolve æ’ä»¶"></a>resolve æ’ä»¶</h3><h4 id="å®‰è£…æŒ‡ä»¤"><a href="#å®‰è£…æŒ‡ä»¤" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">npm i -D @rollup/plugin-<span class="hljs-keyword">node</span><span class="hljs-title">-resolve</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨é‡Š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"> <span class="hljs-selector-tag">i</span>  æ˜¯ install çš„ç®€å†™<br>-S å°±æ˜¯ <span class="hljs-attr">--save</span> çš„ç®€å†™ï¼Œå®‰è£…çš„æ’ä»¶ä¼šè¢«å†™å…¥åˆ° dependencies åŒºå—é‡Œé¢å»ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¹Ÿå­˜åœ¨å¯¹è¯¥åŒ…çš„ä¾èµ–<br>-D å°±æ˜¯ <span class="hljs-attr">--save-dev</span> çš„ç®€å†™ï¼Œ å®‰è£…çš„æ’ä»¶ä¼šè¢«å†™å…¥åˆ° devDependencies åŸŸé‡Œé¢å»ï¼Œå³æ’ä»¶åªç”¨äºå¼€å‘ç¯å¢ƒ<br></code></pre></td></tr></table></figure><h4 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>å°†æˆ‘ä»¬ç¼–å†™çš„æºç ä¸ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ä»£ç è¿›è¡Œåˆå¹¶ï¼Œæ‰“åŒ…åçš„ä»£ç é‡Œä¼šå‡ºç°å¼•ç”¨æ¨¡å—çš„ä»£ç ã€‚åœ¨ä½¿ç”¨ resolve æ¨¡å—ä¸‹ï¼Œå¦‚æœå¸Œæœ›ä¾èµ–çš„æ¨¡å—ä¸è¢«æ‰“åŒ…ï¼Œä¿æŒå¤–éƒ¨å¼•ç”¨çŠ¶æ€æ—¶ï¼Œå°±éœ€è¦ config æ–‡ä»¶ä½¿ç”¨ external å±æ€§ï¼Œæ¥å‘Šè¯‰ rollup.js å“ªäº›æ˜¯å¤–éƒ¨çš„ç±»åº“ã€‚</p><h3 id="commonJs-æ’ä»¶"><a href="#commonJs-æ’ä»¶" class="headerlink" title="commonJs æ’ä»¶"></a>commonJs æ’ä»¶</h3><h4 id="å®‰è£…æŒ‡ä»¤-1"><a href="#å®‰è£…æŒ‡ä»¤-1" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> i -D @rollup/plugin-commonjs<br></code></pre></td></tr></table></figure><h4 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>rollup ç¼–è¯‘æºç ä¸­çš„æ¨¡å—å¼•ç”¨é»˜è®¤åªæ”¯æŒ ES6+çš„æ¨¡å—æ–¹å¼ import&#x2F;exportã€‚ç„¶è€Œå¤§é‡çš„ npm æ¨¡å—æ˜¯åŸºäº CommonJS æ¨¡å—æ–¹å¼ï¼Œä¸ºæ”¯æŒè¿™äº›æ¨¡å—çš„å¼•å…¥ï¼Œæ”¯æŒ commonjs è¯­æ³•çš„æ’ä»¶åº”è¿è€Œç”Ÿã€‚</p><h3 id="babel-æ’ä»¶"><a href="#babel-æ’ä»¶" class="headerlink" title="babel æ’ä»¶"></a>babel æ’ä»¶</h3><h4 id="å®‰è£…æŒ‡ä»¤-2"><a href="#å®‰è£…æŒ‡ä»¤-2" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> i -D @rollup/plugin-babel<br></code></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆååœ¨æ ¹ç›®å½•æ–‡ä»¶å¤¹ä¸‹æ·»åŠ .babelrc æ–‡ä»¶ï¼Œé…ç½®å†…å®¹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><br>&#123;<br>  <span class="hljs-regexp">//</span> å¼€å¯é»˜è®¤é¢„è®¾<br>  <span class="hljs-string">&quot;presets&quot;</span>: [<br>    [<br>      <span class="hljs-string">&quot;@babel/env&quot;</span>,<br>      &#123;<br>        <span class="hljs-string">&quot;modules&quot;</span>: false  <span class="hljs-regexp">//</span> å…³é—­ esm è½¬åŒ–ï¼Œç»Ÿä¸€äº¤ç”± rollup å¤„ç†ï¼Œé˜²æ­¢å†²çª<br>      &#125;<br>    ]<br>  ],<br>  <span class="hljs-string">&quot;plugins&quot;</span>: [<span class="hljs-string">&quot;@babel/plugin-transform-runtime&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>å®Œæˆåå®‰è£…æ’ä»¶å®‰è£…@babel&#x2F;core å’Œ @babel&#x2F;preset-env</p><h4 id="ä½œç”¨-2"><a href="#ä½œç”¨-2" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>å°†ä»£ç ä¸­çš„ es6 è¯­æ³•è½¬ä¸º es5ï¼Œé˜²æ­¢æ‰“åŒ…åçš„æ¨¡å—åœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸­æ— æ³•æ­£å¸¸è¿è¡Œ</p><h3 id="typescript-æ’ä»¶"><a href="#typescript-æ’ä»¶" class="headerlink" title="typescript æ’ä»¶"></a>typescript æ’ä»¶</h3><h4 id="å®‰è£…æŒ‡ä»¤-3"><a href="#å®‰è£…æŒ‡ä»¤-3" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> i -D @rollup/plugin-typescript<br></code></pre></td></tr></table></figure><p>è¯¥æ¨¡å—ä¾èµ–äº tslib å’Œ typescript æ¨¡å—ï¼Œæ‰€ä»¥è¿˜éœ€è¦å†å®‰è£…è¿™ä¸¤ä¸ªç»„ä»¶ã€‚å®‰è£…å®Œåè¿˜éœ€æˆ‘ä»¬æ–°å»º tsconfig é…ç½®ï¼Œå®Œæˆåæ‰å¯åœ¨ package.json çš„ plugins é…ç½®è¯¥æ’ä»¶</p><h4 id="ä½œç”¨-3"><a href="#ä½œç”¨-3" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>å¯ä»¥ç¼–è¯‘æ‰“åŒ… ts æ–‡ä»¶</p><h3 id="terser-æ’ä»¶"><a href="#terser-æ’ä»¶" class="headerlink" title="terser æ’ä»¶"></a>terser æ’ä»¶</h3><h4 id="å®‰è£…æŒ‡ä»¤-4"><a href="#å®‰è£…æŒ‡ä»¤-4" class="headerlink" title="å®‰è£…æŒ‡ä»¤"></a>å®‰è£…æŒ‡ä»¤</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> i -D rollup-plugin-terser<br></code></pre></td></tr></table></figure><h4 id="ä½œç”¨-4"><a href="#ä½œç”¨-4" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>å‹ç¼©ä»£ç ã€‚rollup ä¸­è™½ç„¶ä¹Ÿæœ‰ rollup-plugin-uglify æ’ä»¶ï¼Œä½†åªé€‚ç”¨äº es5 è¯­æ³•ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦ terser</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>ï¼ˆ1ï¼‰<a href="https://juejin.cn/post/6844904058394771470">Rollup æ‰“åŒ…å·¥å…·çš„ä½¿ç”¨ï¼ˆè¶…è¯¦ç»†ï¼Œè¶…åŸºç¡€ï¼Œé™„ä»£ç æˆªå›¾è¶…ç®€å•ï¼‰</a><br>ï¼ˆ2ï¼‰<a href="https://juejin.cn/post/7051236803344334862">è¯´ä¸æ¸… rollup èƒ½è¾“å‡ºå“ª 6 ç§æ ¼å¼ ğŸ˜¥ å·®ç‚¹è¢«é„™è§†</a><br>ï¼ˆ3ï¼‰<a href="https://juejin.cn/post/6869551115420041229">ä¸€æ–‡å¸¦ä½ å¿«é€Ÿä¸Šæ‰‹ Rollup</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;rollup ä½¿ç”¨æŒ‡å—å’Œç›¸å…³çŸ¥è¯†æ¢³ç†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯æŠ€æœ¯ä½“ç³»" scheme="https://unknown404.github.io/unkown404.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB/"/>
    
    
    <category term="rollup" scheme="https://unknown404.github.io/unkown404.github.io/tags/rollup/"/>
    
    <category term="å‰ç«¯æ‰“åŒ…å·¥å…·" scheme="https://unknown404.github.io/unkown404.github.io/tags/%E5%89%8D%E7%AB%AF%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
